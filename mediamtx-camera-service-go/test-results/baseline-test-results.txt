FAIL	github.com/camerarecorder/mediamtx-camera-service-go/internal/logging [setup failed]
FAIL	./... [setup failed]
?   	github.com/camerarecorder/mediamtx-camera-service-go	[no test files]
?   	github.com/camerarecorder/mediamtx-camera-service-go/cmd/cli	[no test files]
?   	github.com/camerarecorder/mediamtx-camera-service-go/cmd/jwt-generator	[no test files]
=== RUN   TestMain_StartupShutdown
=== PAUSE TestMain_StartupShutdown
=== RUN   TestMain_SignalHandling
=== PAUSE TestMain_SignalHandling
=== RUN   TestMain_ContextHandling
=== PAUSE TestMain_ContextHandling
=== RUN   TestMain_ConfigurationPath
=== PAUSE TestMain_ConfigurationPath
=== RUN   TestMain_ServiceInitialization
=== PAUSE TestMain_ServiceInitialization
=== RUN   TestMain_ErrorHandling
=== PAUSE TestMain_ErrorHandling
=== RUN   TestMain_ShutdownHandling
=== PAUSE TestMain_ShutdownHandling
=== RUN   TestMain_LoggingMessages
=== PAUSE TestMain_LoggingMessages
=== RUN   TestMain_ComponentDependencies
=== PAUSE TestMain_ComponentDependencies
=== RUN   TestMain_ConfigurationValidation
=== PAUSE TestMain_ConfigurationValidation
=== RUN   TestMain_SignalNotification
=== PAUSE TestMain_SignalNotification
=== CONT  TestMain_StartupShutdown
--- PASS: TestMain_StartupShutdown (0.00s)
=== CONT  TestMain_ContextHandling
=== CONT  TestMain_SignalHandling
=== CONT  TestMain_ErrorHandling
=== CONT  TestMain_ConfigurationPath
--- PASS: TestMain_ErrorHandling (0.00s)
=== CONT  TestMain_ServiceInitialization
--- PASS: TestMain_ServiceInitialization (0.00s)
=== CONT  TestMain_ConfigurationValidation
--- PASS: TestMain_ConfigurationValidation (0.00s)
=== CONT  TestMain_SignalNotification
--- PASS: TestMain_ConfigurationPath (0.00s)
=== CONT  TestMain_ComponentDependencies
--- PASS: TestMain_ComponentDependencies (0.00s)
=== CONT  TestMain_LoggingMessages
--- PASS: TestMain_LoggingMessages (0.00s)
=== CONT  TestMain_ShutdownHandling
--- PASS: TestMain_ShutdownHandling (0.00s)
--- PASS: TestMain_SignalHandling (0.01s)
--- PASS: TestMain_SignalNotification (0.01s)
--- PASS: TestMain_ContextHandling (0.10s)
PASS
ok  	github.com/camerarecorder/mediamtx-camera-service-go/cmd/server	0.109s
=== RUN   TestBoundedWorkerPool_RaceConditionDetection
time="2025-10-04 22:11:55" level=info msg="Bounded worker pool started"
time="2025-10-04 22:11:55" level=warning msg="Task timed out in worker pool"
    bounded_worker_pool_race_test.go:75: Statistics after 100 iterations with 500 total tasks:
    bounded_worker_pool_race_test.go:76:   Completed: 499
    bounded_worker_pool_race_test.go:77:   Failed: 0
    bounded_worker_pool_race_test.go:78:   Timeout: 1
    bounded_worker_pool_race_test.go:79:   Total Processed: 500
    bounded_worker_pool_race_test.go:80:   Total Submitted: 500
time="2025-10-04 22:11:56" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:11:56" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:11:56" level=info msg="Bounded worker pool stopped"
--- PASS: TestBoundedWorkerPool_RaceConditionDetection (1.69s)
=== RUN   TestBoundedWorkerPool_StatisticsConsistency
time="2025-10-04 22:11:56" level=info msg="Bounded worker pool started"
time="2025-10-04 22:11:57" level=warning msg="Task timed out in worker pool"
time="2025-10-04 22:11:57" level=warning msg="Task timed out in worker pool"
time="2025-10-04 22:11:57" level=warning msg="Task timed out in worker pool"
time="2025-10-04 22:11:57" level=warning msg="Task timed out in worker pool"
time="2025-10-04 22:11:57" level=error msg="Task panicked during execution"
time="2025-10-04 22:11:57" level=error msg="Task panicked during execution"
time="2025-10-04 22:11:57" level=error msg="Task panicked during execution"
time="2025-10-04 22:11:57" level=warning msg="Task timed out in worker pool"
    bounded_worker_pool_race_test.go:144: Final statistics:
    bounded_worker_pool_race_test.go:145:   Completed: 10 (expected: 10)
    bounded_worker_pool_race_test.go:146:   Failed: 3 (expected: 3)
    bounded_worker_pool_race_test.go:147:   Timeout: 5 (expected: 5)
    bounded_worker_pool_race_test.go:148:   Total: 18 (expected: 18)
time="2025-10-04 22:11:57" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:11:57" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:11:57" level=info msg="Bounded worker pool stopped"
--- PASS: TestBoundedWorkerPool_StatisticsConsistency (0.51s)
=== RUN   TestBoundedWorkerPool_HighConcurrencyStress
time="2025-10-04 22:11:57" level=info msg="Bounded worker pool started"
    bounded_worker_pool_race_test.go:213: High concurrency stress test results:
    bounded_worker_pool_race_test.go:214:   Expected tasks: 200
    bounded_worker_pool_race_test.go:215:   Completed: 200
    bounded_worker_pool_race_test.go:216:   Failed: 0
    bounded_worker_pool_race_test.go:217:   Timeout: 0
    bounded_worker_pool_race_test.go:218:   Total Processed: 200
time="2025-10-04 22:11:58" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:11:58" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:11:58" level=info msg="Bounded worker pool stopped"
--- PASS: TestBoundedWorkerPool_HighConcurrencyStress (0.52s)
=== RUN   TestBoundedWorkerPool_ConcurrentPanicStress
time="2025-10-04 22:11:58" level=info msg="Bounded worker pool started"
time="2025-10-04 22:11:58" level=error msg="Task panicked during execution"
time="2025-10-04 22:11:58" level=error msg="Task panicked during execution"
time="2025-10-04 22:11:58" level=error msg="Task panicked during execution"
time="2025-10-04 22:11:58" level=error msg="Task panicked during execution"
time="2025-10-04 22:11:58" level=error msg="Task panicked during execution"
time="2025-10-04 22:11:58" level=error msg="Task panicked during execution"
time="2025-10-04 22:11:58" level=error msg="Task panicked during execution"
time="2025-10-04 22:11:58" level=error msg="Task panicked during execution"
time="2025-10-04 22:11:58" level=error msg="Task panicked during execution"
time="2025-10-04 22:11:58" level=error msg="Task panicked during execution"
time="2025-10-04 22:11:58" level=error msg="Task panicked during execution"
time="2025-10-04 22:11:58" level=error msg="Task panicked during execution"
time="2025-10-04 22:11:58" level=error msg="Task panicked during execution"
time="2025-10-04 22:11:58" level=error msg="Task panicked during execution"
time="2025-10-04 22:11:58" level=error msg="Task panicked during execution"
time="2025-10-04 22:11:58" level=error msg="Task panicked during execution"
time="2025-10-04 22:11:58" level=error msg="Task panicked during execution"
time="2025-10-04 22:11:58" level=error msg="Task panicked during execution"
time="2025-10-04 22:11:58" level=error msg="Task panicked during execution"
time="2025-10-04 22:11:58" level=error msg="Task panicked during execution"
time="2025-10-04 22:11:58" level=error msg="Task panicked during execution"
time="2025-10-04 22:11:58" level=error msg="Task panicked during execution"
time="2025-10-04 22:11:58" level=error msg="Task panicked during execution"
time="2025-10-04 22:11:58" level=error msg="Task panicked during execution"
time="2025-10-04 22:11:58" level=error msg="Task panicked during execution"
time="2025-10-04 22:11:58" level=error msg="Task panicked during execution"
time="2025-10-04 22:11:58" level=error msg="Task panicked during execution"
time="2025-10-04 22:11:58" level=error msg="Task panicked during execution"
time="2025-10-04 22:11:58" level=error msg="Task panicked during execution"
time="2025-10-04 22:11:58" level=error msg="Task panicked during execution"
time="2025-10-04 22:11:58" level=error msg="Task panicked during execution"
time="2025-10-04 22:11:58" level=error msg="Task panicked during execution"
time="2025-10-04 22:11:58" level=error msg="Task panicked during execution"
time="2025-10-04 22:11:58" level=error msg="Task panicked during execution"
time="2025-10-04 22:11:58" level=error msg="Task panicked during execution"
time="2025-10-04 22:11:58" level=error msg="Task panicked during execution"
time="2025-10-04 22:11:58" level=error msg="Task panicked during execution"
time="2025-10-04 22:11:58" level=error msg="Task panicked during execution"
time="2025-10-04 22:11:58" level=error msg="Task panicked during execution"
time="2025-10-04 22:11:58" level=error msg="Task panicked during execution"
time="2025-10-04 22:11:58" level=error msg="Task panicked during execution"
time="2025-10-04 22:11:58" level=error msg="Task panicked during execution"
time="2025-10-04 22:11:58" level=error msg="Task panicked during execution"
time="2025-10-04 22:11:58" level=error msg="Task panicked during execution"
time="2025-10-04 22:11:58" level=error msg="Task panicked during execution"
time="2025-10-04 22:11:58" level=error msg="Task panicked during execution"
time="2025-10-04 22:11:58" level=error msg="Task panicked during execution"
time="2025-10-04 22:11:58" level=error msg="Task panicked during execution"
time="2025-10-04 22:11:58" level=error msg="Task panicked during execution"
time="2025-10-04 22:11:58" level=error msg="Task panicked during execution"
time="2025-10-04 22:11:58" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:11:58" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:11:58" level=info msg="Bounded worker pool stopped"
--- PASS: TestBoundedWorkerPool_ConcurrentPanicStress (0.11s)
=== RUN   TestBoundedWorkerPool_ResourceLifecycle
time="2025-10-04 22:11:58" level=info msg="Bounded worker pool started"
time="2025-10-04 22:11:58" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:11:58" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:11:58" level=info msg="Bounded worker pool stopped"
--- PASS: TestBoundedWorkerPool_ResourceLifecycle (0.00s)
=== RUN   TestBoundedWorkerPool_ConcurrencyControl
time="2025-10-04 22:11:58" level=info msg="Bounded worker pool started"
time="2025-10-04 22:11:58" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:11:58" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:11:58" level=info msg="Bounded worker pool stopped"
--- PASS: TestBoundedWorkerPool_ConcurrencyControl (0.03s)
=== RUN   TestBoundedWorkerPool_TaskTimeout
time="2025-10-04 22:11:58" level=info msg="Bounded worker pool started"
time="2025-10-04 22:11:58" level=warning msg="Task timed out in worker pool"
time="2025-10-04 22:11:58" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:11:58" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:11:58" level=info msg="Bounded worker pool stopped"
--- PASS: TestBoundedWorkerPool_TaskTimeout (0.10s)
=== RUN   TestBoundedWorkerPool_PanicRecovery
time="2025-10-04 22:11:58" level=info msg="Bounded worker pool started"
time="2025-10-04 22:11:58" level=error msg="Task panicked during execution"
time="2025-10-04 22:11:58" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:11:58" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:11:58" level=info msg="Bounded worker pool stopped"
--- PASS: TestBoundedWorkerPool_PanicRecovery (0.00s)
=== RUN   TestBoundedWorkerPool_GracefulShutdown
time="2025-10-04 22:11:58" level=info msg="Bounded worker pool started"
time="2025-10-04 22:11:58" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:11:58" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:11:58" level=info msg="Bounded worker pool stopped"
--- PASS: TestBoundedWorkerPool_GracefulShutdown (0.10s)
=== RUN   TestBoundedWorkerPool_ConstructorEdgeCases
time="2025-10-04 22:11:58" level=info msg="Bounded worker pool started"
time="2025-10-04 22:11:58" level=info msg="Bounded worker pool started"
time="2025-10-04 22:11:58" level=info msg="Bounded worker pool started"
time="2025-10-04 22:11:58" level=info msg="Bounded worker pool started"
time="2025-10-04 22:11:58" level=info msg="Bounded worker pool started"
time="2025-10-04 22:11:58" level=info msg="Bounded worker pool started"
time="2025-10-04 22:11:58" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:11:58" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:11:58" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:11:58" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:11:58" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:11:58" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:11:58" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:11:58" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:11:58" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:11:58" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:11:58" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:11:58" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:11:58" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:11:58" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:11:58" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:11:58" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:11:58" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:11:58" level=info msg="Bounded worker pool stopped"
--- PASS: TestBoundedWorkerPool_ConstructorEdgeCases (0.00s)
=== RUN   TestBoundedWorkerPool_SubmitToStoppedPool
--- PASS: TestBoundedWorkerPool_SubmitToStoppedPool (0.00s)
=== RUN   TestBoundedWorkerPool_StartStopEdgeCases
time="2025-10-04 22:11:58" level=info msg="Bounded worker pool started"
time="2025-10-04 22:11:58" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:11:58" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:11:58" level=info msg="Bounded worker pool stopped"
--- PASS: TestBoundedWorkerPool_StartStopEdgeCases (0.00s)
=== RUN   TestBoundedWorkerPool_SubmitWithCancelledContext
time="2025-10-04 22:11:58" level=info msg="Bounded worker pool started"
time="2025-10-04 22:11:58" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:11:58" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:11:58" level=info msg="Bounded worker pool stopped"
--- PASS: TestBoundedWorkerPool_SubmitWithCancelledContext (0.05s)
=== RUN   TestCameraCapabilities_ProbeCapabilities_ReqCAM001_Success
time="2025-10-04 22:11:58" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:11:58" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:11:58" level=info msg="Created fresh device event source instance with smart selection"
    camera_capabilities_test.go:19: No devices available for capability testing
--- SKIP: TestCameraCapabilities_ProbeCapabilities_ReqCAM001_Success (0.00s)
=== RUN   TestCameraCapabilities_InvalidDevice_ReqCAM001_Success
time="2025-10-04 22:11:58" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:11:58" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:11:58" level=info msg="Created fresh device event source instance with smart selection"
    camera_capabilities_test.go:58: Testing invalid device: /dev/video999
    camera_capabilities_test.go:60: ✅ Invalid device scenario validated
--- PASS: TestCameraCapabilities_InvalidDevice_ReqCAM001_Success (0.00s)
=== RUN   TestCameraCapabilities_PermissionDenied_ReqCAM001_Success
time="2025-10-04 22:11:58" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:11:58" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:11:58" level=info msg="Created fresh device event source instance with smart selection"
    camera_capabilities_test.go:71: Permission denied test - this would test devices with restricted access
    camera_capabilities_test.go:73: ✅ Permission denied scenario validated
--- PASS: TestCameraCapabilities_PermissionDenied_ReqCAM001_Success (0.00s)
=== RUN   TestCameraCapabilities_FormatDetection_ReqCAM001_Success
time="2025-10-04 22:11:58" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:11:58" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:11:58" level=info msg="Created fresh device event source instance with smart selection"
    camera_capabilities_test.go:86: No devices available for format testing
--- SKIP: TestCameraCapabilities_FormatDetection_ReqCAM001_Success (0.00s)
=== RUN   TestCameraCapabilities_ConcurrentProbing_ReqCAM001_Success
time="2025-10-04 22:11:58" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:11:58" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:11:58" level=info msg="Created fresh device event source instance with smart selection"
    camera_capabilities_test.go:120: No devices available for concurrent testing
--- SKIP: TestCameraCapabilities_ConcurrentProbing_ReqCAM001_Success (0.00s)
=== RUN   TestCameraCapabilities_ErrorRecovery_ReqCAM001_Success
time="2025-10-04 22:11:58" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:11:58" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:11:58" level=info msg="Created fresh device event source instance with smart selection"
    camera_capabilities_test.go:178: ✅ Error recovery during capability probing validated
--- PASS: TestCameraCapabilities_ErrorRecovery_ReqCAM001_Success (0.00s)
=== RUN   TestDeviceDiscovery_Basic_ReqCAM001_Success
time="2025-10-04 22:11:58" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:11:58" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:11:58" level=info msg="Created fresh device event source instance with smart selection"
    camera_device_discovery_test.go:19: Discovered 0 devices
    camera_device_discovery_test.go:27: ✅ Basic device discovery validated
--- PASS: TestDeviceDiscovery_Basic_ReqCAM001_Success (0.00s)
=== RUN   TestDeviceDiscovery_NoDevices_ReqCAM001_Success
time="2025-10-04 22:11:58" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:11:58" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:11:58" level=info msg="Created fresh device event source instance with smart selection"
    camera_device_discovery_test.go:40: Discovered 0 devices (expected: 0 or more)
    camera_device_discovery_test.go:45: ✅ No devices scenario validated
--- PASS: TestDeviceDiscovery_NoDevices_ReqCAM001_Success (0.00s)
=== RUN   TestDeviceDiscovery_PartialFailures_ReqCAM001_Success
time="2025-10-04 22:11:58" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:11:58" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:11:58" level=info msg="Created fresh device event source instance with smart selection"
    camera_device_discovery_test.go:57: Discovered 0 devices with potential partial failures
    camera_device_discovery_test.go:63: ✅ Partial failures scenario validated
--- PASS: TestDeviceDiscovery_PartialFailures_ReqCAM001_Success (0.00s)
=== RUN   TestDeviceDiscovery_ConcurrentAccess_ReqCAM001_Success
time="2025-10-04 22:11:58" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:11:58" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:11:58" level=info msg="Created fresh device event source instance with smart selection"
    camera_device_discovery_test.go:91: Concurrent device discovery access completed successfully with 0 devices
    camera_device_discovery_test.go:92: ✅ Concurrent access validated
--- PASS: TestDeviceDiscovery_ConcurrentAccess_ReqCAM001_Success (0.00s)
=== RUN   TestDeviceDiscovery_Stats_ReqCAM001_Success
time="2025-10-04 22:11:58" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:11:58" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:11:58" level=info msg="Created fresh device event source instance with smart selection"
time="2025-10-04 22:11:58" level=info msg="Starting hybrid camera monitor"
time="2025-10-04 22:11:58" level=info msg="Starting device event source"
time="2025-10-04 22:11:58" level=info msg="Device event source Start() called"
time="2025-10-04 22:11:58" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:11:58" level=info msg="Device event source started successfully"
time="2025-10-04 22:11:58" level=info msg="Running in event-first mode with fsnotify support"
time="2025-10-04 22:11:58" level=info msg="Bounded worker pool started"
time="2025-10-04 22:11:58" level=info msg="Spawning monitor loops"
time="2025-10-04 22:11:58" level=info msg="Monitor start completed successfully"
    progressive_readiness.go:52: ✅ Monitor Start succeeded immediately - Progressive Readiness working
time="2025-10-04 22:11:58" level=info msg="Starting seed discovery"
    camera_asserters_test.go:133: ✅ PROGRESSIVE READINESS: Monitor start succeeded immediately
time="2025-10-04 22:11:58" level=info msg="Error checking device"
time="2025-10-04 22:11:58" level=warning msg="Device check error occurred"
time="2025-10-04 22:11:58" level=info msg="New V4L2 device discovered"
time="2025-10-04 22:11:58" level=info msg="Seed discovery completed"
time="2025-10-04 22:11:58" level=info msg="Monitor is now ready"
time="2025-10-04 22:11:58" level=info msg="Starting event-first camera monitoring"
time="2025-10-04 22:11:58" level=info msg="Camera reconcile loop started"
time="2025-10-04 22:11:58" level=info msg="Device event loop started"
    camera_asserters_test.go:159: ✅ Monitor is ready
    camera_device_discovery_test.go:114: Initial stats: &{Running:false ActiveTasks:0 PollingCycles:0 DeviceStateChanges:0 CapabilityProbesAttempted:0 CapabilityProbesSuccessful:0 CapabilityTimeouts:0 CapabilityParseErrors:0 PollingFailureCount:0 CurrentPollInterval:0.1 KnownDevicesCount:0 UdevEventsProcessed:0 UdevEventsFiltered:0 UdevEventsSkipped:0 DeviceEventsProcessed:0 DeviceEventsDropped:0 DevicesConnected:0}
    camera_device_discovery_test.go:115: Final stats: &{Running:true ActiveTasks:0 PollingCycles:1 DeviceStateChanges:1 CapabilityProbesAttempted:1 CapabilityProbesSuccessful:1 CapabilityTimeouts:0 CapabilityParseErrors:0 PollingFailureCount:0 CurrentPollInterval:0.1 KnownDevicesCount:1 UdevEventsProcessed:0 UdevEventsFiltered:0 UdevEventsSkipped:0 DeviceEventsProcessed:0 DeviceEventsDropped:0 DevicesConnected:0}
    camera_device_discovery_test.go:120: ✅ Device discovery statistics validated
time="2025-10-04 22:11:58" level=info msg="Stopping hybrid camera monitor"
time="2025-10-04 22:11:58" level=info msg="Camera reconcile loop stopped due to context cancellation"
time="2025-10-04 22:11:58" level=info msg="Device event loop stopped due to context cancellation"
time="2025-10-04 22:11:58" level=info msg="Event loop stopped"
time="2025-10-04 22:11:58" level=info msg="Stopped fsnotify device event source"
time="2025-10-04 22:11:58" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:11:58" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:11:58" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:11:58" level=info msg="Hybrid camera monitor stopped"
--- PASS: TestDeviceDiscovery_Stats_ReqCAM001_Success (0.30s)
=== RUN   TestCameraMonitor_EdgeCases_WithAsserters
=== RUN   TestCameraMonitor_EdgeCases_WithAsserters/rapid_start_stop_cycles
time="2025-10-04 22:11:58" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:11:58" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:11:58" level=info msg="Created fresh device event source instance with smart selection"
time="2025-10-04 22:11:58" level=info msg="Starting hybrid camera monitor"
time="2025-10-04 22:11:58" level=info msg="Starting device event source"
time="2025-10-04 22:11:58" level=info msg="Device event source Start() called"
time="2025-10-04 22:11:58" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:11:58" level=info msg="Device event source started successfully"
time="2025-10-04 22:11:58" level=info msg="Running in event-first mode with fsnotify support"
time="2025-10-04 22:11:58" level=info msg="Bounded worker pool started"
time="2025-10-04 22:11:58" level=info msg="Spawning monitor loops"
time="2025-10-04 22:11:58" level=info msg="Monitor start completed successfully"
    progressive_readiness.go:52: ✅ Monitor Start succeeded immediately - Progressive Readiness working
    camera_asserters_test.go:133: ✅ PROGRESSIVE READINESS: Monitor start succeeded immediately
time="2025-10-04 22:11:58" level=info msg="Starting seed discovery"
time="2025-10-04 22:11:58" level=info msg="Error checking device"
time="2025-10-04 22:11:58" level=warning msg="Device check error occurred"
time="2025-10-04 22:11:58" level=info msg="New V4L2 device discovered"
time="2025-10-04 22:11:58" level=info msg="Seed discovery completed"
time="2025-10-04 22:11:58" level=info msg="Monitor is now ready"
time="2025-10-04 22:11:58" level=info msg="Starting event-first camera monitoring"
time="2025-10-04 22:11:58" level=info msg="Camera reconcile loop started"
time="2025-10-04 22:11:58" level=info msg="Device event loop started"
    camera_asserters_test.go:159: ✅ Monitor is ready
time="2025-10-04 22:11:58" level=info msg="Stopping hybrid camera monitor"
time="2025-10-04 22:11:58" level=info msg="Device event loop stopped due to context cancellation"
time="2025-10-04 22:11:58" level=info msg="Camera reconcile loop stopped due to context cancellation"
time="2025-10-04 22:11:58" level=info msg="Event loop stopped"
time="2025-10-04 22:11:58" level=info msg="Stopped fsnotify device event source"
time="2025-10-04 22:11:58" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:11:58" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:11:58" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:11:58" level=info msg="Hybrid camera monitor stopped"
    camera_asserters_test.go:147: ✅ Monitor stopped successfully
time="2025-10-04 22:11:58" level=info msg="Starting hybrid camera monitor"
time="2025-10-04 22:11:58" level=info msg="Starting device event source"
time="2025-10-04 22:11:58" level=info msg="Device event source Start() called"
time="2025-10-04 22:11:58" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:11:58" level=info msg="Device event source started successfully"
time="2025-10-04 22:11:58" level=info msg="Running in event-first mode with fsnotify support"
time="2025-10-04 22:11:58" level=info msg="Bounded worker pool started"
time="2025-10-04 22:11:58" level=info msg="Spawning monitor loops"
time="2025-10-04 22:11:58" level=info msg="Monitor start completed successfully"
    progressive_readiness.go:52: ✅ Monitor Start succeeded immediately - Progressive Readiness working
    camera_asserters_test.go:133: ✅ PROGRESSIVE READINESS: Monitor start succeeded immediately
time="2025-10-04 22:11:58" level=info msg="Starting seed discovery"
time="2025-10-04 22:11:58" level=info msg="Error checking device"
time="2025-10-04 22:11:58" level=warning msg="Device check error occurred"
time="2025-10-04 22:11:58" level=info msg="Seed discovery completed"
time="2025-10-04 22:11:58" level=info msg="Monitor is now ready"
time="2025-10-04 22:11:58" level=info msg="Starting event-first camera monitoring"
time="2025-10-04 22:11:58" level=info msg="Camera reconcile loop started"
time="2025-10-04 22:11:58" level=info msg="Device event loop started"
    camera_asserters_test.go:159: ✅ Monitor is ready
time="2025-10-04 22:11:58" level=info msg="Stopping hybrid camera monitor"
time="2025-10-04 22:11:58" level=info msg="Device event loop stopped due to context cancellation"
time="2025-10-04 22:11:58" level=info msg="Camera reconcile loop stopped due to context cancellation"
time="2025-10-04 22:11:58" level=info msg="Event loop stopped"
time="2025-10-04 22:11:58" level=info msg="Stopped fsnotify device event source"
time="2025-10-04 22:11:58" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:11:58" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:11:58" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:11:58" level=info msg="Hybrid camera monitor stopped"
    camera_asserters_test.go:147: ✅ Monitor stopped successfully
time="2025-10-04 22:11:58" level=info msg="Starting hybrid camera monitor"
time="2025-10-04 22:11:58" level=info msg="Starting device event source"
time="2025-10-04 22:11:58" level=info msg="Device event source Start() called"
time="2025-10-04 22:11:58" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:11:58" level=info msg="Device event source started successfully"
time="2025-10-04 22:11:58" level=info msg="Running in event-first mode with fsnotify support"
time="2025-10-04 22:11:58" level=info msg="Bounded worker pool started"
time="2025-10-04 22:11:58" level=info msg="Spawning monitor loops"
time="2025-10-04 22:11:58" level=info msg="Monitor start completed successfully"
    progressive_readiness.go:52: ✅ Monitor Start succeeded immediately - Progressive Readiness working
    camera_asserters_test.go:133: ✅ PROGRESSIVE READINESS: Monitor start succeeded immediately
time="2025-10-04 22:11:58" level=info msg="Starting seed discovery"
time="2025-10-04 22:11:58" level=info msg="Error checking device"
time="2025-10-04 22:11:58" level=warning msg="Device check error occurred"
time="2025-10-04 22:11:58" level=info msg="Seed discovery completed"
time="2025-10-04 22:11:58" level=info msg="Monitor is now ready"
time="2025-10-04 22:11:58" level=info msg="Starting event-first camera monitoring"
time="2025-10-04 22:11:58" level=info msg="Camera reconcile loop started"
time="2025-10-04 22:11:58" level=info msg="Device event loop started"
    camera_asserters_test.go:159: ✅ Monitor is ready
time="2025-10-04 22:11:59" level=info msg="Stopping hybrid camera monitor"
time="2025-10-04 22:11:59" level=info msg="Device event loop stopped due to context cancellation"
time="2025-10-04 22:11:59" level=info msg="Camera reconcile loop stopped due to context cancellation"
time="2025-10-04 22:11:59" level=info msg="Event loop stopped"
time="2025-10-04 22:11:59" level=info msg="Stopped fsnotify device event source"
time="2025-10-04 22:11:59" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:11:59" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:11:59" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:11:59" level=info msg="Hybrid camera monitor stopped"
    camera_asserters_test.go:147: ✅ Monitor stopped successfully
time="2025-10-04 22:11:59" level=info msg="Starting hybrid camera monitor"
time="2025-10-04 22:11:59" level=info msg="Starting device event source"
time="2025-10-04 22:11:59" level=info msg="Device event source Start() called"
time="2025-10-04 22:11:59" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:11:59" level=info msg="Device event source started successfully"
time="2025-10-04 22:11:59" level=info msg="Running in event-first mode with fsnotify support"
time="2025-10-04 22:11:59" level=info msg="Bounded worker pool started"
time="2025-10-04 22:11:59" level=info msg="Spawning monitor loops"
time="2025-10-04 22:11:59" level=info msg="Monitor start completed successfully"
    progressive_readiness.go:52: ✅ Monitor Start succeeded immediately - Progressive Readiness working
    camera_asserters_test.go:133: ✅ PROGRESSIVE READINESS: Monitor start succeeded immediately
time="2025-10-04 22:11:59" level=info msg="Starting seed discovery"
time="2025-10-04 22:11:59" level=info msg="Error checking device"
time="2025-10-04 22:11:59" level=warning msg="Device check error occurred"
time="2025-10-04 22:11:59" level=info msg="Seed discovery completed"
time="2025-10-04 22:11:59" level=info msg="Monitor is now ready"
time="2025-10-04 22:11:59" level=info msg="Starting event-first camera monitoring"
time="2025-10-04 22:11:59" level=info msg="Camera reconcile loop started"
time="2025-10-04 22:11:59" level=info msg="Device event loop started"
    camera_asserters_test.go:159: ✅ Monitor is ready
time="2025-10-04 22:11:59" level=info msg="Stopping hybrid camera monitor"
time="2025-10-04 22:11:59" level=info msg="Device event loop stopped due to context cancellation"
time="2025-10-04 22:11:59" level=info msg="Camera reconcile loop stopped due to context cancellation"
time="2025-10-04 22:11:59" level=info msg="Event loop stopped"
time="2025-10-04 22:11:59" level=info msg="Stopped fsnotify device event source"
time="2025-10-04 22:11:59" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:11:59" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:11:59" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:11:59" level=info msg="Hybrid camera monitor stopped"
    camera_asserters_test.go:147: ✅ Monitor stopped successfully
time="2025-10-04 22:11:59" level=info msg="Starting hybrid camera monitor"
time="2025-10-04 22:11:59" level=info msg="Starting device event source"
time="2025-10-04 22:11:59" level=info msg="Device event source Start() called"
time="2025-10-04 22:11:59" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:11:59" level=info msg="Device event source started successfully"
time="2025-10-04 22:11:59" level=info msg="Running in event-first mode with fsnotify support"
time="2025-10-04 22:11:59" level=info msg="Bounded worker pool started"
time="2025-10-04 22:11:59" level=info msg="Spawning monitor loops"
time="2025-10-04 22:11:59" level=info msg="Monitor start completed successfully"
    progressive_readiness.go:52: ✅ Monitor Start succeeded immediately - Progressive Readiness working
    camera_asserters_test.go:133: ✅ PROGRESSIVE READINESS: Monitor start succeeded immediately
time="2025-10-04 22:11:59" level=info msg="Starting seed discovery"
time="2025-10-04 22:11:59" level=info msg="Error checking device"
time="2025-10-04 22:11:59" level=warning msg="Device check error occurred"
time="2025-10-04 22:11:59" level=info msg="Seed discovery completed"
time="2025-10-04 22:11:59" level=info msg="Monitor is now ready"
time="2025-10-04 22:11:59" level=info msg="Starting event-first camera monitoring"
time="2025-10-04 22:11:59" level=info msg="Camera reconcile loop started"
time="2025-10-04 22:11:59" level=info msg="Device event loop started"
    camera_asserters_test.go:159: ✅ Monitor is ready
time="2025-10-04 22:11:59" level=info msg="Stopping hybrid camera monitor"
time="2025-10-04 22:11:59" level=info msg="Camera reconcile loop stopped due to context cancellation"
time="2025-10-04 22:11:59" level=info msg="Event loop stopped"
time="2025-10-04 22:11:59" level=info msg="Device event loop stopped due to context cancellation"
time="2025-10-04 22:11:59" level=info msg="Stopped fsnotify device event source"
time="2025-10-04 22:11:59" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:11:59" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:11:59" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:11:59" level=info msg="Hybrid camera monitor stopped"
    camera_asserters_test.go:147: ✅ Monitor stopped successfully
    camera_edge_cases_test.go:33: ✅ Rapid start/stop cycles validated
=== RUN   TestCameraMonitor_EdgeCases_WithAsserters/device_discovery_edge_cases
time="2025-10-04 22:11:59" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:11:59" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:11:59" level=info msg="Created fresh device event source instance with smart selection"
time="2025-10-04 22:11:59" level=info msg="Starting hybrid camera monitor"
time="2025-10-04 22:11:59" level=info msg="Starting device event source"
time="2025-10-04 22:11:59" level=info msg="Device event source Start() called"
time="2025-10-04 22:11:59" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:11:59" level=info msg="Device event source started successfully"
time="2025-10-04 22:11:59" level=info msg="Running in event-first mode with fsnotify support"
time="2025-10-04 22:11:59" level=info msg="Bounded worker pool started"
time="2025-10-04 22:11:59" level=info msg="Spawning monitor loops"
time="2025-10-04 22:11:59" level=info msg="Monitor start completed successfully"
    progressive_readiness.go:52: ✅ Monitor Start succeeded immediately - Progressive Readiness working
    camera_asserters_test.go:133: ✅ PROGRESSIVE READINESS: Monitor start succeeded immediately
time="2025-10-04 22:11:59" level=info msg="Starting seed discovery"
time="2025-10-04 22:11:59" level=info msg="Error checking device"
time="2025-10-04 22:11:59" level=warning msg="Device check error occurred"
time="2025-10-04 22:11:59" level=info msg="New V4L2 device discovered"
time="2025-10-04 22:11:59" level=info msg="Seed discovery completed"
time="2025-10-04 22:11:59" level=info msg="Monitor is now ready"
time="2025-10-04 22:11:59" level=info msg="Starting event-first camera monitoring"
time="2025-10-04 22:11:59" level=info msg="Camera reconcile loop started"
time="2025-10-04 22:11:59" level=info msg="Device event loop started"
    camera_asserters_test.go:159: ✅ Monitor is ready
    camera_asserters_test.go:194: ✅ Device discovery completed: 1 devices found
=== RUN   TestCameraMonitor_EdgeCases_WithAsserters/device_discovery_edge_cases/non_existent_device
=== NAME  TestCameraMonitor_EdgeCases_WithAsserters/device_discovery_edge_cases
    camera_edge_cases_test.go:52: ✅ Device discovery edge cases validated
time="2025-10-04 22:11:59" level=info msg="Stopping hybrid camera monitor"
time="2025-10-04 22:11:59" level=info msg="Device event loop stopped due to context cancellation"
time="2025-10-04 22:11:59" level=info msg="Camera reconcile loop stopped due to context cancellation"
time="2025-10-04 22:11:59" level=info msg="Event loop stopped"
time="2025-10-04 22:11:59" level=info msg="Stopped fsnotify device event source"
time="2025-10-04 22:11:59" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:11:59" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:11:59" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:11:59" level=info msg="Hybrid camera monitor stopped"
=== RUN   TestCameraMonitor_EdgeCases_WithAsserters/capability_probing_edge_cases
time="2025-10-04 22:11:59" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:11:59" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:11:59" level=info msg="Created fresh device event source instance with smart selection"
=== RUN   TestCameraMonitor_EdgeCases_WithAsserters/capability_probing_edge_cases/invalid_device_capabilities
time="2025-10-04 22:11:59" level=info msg="Starting hybrid camera monitor"
time="2025-10-04 22:11:59" level=info msg="Starting device event source"
time="2025-10-04 22:11:59" level=info msg="Device event source Start() called"
time="2025-10-04 22:11:59" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:11:59" level=info msg="Device event source started successfully"
time="2025-10-04 22:11:59" level=info msg="Running in event-first mode with fsnotify support"
time="2025-10-04 22:11:59" level=info msg="Bounded worker pool started"
time="2025-10-04 22:11:59" level=info msg="Spawning monitor loops"
time="2025-10-04 22:11:59" level=info msg="Monitor start completed successfully"
time="2025-10-04 22:11:59" level=info msg="Starting seed discovery"
=== NAME  TestCameraMonitor_EdgeCases_WithAsserters/capability_probing_edge_cases
    progressive_readiness.go:52: ✅ Monitor Start succeeded immediately - Progressive Readiness working
    camera_asserters_test.go:133: ✅ PROGRESSIVE READINESS: Monitor start succeeded immediately
time="2025-10-04 22:11:59" level=info msg="Error checking device"
time="2025-10-04 22:11:59" level=warning msg="Device check error occurred"
time="2025-10-04 22:11:59" level=info msg="New V4L2 device discovered"
time="2025-10-04 22:11:59" level=info msg="Seed discovery completed"
time="2025-10-04 22:11:59" level=info msg="Monitor is now ready"
time="2025-10-04 22:11:59" level=info msg="Starting event-first camera monitoring"
time="2025-10-04 22:11:59" level=info msg="Camera reconcile loop started"
time="2025-10-04 22:11:59" level=info msg="Device event loop started"
    camera_asserters_test.go:159: ✅ Monitor is ready
    camera_edge_cases_test.go:72: ✅ Capability probing edge cases validated
time="2025-10-04 22:11:59" level=info msg="Stopping hybrid camera monitor"
time="2025-10-04 22:11:59" level=info msg="Device event loop stopped due to context cancellation"
time="2025-10-04 22:11:59" level=info msg="Camera reconcile loop stopped due to context cancellation"
time="2025-10-04 22:11:59" level=info msg="Event loop stopped"
time="2025-10-04 22:11:59" level=info msg="Stopped fsnotify device event source"
time="2025-10-04 22:11:59" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:11:59" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:11:59" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:11:59" level=info msg="Hybrid camera monitor stopped"
=== RUN   TestCameraMonitor_EdgeCases_WithAsserters/error_handling_edge_cases
time="2025-10-04 22:11:59" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:11:59" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:11:59" level=info msg="Created fresh device event source instance with smart selection"
time="2025-10-04 22:11:59" level=info msg="Starting hybrid camera monitor"
time="2025-10-04 22:11:59" level=info msg="Starting device event source"
time="2025-10-04 22:11:59" level=info msg="Device event source Start() called"
time="2025-10-04 22:11:59" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:11:59" level=info msg="Device event source started successfully"
time="2025-10-04 22:11:59" level=info msg="Running in event-first mode with fsnotify support"
time="2025-10-04 22:11:59" level=info msg="Bounded worker pool started"
time="2025-10-04 22:11:59" level=info msg="Spawning monitor loops"
time="2025-10-04 22:11:59" level=info msg="Monitor start completed successfully"
    progressive_readiness.go:52: ✅ Monitor Start succeeded immediately - Progressive Readiness working
    camera_asserters_test.go:133: ✅ PROGRESSIVE READINESS: Monitor start succeeded immediately
time="2025-10-04 22:11:59" level=info msg="Starting seed discovery"
time="2025-10-04 22:11:59" level=info msg="Error checking device"
time="2025-10-04 22:11:59" level=warning msg="Device check error occurred"
time="2025-10-04 22:11:59" level=info msg="New V4L2 device discovered"
time="2025-10-04 22:11:59" level=info msg="Seed discovery completed"
time="2025-10-04 22:11:59" level=info msg="Monitor is now ready"
time="2025-10-04 22:11:59" level=info msg="Starting event-first camera monitoring"
time="2025-10-04 22:11:59" level=info msg="Camera reconcile loop started"
time="2025-10-04 22:11:59" level=info msg="Device event loop started"
    camera_asserters_test.go:159: ✅ Monitor is ready
    camera_asserters_test.go:341: ✅ Invalid device correctly not found: /dev/invalid_device
    camera_edge_cases_test.go:83: ✅ Error handling edge cases validated
time="2025-10-04 22:11:59" level=info msg="Stopping hybrid camera monitor"
time="2025-10-04 22:11:59" level=info msg="Device event loop stopped due to context cancellation"
time="2025-10-04 22:11:59" level=info msg="Camera reconcile loop stopped due to context cancellation"
time="2025-10-04 22:11:59" level=info msg="Event loop stopped"
time="2025-10-04 22:11:59" level=info msg="Stopped fsnotify device event source"
time="2025-10-04 22:11:59" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:11:59" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:11:59" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:11:59" level=info msg="Hybrid camera monitor stopped"
=== RUN   TestCameraMonitor_EdgeCases_WithAsserters/performance_edge_cases
time="2025-10-04 22:11:59" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:11:59" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:11:59" level=info msg="Created fresh device event source instance with smart selection"
time="2025-10-04 22:11:59" level=info msg="Starting hybrid camera monitor"
time="2025-10-04 22:11:59" level=info msg="Starting device event source"
time="2025-10-04 22:11:59" level=info msg="Device event source Start() called"
time="2025-10-04 22:11:59" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:11:59" level=info msg="Device event source started successfully"
time="2025-10-04 22:11:59" level=info msg="Running in event-first mode with fsnotify support"
time="2025-10-04 22:11:59" level=info msg="Bounded worker pool started"
time="2025-10-04 22:11:59" level=info msg="Spawning monitor loops"
time="2025-10-04 22:11:59" level=info msg="Monitor start completed successfully"
    progressive_readiness.go:52: ✅ Monitor Start succeeded immediately - Progressive Readiness working
    camera_asserters_test.go:133: ✅ PROGRESSIVE READINESS: Monitor start succeeded immediately
time="2025-10-04 22:11:59" level=info msg="Starting seed discovery"
time="2025-10-04 22:11:59" level=info msg="Error checking device"
time="2025-10-04 22:11:59" level=warning msg="Device check error occurred"
time="2025-10-04 22:11:59" level=info msg="New V4L2 device discovered"
time="2025-10-04 22:11:59" level=info msg="Seed discovery completed"
time="2025-10-04 22:11:59" level=info msg="Monitor is now ready"
time="2025-10-04 22:11:59" level=info msg="Starting event-first camera monitoring"
time="2025-10-04 22:11:59" level=info msg="Camera reconcile loop started"
time="2025-10-04 22:11:59" level=info msg="Device event loop started"
    camera_asserters_test.go:159: ✅ Monitor is ready
    camera_asserters_test.go:375: ✅ Startup performance validated: 101.364136ms (max: 5s)
time="2025-10-04 22:12:00" level=info msg="Stopping hybrid camera monitor"
time="2025-10-04 22:12:00" level=info msg="Device event loop stopped due to context cancellation"
time="2025-10-04 22:12:00" level=info msg="Camera reconcile loop stopped due to context cancellation"
time="2025-10-04 22:12:00" level=info msg="Event loop stopped"
time="2025-10-04 22:12:00" level=info msg="Stopped fsnotify device event source"
time="2025-10-04 22:12:00" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:12:00" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:12:00" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:12:00" level=info msg="Hybrid camera monitor stopped"
    camera_asserters_test.go:147: ✅ Monitor stopped successfully
    camera_asserters_test.go:388: ✅ Stop performance validated: 350.846µs (max: 2s)
    camera_edge_cases_test.go:97: ✅ Performance edge cases validated
=== RUN   TestCameraMonitor_EdgeCases_WithAsserters/lifecycle_edge_cases
time="2025-10-04 22:12:00" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:00" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:00" level=info msg="Created fresh device event source instance with smart selection"
time="2025-10-04 22:12:00" level=info msg="Starting hybrid camera monitor"
time="2025-10-04 22:12:00" level=info msg="Starting device event source"
time="2025-10-04 22:12:00" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:00" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:12:00" level=info msg="Device event source started successfully"
time="2025-10-04 22:12:00" level=info msg="Running in event-first mode with fsnotify support"
time="2025-10-04 22:12:00" level=info msg="Bounded worker pool started"
time="2025-10-04 22:12:00" level=info msg="Spawning monitor loops"
time="2025-10-04 22:12:00" level=info msg="Monitor start completed successfully"
    progressive_readiness.go:52: ✅ Monitor Start succeeded immediately - Progressive Readiness working
    camera_asserters_test.go:133: ✅ PROGRESSIVE READINESS: Monitor start succeeded immediately
time="2025-10-04 22:12:00" level=info msg="Starting seed discovery"
time="2025-10-04 22:12:00" level=info msg="Error checking device"
time="2025-10-04 22:12:00" level=warning msg="Device check error occurred"
time="2025-10-04 22:12:00" level=info msg="New V4L2 device discovered"
time="2025-10-04 22:12:00" level=info msg="Seed discovery completed"
time="2025-10-04 22:12:00" level=info msg="Monitor is now ready"
time="2025-10-04 22:12:00" level=info msg="Starting event-first camera monitoring"
time="2025-10-04 22:12:00" level=info msg="Camera reconcile loop started"
time="2025-10-04 22:12:00" level=info msg="Device event loop started"
    camera_asserters_test.go:159: ✅ Monitor is ready
time="2025-10-04 22:12:00" level=info msg="Stopping hybrid camera monitor"
time="2025-10-04 22:12:00" level=info msg="Camera reconcile loop stopped due to context cancellation"
time="2025-10-04 22:12:00" level=info msg="Device event loop stopped due to context cancellation"
time="2025-10-04 22:12:00" level=info msg="Event loop stopped"
time="2025-10-04 22:12:00" level=info msg="Stopped fsnotify device event source"
time="2025-10-04 22:12:00" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:12:00" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:12:00" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:12:00" level=info msg="Hybrid camera monitor stopped"
    camera_asserters_test.go:147: ✅ Monitor stopped successfully
    camera_edge_cases_test.go:124: ✅ Lifecycle edge cases validated
--- PASS: TestCameraMonitor_EdgeCases_WithAsserters (1.43s)
    --- PASS: TestCameraMonitor_EdgeCases_WithAsserters/rapid_start_stop_cycles (0.62s)
    --- PASS: TestCameraMonitor_EdgeCases_WithAsserters/device_discovery_edge_cases (0.20s)
        --- PASS: TestCameraMonitor_EdgeCases_WithAsserters/device_discovery_edge_cases/non_existent_device (0.00s)
    --- PASS: TestCameraMonitor_EdgeCases_WithAsserters/capability_probing_edge_cases (0.20s)
        --- PASS: TestCameraMonitor_EdgeCases_WithAsserters/capability_probing_edge_cases/invalid_device_capabilities (0.10s)
    --- PASS: TestCameraMonitor_EdgeCases_WithAsserters/error_handling_edge_cases (0.20s)
    --- PASS: TestCameraMonitor_EdgeCases_WithAsserters/performance_edge_cases (0.10s)
    --- PASS: TestCameraMonitor_EdgeCases_WithAsserters/lifecycle_edge_cases (0.10s)
=== RUN   TestCameraMonitor_EdgeCases_StressTesting
=== RUN   TestCameraMonitor_EdgeCases_StressTesting/concurrent_operations_stress
time="2025-10-04 22:12:00" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:00" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:00" level=info msg="Created fresh device event source instance with smart selection"
time="2025-10-04 22:12:00" level=info msg="Starting hybrid camera monitor"
time="2025-10-04 22:12:00" level=info msg="Starting device event source"
time="2025-10-04 22:12:00" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:00" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:12:00" level=info msg="Device event source started successfully"
time="2025-10-04 22:12:00" level=info msg="Running in event-first mode with fsnotify support"
time="2025-10-04 22:12:00" level=info msg="Bounded worker pool started"
time="2025-10-04 22:12:00" level=info msg="Spawning monitor loops"
time="2025-10-04 22:12:00" level=info msg="Monitor start completed successfully"
    progressive_readiness.go:52: ✅ Monitor Start succeeded immediately - Progressive Readiness working
    camera_asserters_test.go:133: ✅ PROGRESSIVE READINESS: Monitor start succeeded immediately
time="2025-10-04 22:12:00" level=info msg="Starting seed discovery"
time="2025-10-04 22:12:00" level=info msg="Error checking device"
time="2025-10-04 22:12:00" level=warning msg="Device check error occurred"
time="2025-10-04 22:12:00" level=info msg="New V4L2 device discovered"
time="2025-10-04 22:12:00" level=info msg="Seed discovery completed"
time="2025-10-04 22:12:00" level=info msg="Monitor is now ready"
time="2025-10-04 22:12:00" level=info msg="Starting event-first camera monitoring"
time="2025-10-04 22:12:00" level=info msg="Camera reconcile loop started"
time="2025-10-04 22:12:00" level=info msg="Device event loop started"
    camera_asserters_test.go:159: ✅ Monitor is ready
    camera_edge_cases_test.go:197: ✅ Concurrent operations stress test validated
time="2025-10-04 22:12:00" level=info msg="Stopping hybrid camera monitor"
time="2025-10-04 22:12:00" level=info msg="Event loop stopped"
time="2025-10-04 22:12:00" level=info msg="Device event loop stopped due to context cancellation"
time="2025-10-04 22:12:00" level=info msg="Camera reconcile loop stopped due to context cancellation"
time="2025-10-04 22:12:00" level=info msg="Stopped fsnotify device event source"
time="2025-10-04 22:12:00" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:12:00" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:12:00" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:12:00" level=info msg="Hybrid camera monitor stopped"
=== RUN   TestCameraMonitor_EdgeCases_StressTesting/resource_exhaustion_stress
time="2025-10-04 22:12:00" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:00" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:00" level=info msg="Created fresh device event source instance with smart selection"
time="2025-10-04 22:12:00" level=info msg="Starting hybrid camera monitor"
time="2025-10-04 22:12:00" level=info msg="Starting device event source"
time="2025-10-04 22:12:00" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:00" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:12:00" level=info msg="Device event source started successfully"
time="2025-10-04 22:12:00" level=info msg="Running in event-first mode with fsnotify support"
time="2025-10-04 22:12:00" level=info msg="Bounded worker pool started"
time="2025-10-04 22:12:00" level=info msg="Spawning monitor loops"
time="2025-10-04 22:12:00" level=info msg="Monitor start completed successfully"
    progressive_readiness.go:52: ✅ Monitor Start succeeded immediately - Progressive Readiness working
time="2025-10-04 22:12:00" level=info msg="Starting seed discovery"
    camera_asserters_test.go:133: ✅ PROGRESSIVE READINESS: Monitor start succeeded immediately
time="2025-10-04 22:12:00" level=info msg="Error checking device"
time="2025-10-04 22:12:00" level=warning msg="Device check error occurred"
time="2025-10-04 22:12:00" level=info msg="New V4L2 device discovered"
time="2025-10-04 22:12:00" level=info msg="Seed discovery completed"
time="2025-10-04 22:12:00" level=info msg="Monitor is now ready"
time="2025-10-04 22:12:00" level=info msg="Starting event-first camera monitoring"
time="2025-10-04 22:12:00" level=info msg="Camera reconcile loop started"
time="2025-10-04 22:12:00" level=info msg="Device event loop started"
    camera_asserters_test.go:159: ✅ Monitor is ready
    camera_edge_cases_test.go:220: ✅ Resource exhaustion stress test validated
time="2025-10-04 22:12:00" level=info msg="Stopping hybrid camera monitor"
time="2025-10-04 22:12:00" level=info msg="Device event loop stopped due to context cancellation"
time="2025-10-04 22:12:00" level=info msg="Camera reconcile loop stopped due to context cancellation"
time="2025-10-04 22:12:00" level=info msg="Event loop stopped"
time="2025-10-04 22:12:00" level=info msg="Stopped fsnotify device event source"
time="2025-10-04 22:12:00" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:12:00" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:12:00" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:12:00" level=info msg="Hybrid camera monitor stopped"
=== RUN   TestCameraMonitor_EdgeCases_StressTesting/memory_usage_stress
time="2025-10-04 22:12:00" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:00" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:00" level=info msg="Created fresh device event source instance with smart selection"
time="2025-10-04 22:12:00" level=info msg="Starting hybrid camera monitor"
time="2025-10-04 22:12:00" level=info msg="Starting device event source"
time="2025-10-04 22:12:00" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:00" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:12:00" level=info msg="Device event source started successfully"
time="2025-10-04 22:12:00" level=info msg="Running in event-first mode with fsnotify support"
time="2025-10-04 22:12:00" level=info msg="Bounded worker pool started"
time="2025-10-04 22:12:00" level=info msg="Spawning monitor loops"
time="2025-10-04 22:12:00" level=info msg="Monitor start completed successfully"
    progressive_readiness.go:52: ✅ Monitor Start succeeded immediately - Progressive Readiness working
    camera_asserters_test.go:133: ✅ PROGRESSIVE READINESS: Monitor start succeeded immediately
time="2025-10-04 22:12:00" level=info msg="Starting seed discovery"
time="2025-10-04 22:12:00" level=info msg="Error checking device"
time="2025-10-04 22:12:00" level=warning msg="Device check error occurred"
time="2025-10-04 22:12:00" level=info msg="New V4L2 device discovered"
time="2025-10-04 22:12:00" level=info msg="Seed discovery completed"
time="2025-10-04 22:12:00" level=info msg="Monitor is now ready"
time="2025-10-04 22:12:00" level=info msg="Starting event-first camera monitoring"
time="2025-10-04 22:12:00" level=info msg="Camera reconcile loop started"
time="2025-10-04 22:12:00" level=info msg="Device event loop started"
    camera_asserters_test.go:159: ✅ Monitor is ready
    camera_edge_cases_test.go:247: ✅ Memory usage stress test validated
time="2025-10-04 22:12:00" level=info msg="Stopping hybrid camera monitor"
time="2025-10-04 22:12:00" level=info msg="Camera reconcile loop stopped due to context cancellation"
time="2025-10-04 22:12:00" level=info msg="Event loop stopped"
time="2025-10-04 22:12:00" level=info msg="Device event loop stopped due to context cancellation"
time="2025-10-04 22:12:00" level=info msg="Stopped fsnotify device event source"
time="2025-10-04 22:12:00" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:12:00" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:12:00" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:12:00" level=info msg="Hybrid camera monitor stopped"
--- PASS: TestCameraMonitor_EdgeCases_StressTesting (0.74s)
    --- PASS: TestCameraMonitor_EdgeCases_StressTesting/concurrent_operations_stress (0.22s)
    --- PASS: TestCameraMonitor_EdgeCases_StressTesting/resource_exhaustion_stress (0.20s)
    --- PASS: TestCameraMonitor_EdgeCases_StressTesting/memory_usage_stress (0.32s)
=== RUN   TestCameraMonitor_EdgeCases_BoundaryConditions
=== RUN   TestCameraMonitor_EdgeCases_BoundaryConditions/zero_negative_values
time="2025-10-04 22:12:00" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:00" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:00" level=info msg="Created fresh device event source instance with smart selection"
time="2025-10-04 22:12:00" level=info msg="Starting hybrid camera monitor"
time="2025-10-04 22:12:00" level=info msg="Starting device event source"
time="2025-10-04 22:12:00" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:00" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:12:00" level=info msg="Device event source started successfully"
time="2025-10-04 22:12:00" level=info msg="Running in event-first mode with fsnotify support"
time="2025-10-04 22:12:00" level=info msg="Bounded worker pool started"
time="2025-10-04 22:12:00" level=info msg="Spawning monitor loops"
time="2025-10-04 22:12:00" level=info msg="Monitor start completed successfully"
    progressive_readiness.go:52: ✅ Monitor Start succeeded immediately - Progressive Readiness working
    camera_asserters_test.go:133: ✅ PROGRESSIVE READINESS: Monitor start succeeded immediately
time="2025-10-04 22:12:00" level=info msg="Starting seed discovery"
time="2025-10-04 22:12:00" level=info msg="Error checking device"
time="2025-10-04 22:12:00" level=warning msg="Device check error occurred"
time="2025-10-04 22:12:00" level=info msg="New V4L2 device discovered"
time="2025-10-04 22:12:00" level=info msg="Seed discovery completed"
time="2025-10-04 22:12:00" level=info msg="Monitor is now ready"
time="2025-10-04 22:12:00" level=info msg="Starting event-first camera monitoring"
time="2025-10-04 22:12:00" level=info msg="Camera reconcile loop started"
time="2025-10-04 22:12:00" level=info msg="Device event loop started"
    camera_asserters_test.go:159: ✅ Monitor is ready
=== RUN   TestCameraMonitor_EdgeCases_BoundaryConditions/zero_negative_values/zero_dimensions
    camera_edge_cases_test.go:283: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/camera/camera_edge_cases_test.go:283
        	Error:      	"--stream-mmap --stream-to /tmp/test1.jpg --stream-count 1" does not contain "/dev/video0"
        	Test:       	TestCameraMonitor_EdgeCases_BoundaryConditions/zero_negative_values/zero_dimensions
        	Messages:   	Args should contain device path
=== RUN   TestCameraMonitor_EdgeCases_BoundaryConditions/zero_negative_values/negative_dimensions
    camera_edge_cases_test.go:283: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/camera/camera_edge_cases_test.go:283
        	Error:      	"--stream-mmap --stream-to /tmp/test2.jpg --stream-count 1" does not contain "/dev/video0"
        	Test:       	TestCameraMonitor_EdgeCases_BoundaryConditions/zero_negative_values/negative_dimensions
        	Messages:   	Args should contain device path
=== RUN   TestCameraMonitor_EdgeCases_BoundaryConditions/zero_negative_values/very_large_dimensions
    camera_edge_cases_test.go:283: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/camera/camera_edge_cases_test.go:283
        	Error:      	"--stream-mmap --stream-to /tmp/test3.jpg --stream-count 1 --set-fmt-video width=10000,height=10000" does not contain "/dev/video0"
        	Test:       	TestCameraMonitor_EdgeCases_BoundaryConditions/zero_negative_values/very_large_dimensions
        	Messages:   	Args should contain device path
=== RUN   TestCameraMonitor_EdgeCases_BoundaryConditions/zero_negative_values/empty_format
    camera_edge_cases_test.go:283: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/camera/camera_edge_cases_test.go:283
        	Error:      	"--stream-mmap --stream-to /tmp/test4.jpg --stream-count 1 --set-fmt-video width=640,height=480" does not contain "/dev/video0"
        	Test:       	TestCameraMonitor_EdgeCases_BoundaryConditions/zero_negative_values/empty_format
        	Messages:   	Args should contain device path
=== RUN   TestCameraMonitor_EdgeCases_BoundaryConditions/zero_negative_values/empty_output
    camera_edge_cases_test.go:283: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/camera/camera_edge_cases_test.go:283
        	Error:      	"--stream-mmap --stream-to  --stream-count 1 --set-fmt-video width=640,height=480" does not contain "/dev/video0"
        	Test:       	TestCameraMonitor_EdgeCases_BoundaryConditions/zero_negative_values/empty_output
        	Messages:   	Args should contain device path
=== RUN   TestCameraMonitor_EdgeCases_BoundaryConditions/zero_negative_values/empty_device
=== NAME  TestCameraMonitor_EdgeCases_BoundaryConditions/zero_negative_values
    camera_edge_cases_test.go:288: ✅ Zero and negative values boundary conditions validated
time="2025-10-04 22:12:00" level=info msg="Stopping hybrid camera monitor"
time="2025-10-04 22:12:00" level=info msg="Event loop stopped"
time="2025-10-04 22:12:00" level=info msg="Device event loop stopped due to context cancellation"
time="2025-10-04 22:12:00" level=info msg="Camera reconcile loop stopped due to context cancellation"
time="2025-10-04 22:12:01" level=info msg="Stopped fsnotify device event source"
time="2025-10-04 22:12:01" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:12:01" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:12:01" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:12:01" level=info msg="Hybrid camera monitor stopped"
=== RUN   TestCameraMonitor_EdgeCases_BoundaryConditions/empty_null_values
time="2025-10-04 22:12:01" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:01" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:01" level=info msg="Created fresh device event source instance with smart selection"
time="2025-10-04 22:12:01" level=info msg="Starting hybrid camera monitor"
time="2025-10-04 22:12:01" level=info msg="Starting device event source"
time="2025-10-04 22:12:01" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:01" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:12:01" level=info msg="Device event source started successfully"
time="2025-10-04 22:12:01" level=info msg="Running in event-first mode with fsnotify support"
time="2025-10-04 22:12:01" level=info msg="Bounded worker pool started"
time="2025-10-04 22:12:01" level=info msg="Spawning monitor loops"
time="2025-10-04 22:12:01" level=info msg="Monitor start completed successfully"
    progressive_readiness.go:52: ✅ Monitor Start succeeded immediately - Progressive Readiness working
    camera_asserters_test.go:133: ✅ PROGRESSIVE READINESS: Monitor start succeeded immediately
time="2025-10-04 22:12:01" level=info msg="Starting seed discovery"
time="2025-10-04 22:12:01" level=info msg="Error checking device"
time="2025-10-04 22:12:01" level=warning msg="Device check error occurred"
time="2025-10-04 22:12:01" level=info msg="New V4L2 device discovered"
time="2025-10-04 22:12:01" level=info msg="Seed discovery completed"
time="2025-10-04 22:12:01" level=info msg="Monitor is now ready"
time="2025-10-04 22:12:01" level=info msg="Starting event-first camera monitoring"
time="2025-10-04 22:12:01" level=info msg="Camera reconcile loop started"
time="2025-10-04 22:12:01" level=info msg="Device event loop started"
    camera_asserters_test.go:159: ✅ Monitor is ready
    camera_edge_cases_test.go:312: ✅ Empty and null values boundary conditions validated
time="2025-10-04 22:12:01" level=info msg="Stopping hybrid camera monitor"
time="2025-10-04 22:12:01" level=info msg="Device event loop stopped due to context cancellation"
time="2025-10-04 22:12:01" level=info msg="Camera reconcile loop stopped due to context cancellation"
time="2025-10-04 22:12:01" level=info msg="Event loop stopped"
time="2025-10-04 22:12:01" level=info msg="Stopped fsnotify device event source"
time="2025-10-04 22:12:01" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:12:01" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:12:01" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:12:01" level=info msg="Hybrid camera monitor stopped"
=== RUN   TestCameraMonitor_EdgeCases_BoundaryConditions/very_long_strings
time="2025-10-04 22:12:01" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:01" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:01" level=info msg="Created fresh device event source instance with smart selection"
time="2025-10-04 22:12:01" level=info msg="Starting hybrid camera monitor"
time="2025-10-04 22:12:01" level=info msg="Starting device event source"
time="2025-10-04 22:12:01" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:01" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:12:01" level=info msg="Device event source started successfully"
time="2025-10-04 22:12:01" level=info msg="Running in event-first mode with fsnotify support"
time="2025-10-04 22:12:01" level=info msg="Bounded worker pool started"
time="2025-10-04 22:12:01" level=info msg="Spawning monitor loops"
time="2025-10-04 22:12:01" level=info msg="Monitor start completed successfully"
    progressive_readiness.go:52: ✅ Monitor Start succeeded immediately - Progressive Readiness working
time="2025-10-04 22:12:01" level=info msg="Starting seed discovery"
    camera_asserters_test.go:133: ✅ PROGRESSIVE READINESS: Monitor start succeeded immediately
time="2025-10-04 22:12:01" level=info msg="Error checking device"
time="2025-10-04 22:12:01" level=warning msg="Device check error occurred"
time="2025-10-04 22:12:01" level=info msg="New V4L2 device discovered"
time="2025-10-04 22:12:01" level=info msg="Seed discovery completed"
time="2025-10-04 22:12:01" level=info msg="Monitor is now ready"
time="2025-10-04 22:12:01" level=info msg="Starting event-first camera monitoring"
time="2025-10-04 22:12:01" level=info msg="Camera reconcile loop started"
time="2025-10-04 22:12:01" level=info msg="Device event loop started"
    camera_asserters_test.go:159: ✅ Monitor is ready
    camera_edge_cases_test.go:336: ✅ Very long strings boundary conditions validated
time="2025-10-04 22:12:01" level=info msg="Stopping hybrid camera monitor"
time="2025-10-04 22:12:01" level=info msg="Camera reconcile loop stopped due to context cancellation"
time="2025-10-04 22:12:01" level=info msg="Event loop stopped"
time="2025-10-04 22:12:01" level=info msg="Device event loop stopped due to context cancellation"
time="2025-10-04 22:12:01" level=info msg="Stopped fsnotify device event source"
time="2025-10-04 22:12:01" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:12:01" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:12:01" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:12:01" level=info msg="Hybrid camera monitor stopped"
=== RUN   TestCameraMonitor_EdgeCases_BoundaryConditions/special_characters
time="2025-10-04 22:12:01" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:01" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:01" level=info msg="Created fresh device event source instance with smart selection"
time="2025-10-04 22:12:01" level=info msg="Starting hybrid camera monitor"
time="2025-10-04 22:12:01" level=info msg="Starting device event source"
time="2025-10-04 22:12:01" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:01" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:12:01" level=info msg="Device event source started successfully"
time="2025-10-04 22:12:01" level=info msg="Running in event-first mode with fsnotify support"
time="2025-10-04 22:12:01" level=info msg="Bounded worker pool started"
time="2025-10-04 22:12:01" level=info msg="Spawning monitor loops"
time="2025-10-04 22:12:01" level=info msg="Monitor start completed successfully"
    progressive_readiness.go:52: ✅ Monitor Start succeeded immediately - Progressive Readiness working
    camera_asserters_test.go:133: ✅ PROGRESSIVE READINESS: Monitor start succeeded immediately
time="2025-10-04 22:12:01" level=info msg="Starting seed discovery"
time="2025-10-04 22:12:01" level=info msg="Error checking device"
time="2025-10-04 22:12:01" level=warning msg="Device check error occurred"
time="2025-10-04 22:12:01" level=info msg="New V4L2 device discovered"
time="2025-10-04 22:12:01" level=info msg="Seed discovery completed"
time="2025-10-04 22:12:01" level=info msg="Monitor is now ready"
time="2025-10-04 22:12:01" level=info msg="Starting event-first camera monitoring"
time="2025-10-04 22:12:01" level=info msg="Camera reconcile loop started"
time="2025-10-04 22:12:01" level=info msg="Device event loop started"
    camera_asserters_test.go:159: ✅ Monitor is ready
    camera_edge_cases_test.go:359: ✅ Special characters boundary conditions validated
time="2025-10-04 22:12:01" level=info msg="Stopping hybrid camera monitor"
time="2025-10-04 22:12:01" level=info msg="Device event loop stopped due to context cancellation"
time="2025-10-04 22:12:01" level=info msg="Camera reconcile loop stopped due to context cancellation"
time="2025-10-04 22:12:01" level=info msg="Event loop stopped"
time="2025-10-04 22:12:01" level=info msg="Stopped fsnotify device event source"
time="2025-10-04 22:12:01" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:12:01" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:12:01" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:12:01" level=info msg="Hybrid camera monitor stopped"
--- FAIL: TestCameraMonitor_EdgeCases_BoundaryConditions (0.81s)
    --- FAIL: TestCameraMonitor_EdgeCases_BoundaryConditions/zero_negative_values (0.20s)
        --- FAIL: TestCameraMonitor_EdgeCases_BoundaryConditions/zero_negative_values/zero_dimensions (0.00s)
        --- FAIL: TestCameraMonitor_EdgeCases_BoundaryConditions/zero_negative_values/negative_dimensions (0.00s)
        --- FAIL: TestCameraMonitor_EdgeCases_BoundaryConditions/zero_negative_values/very_large_dimensions (0.00s)
        --- FAIL: TestCameraMonitor_EdgeCases_BoundaryConditions/zero_negative_values/empty_format (0.00s)
        --- FAIL: TestCameraMonitor_EdgeCases_BoundaryConditions/zero_negative_values/empty_output (0.00s)
        --- PASS: TestCameraMonitor_EdgeCases_BoundaryConditions/zero_negative_values/empty_device (0.00s)
    --- PASS: TestCameraMonitor_EdgeCases_BoundaryConditions/empty_null_values (0.20s)
    --- PASS: TestCameraMonitor_EdgeCases_BoundaryConditions/very_long_strings (0.20s)
    --- PASS: TestCameraMonitor_EdgeCases_BoundaryConditions/special_characters (0.20s)
=== RUN   TestCameraMonitor_EdgeCases_ConfigurationChanges
=== RUN   TestCameraMonitor_EdgeCases_ConfigurationChanges/configuration_changes_during_operation
time="2025-10-04 22:12:01" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:01" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:01" level=info msg="Created fresh device event source instance with smart selection"
time="2025-10-04 22:12:01" level=info msg="Starting hybrid camera monitor"
time="2025-10-04 22:12:01" level=info msg="Starting device event source"
time="2025-10-04 22:12:01" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:01" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:12:01" level=info msg="Device event source started successfully"
time="2025-10-04 22:12:01" level=info msg="Running in event-first mode with fsnotify support"
time="2025-10-04 22:12:01" level=info msg="Bounded worker pool started"
time="2025-10-04 22:12:01" level=info msg="Spawning monitor loops"
time="2025-10-04 22:12:01" level=info msg="Monitor start completed successfully"
    progressive_readiness.go:52: ✅ Monitor Start succeeded immediately - Progressive Readiness working
    camera_asserters_test.go:133: ✅ PROGRESSIVE READINESS: Monitor start succeeded immediately
time="2025-10-04 22:12:01" level=info msg="Starting seed discovery"
time="2025-10-04 22:12:01" level=info msg="Error checking device"
time="2025-10-04 22:12:01" level=warning msg="Device check error occurred"
time="2025-10-04 22:12:01" level=info msg="New V4L2 device discovered"
time="2025-10-04 22:12:01" level=info msg="Seed discovery completed"
time="2025-10-04 22:12:01" level=info msg="Monitor is now ready"
time="2025-10-04 22:12:01" level=info msg="Starting event-first camera monitoring"
time="2025-10-04 22:12:01" level=info msg="Camera reconcile loop started"
time="2025-10-04 22:12:01" level=info msg="Device event loop started"
    camera_asserters_test.go:159: ✅ Monitor is ready
    camera_edge_cases_test.go:397: ✅ Configuration changes during operation validated
time="2025-10-04 22:12:01" level=info msg="Stopping hybrid camera monitor"
time="2025-10-04 22:12:01" level=info msg="Device event loop stopped due to context cancellation"
time="2025-10-04 22:12:01" level=info msg="Camera reconcile loop stopped due to context cancellation"
time="2025-10-04 22:12:01" level=info msg="Event loop stopped"
time="2025-10-04 22:12:01" level=info msg="Stopped fsnotify device event source"
time="2025-10-04 22:12:01" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:12:01" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:12:01" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:12:01" level=info msg="Hybrid camera monitor stopped"
=== RUN   TestCameraMonitor_EdgeCases_ConfigurationChanges/multiple_configuration_changes
time="2025-10-04 22:12:01" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:01" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:01" level=info msg="Created fresh device event source instance with smart selection"
time="2025-10-04 22:12:01" level=info msg="Starting hybrid camera monitor"
time="2025-10-04 22:12:01" level=info msg="Starting device event source"
time="2025-10-04 22:12:01" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:01" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:12:01" level=info msg="Device event source started successfully"
time="2025-10-04 22:12:01" level=info msg="Running in event-first mode with fsnotify support"
time="2025-10-04 22:12:01" level=info msg="Bounded worker pool started"
time="2025-10-04 22:12:01" level=info msg="Spawning monitor loops"
time="2025-10-04 22:12:01" level=info msg="Monitor start completed successfully"
    progressive_readiness.go:52: ✅ Monitor Start succeeded immediately - Progressive Readiness working
    camera_asserters_test.go:133: ✅ PROGRESSIVE READINESS: Monitor start succeeded immediately
time="2025-10-04 22:12:01" level=info msg="Starting seed discovery"
time="2025-10-04 22:12:01" level=info msg="Error checking device"
time="2025-10-04 22:12:01" level=warning msg="Device check error occurred"
time="2025-10-04 22:12:01" level=info msg="New V4L2 device discovered"
time="2025-10-04 22:12:01" level=info msg="Seed discovery completed"
time="2025-10-04 22:12:01" level=info msg="Monitor is now ready"
time="2025-10-04 22:12:01" level=info msg="Starting event-first camera monitoring"
time="2025-10-04 22:12:01" level=info msg="Camera reconcile loop started"
time="2025-10-04 22:12:01" level=info msg="Device event loop started"
    camera_asserters_test.go:159: ✅ Monitor is ready
    camera_edge_cases_test.go:418: ✅ Multiple configuration changes validated
time="2025-10-04 22:12:02" level=info msg="Stopping hybrid camera monitor"
time="2025-10-04 22:12:02" level=info msg="Device event loop stopped due to context cancellation"
time="2025-10-04 22:12:02" level=info msg="Event loop stopped"
time="2025-10-04 22:12:02" level=info msg="Camera reconcile loop stopped due to context cancellation"
time="2025-10-04 22:12:02" level=info msg="Stopped fsnotify device event source"
time="2025-10-04 22:12:02" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:12:02" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:12:02" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:12:02" level=info msg="Hybrid camera monitor stopped"
--- PASS: TestCameraMonitor_EdgeCases_ConfigurationChanges (0.41s)
    --- PASS: TestCameraMonitor_EdgeCases_ConfigurationChanges/configuration_changes_during_operation (0.20s)
    --- PASS: TestCameraMonitor_EdgeCases_ConfigurationChanges/multiple_configuration_changes (0.20s)
=== RUN   TestCameraMonitor_EdgeCases_ErrorRecovery
=== RUN   TestCameraMonitor_EdgeCases_ErrorRecovery/error_recovery_scenarios
time="2025-10-04 22:12:02" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:02" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:02" level=info msg="Created fresh device event source instance with smart selection"
time="2025-10-04 22:12:02" level=info msg="Stopping hybrid camera monitor"
time="2025-10-04 22:12:02" level=info msg="Starting hybrid camera monitor"
time="2025-10-04 22:12:02" level=info msg="Starting device event source"
time="2025-10-04 22:12:02" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:02" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:12:02" level=info msg="Device event source started successfully"
time="2025-10-04 22:12:02" level=info msg="Running in event-first mode with fsnotify support"
time="2025-10-04 22:12:02" level=info msg="Bounded worker pool started"
time="2025-10-04 22:12:02" level=info msg="Spawning monitor loops"
time="2025-10-04 22:12:02" level=info msg="Monitor start completed successfully"
    progressive_readiness.go:52: ✅ Monitor Start succeeded immediately - Progressive Readiness working
    camera_asserters_test.go:133: ✅ PROGRESSIVE READINESS: Monitor start succeeded immediately
time="2025-10-04 22:12:02" level=info msg="Starting seed discovery"
time="2025-10-04 22:12:02" level=info msg="Error checking device"
time="2025-10-04 22:12:02" level=warning msg="Device check error occurred"
time="2025-10-04 22:12:02" level=info msg="New V4L2 device discovered"
time="2025-10-04 22:12:02" level=info msg="Seed discovery completed"
time="2025-10-04 22:12:02" level=info msg="Monitor is now ready"
time="2025-10-04 22:12:02" level=info msg="Starting event-first camera monitoring"
time="2025-10-04 22:12:02" level=info msg="Camera reconcile loop started"
time="2025-10-04 22:12:02" level=info msg="Device event loop started"
    camera_asserters_test.go:159: ✅ Monitor is ready
time="2025-10-04 22:12:02" level=error msg="monitor_start_return_err - monitor is already running"
    camera_edge_cases_test.go:447: ✅ Error recovery scenarios validated
time="2025-10-04 22:12:02" level=info msg="Stopping hybrid camera monitor"
time="2025-10-04 22:12:02" level=info msg="Camera reconcile loop stopped due to context cancellation"
time="2025-10-04 22:12:02" level=info msg="Device event loop stopped due to context cancellation"
time="2025-10-04 22:12:02" level=info msg="Event loop stopped"
time="2025-10-04 22:12:02" level=info msg="Stopped fsnotify device event source"
time="2025-10-04 22:12:02" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:12:02" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:12:02" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:12:02" level=info msg="Hybrid camera monitor stopped"
=== RUN   TestCameraMonitor_EdgeCases_ErrorRecovery/graceful_degradation
time="2025-10-04 22:12:02" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:02" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:02" level=info msg="Created fresh device event source instance with smart selection"
time="2025-10-04 22:12:02" level=info msg="Starting hybrid camera monitor"
time="2025-10-04 22:12:02" level=info msg="Starting device event source"
time="2025-10-04 22:12:02" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:02" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:12:02" level=info msg="Device event source started successfully"
time="2025-10-04 22:12:02" level=info msg="Running in event-first mode with fsnotify support"
time="2025-10-04 22:12:02" level=info msg="Bounded worker pool started"
time="2025-10-04 22:12:02" level=info msg="Spawning monitor loops"
time="2025-10-04 22:12:02" level=info msg="Monitor start completed successfully"
    progressive_readiness.go:52: ✅ Monitor Start succeeded immediately - Progressive Readiness working
    camera_asserters_test.go:133: ✅ PROGRESSIVE READINESS: Monitor start succeeded immediately
time="2025-10-04 22:12:02" level=info msg="Starting seed discovery"
time="2025-10-04 22:12:02" level=info msg="Error checking device"
time="2025-10-04 22:12:02" level=warning msg="Device check error occurred"
time="2025-10-04 22:12:02" level=info msg="New V4L2 device discovered"
time="2025-10-04 22:12:02" level=info msg="Seed discovery completed"
time="2025-10-04 22:12:02" level=info msg="Monitor is now ready"
time="2025-10-04 22:12:02" level=info msg="Starting event-first camera monitoring"
time="2025-10-04 22:12:02" level=info msg="Device event loop started"
time="2025-10-04 22:12:02" level=info msg="Camera reconcile loop started"
    camera_asserters_test.go:159: ✅ Monitor is ready
    camera_edge_cases_test.go:474: ✅ Graceful degradation validated
time="2025-10-04 22:12:02" level=info msg="Stopping hybrid camera monitor"
time="2025-10-04 22:12:02" level=info msg="Camera reconcile loop stopped due to context cancellation"
time="2025-10-04 22:12:02" level=info msg="Event loop stopped"
time="2025-10-04 22:12:02" level=info msg="Device event loop stopped due to context cancellation"
time="2025-10-04 22:12:02" level=info msg="Stopped fsnotify device event source"
time="2025-10-04 22:12:02" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:12:02" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:12:02" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:12:02" level=info msg="Hybrid camera monitor stopped"
--- PASS: TestCameraMonitor_EdgeCases_ErrorRecovery (0.40s)
    --- PASS: TestCameraMonitor_EdgeCases_ErrorRecovery/error_recovery_scenarios (0.20s)
    --- PASS: TestCameraMonitor_EdgeCases_ErrorRecovery/graceful_degradation (0.20s)
=== RUN   TestCameraMonitor_ErrorHandling_Comprehensive
time="2025-10-04 22:12:02" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:02" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:02" level=info msg="Created fresh device event source instance with smart selection"
=== RUN   TestCameraMonitor_ErrorHandling_Comprehensive/invalid_configuration_handling
time="2025-10-04 22:12:02" level=info msg="Starting hybrid camera monitor"
time="2025-10-04 22:12:02" level=info msg="Starting device event source"
time="2025-10-04 22:12:02" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:02" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:12:02" level=info msg="Device event source started successfully"
time="2025-10-04 22:12:02" level=info msg="Running in event-first mode with fsnotify support"
time="2025-10-04 22:12:02" level=info msg="Bounded worker pool started"
time="2025-10-04 22:12:02" level=info msg="Spawning monitor loops"
time="2025-10-04 22:12:02" level=info msg="Monitor start completed successfully"
=== NAME  TestCameraMonitor_ErrorHandling_Comprehensive
    progressive_readiness.go:52: ✅ Monitor Start succeeded immediately - Progressive Readiness working
    camera_asserters_test.go:133: ✅ PROGRESSIVE READINESS: Monitor start succeeded immediately
time="2025-10-04 22:12:02" level=info msg="Starting seed discovery"
time="2025-10-04 22:12:02" level=info msg="Error checking device"
time="2025-10-04 22:12:02" level=warning msg="Device check error occurred"
time="2025-10-04 22:12:02" level=info msg="New V4L2 device discovered"
time="2025-10-04 22:12:02" level=info msg="Seed discovery completed"
time="2025-10-04 22:12:02" level=info msg="Monitor is now ready"
time="2025-10-04 22:12:02" level=info msg="Starting event-first camera monitoring"
time="2025-10-04 22:12:02" level=info msg="Camera reconcile loop started"
time="2025-10-04 22:12:02" level=info msg="Device event loop started"
    camera_asserters_test.go:159: ✅ Monitor is ready
    camera_error_handling_test.go:35: ✅ Invalid configuration handling validated
=== RUN   TestCameraMonitor_ErrorHandling_Comprehensive/resource_exhaustion_scenarios
=== NAME  TestCameraMonitor_ErrorHandling_Comprehensive
    camera_error_handling_test.go:42: ✅ Monitor already running - resource exhaustion scenarios handled gracefully
=== RUN   TestCameraMonitor_ErrorHandling_Comprehensive/context_cancellation_handling
=== NAME  TestCameraMonitor_ErrorHandling_Comprehensive
    camera_error_handling_test.go:68: ✅ Monitor already running - context cancellation handling validated
=== RUN   TestCameraMonitor_ErrorHandling_Comprehensive/event_notifier_error_handling
=== NAME  TestCameraMonitor_ErrorHandling_Comprehensive
    camera_error_handling_test.go:89: ✅ Monitor already running - event notifier error handling validated
=== RUN   TestCameraMonitor_ErrorHandling_Comprehensive/multiple_rapid_notifier_changes
=== NAME  TestCameraMonitor_ErrorHandling_Comprehensive
    camera_error_handling_test.go:118: ✅ Monitor already running - multiple rapid notifier changes validated
=== RUN   TestCameraMonitor_ErrorHandling_Comprehensive/error_recovery_after_invalid_operations
=== NAME  TestCameraMonitor_ErrorHandling_Comprehensive
    camera_error_handling_test.go:142: ✅ Monitor already running - error recovery after invalid operations validated
time="2025-10-04 22:12:02" level=info msg="Stopping hybrid camera monitor"
time="2025-10-04 22:12:02" level=info msg="Device event loop stopped due to context cancellation"
time="2025-10-04 22:12:02" level=info msg="Event loop stopped"
time="2025-10-04 22:12:02" level=info msg="Camera reconcile loop stopped due to context cancellation"
time="2025-10-04 22:12:02" level=info msg="Stopped fsnotify device event source"
time="2025-10-04 22:12:02" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:12:02" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:12:02" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:12:02" level=info msg="Hybrid camera monitor stopped"
--- PASS: TestCameraMonitor_ErrorHandling_Comprehensive (0.20s)
    --- PASS: TestCameraMonitor_ErrorHandling_Comprehensive/invalid_configuration_handling (0.10s)
    --- PASS: TestCameraMonitor_ErrorHandling_Comprehensive/resource_exhaustion_scenarios (0.00s)
    --- PASS: TestCameraMonitor_ErrorHandling_Comprehensive/context_cancellation_handling (0.00s)
    --- PASS: TestCameraMonitor_ErrorHandling_Comprehensive/event_notifier_error_handling (0.00s)
    --- PASS: TestCameraMonitor_ErrorHandling_Comprehensive/multiple_rapid_notifier_changes (0.00s)
    --- PASS: TestCameraMonitor_ErrorHandling_Comprehensive/error_recovery_after_invalid_operations (0.00s)
=== RUN   TestCameraMonitor_EdgeCases_Comprehensive
time="2025-10-04 22:12:02" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:02" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:02" level=info msg="Created fresh device event source instance with smart selection"
=== RUN   TestCameraMonitor_EdgeCases_Comprehensive/rapid_start_stop_cycles
time="2025-10-04 22:12:02" level=info msg="Starting hybrid camera monitor"
time="2025-10-04 22:12:02" level=info msg="Starting device event source"
time="2025-10-04 22:12:02" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:02" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:12:02" level=info msg="Device event source started successfully"
time="2025-10-04 22:12:02" level=info msg="Running in event-first mode with fsnotify support"
time="2025-10-04 22:12:02" level=info msg="Bounded worker pool started"
time="2025-10-04 22:12:02" level=info msg="Spawning monitor loops"
time="2025-10-04 22:12:02" level=info msg="Monitor start completed successfully"
=== NAME  TestCameraMonitor_EdgeCases_Comprehensive
    progressive_readiness.go:52: ✅ Monitor Start succeeded immediately - Progressive Readiness working
time="2025-10-04 22:12:02" level=info msg="Starting seed discovery"
    camera_asserters_test.go:133: ✅ PROGRESSIVE READINESS: Monitor start succeeded immediately
time="2025-10-04 22:12:02" level=info msg="Error checking device"
time="2025-10-04 22:12:02" level=warning msg="Device check error occurred"
time="2025-10-04 22:12:02" level=info msg="New V4L2 device discovered"
time="2025-10-04 22:12:02" level=info msg="Seed discovery completed"
time="2025-10-04 22:12:02" level=info msg="Monitor is now ready"
time="2025-10-04 22:12:02" level=info msg="Starting event-first camera monitoring"
time="2025-10-04 22:12:02" level=info msg="Camera reconcile loop started"
time="2025-10-04 22:12:02" level=info msg="Device event loop started"
    camera_asserters_test.go:159: ✅ Monitor is ready
time="2025-10-04 22:12:02" level=info msg="Stopping hybrid camera monitor"
time="2025-10-04 22:12:02" level=info msg="Device event loop stopped due to context cancellation"
time="2025-10-04 22:12:02" level=info msg="Camera reconcile loop stopped due to context cancellation"
time="2025-10-04 22:12:02" level=info msg="Event loop stopped"
time="2025-10-04 22:12:02" level=info msg="Stopped fsnotify device event source"
time="2025-10-04 22:12:02" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:12:02" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:12:02" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:12:02" level=info msg="Hybrid camera monitor stopped"
    camera_asserters_test.go:147: ✅ Monitor stopped successfully
time="2025-10-04 22:12:02" level=info msg="Starting hybrid camera monitor"
time="2025-10-04 22:12:02" level=info msg="Starting device event source"
time="2025-10-04 22:12:02" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:02" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:12:02" level=info msg="Device event source started successfully"
time="2025-10-04 22:12:02" level=info msg="Running in event-first mode with fsnotify support"
time="2025-10-04 22:12:02" level=info msg="Bounded worker pool started"
time="2025-10-04 22:12:02" level=info msg="Spawning monitor loops"
time="2025-10-04 22:12:02" level=info msg="Monitor start completed successfully"
    progressive_readiness.go:52: ✅ Monitor Start succeeded immediately - Progressive Readiness working
    camera_asserters_test.go:133: ✅ PROGRESSIVE READINESS: Monitor start succeeded immediately
time="2025-10-04 22:12:02" level=info msg="Starting seed discovery"
time="2025-10-04 22:12:02" level=info msg="Error checking device"
time="2025-10-04 22:12:02" level=warning msg="Device check error occurred"
time="2025-10-04 22:12:02" level=info msg="Seed discovery completed"
time="2025-10-04 22:12:02" level=info msg="Monitor is now ready"
time="2025-10-04 22:12:02" level=info msg="Starting event-first camera monitoring"
time="2025-10-04 22:12:02" level=info msg="Camera reconcile loop started"
time="2025-10-04 22:12:02" level=info msg="Device event loop started"
    camera_asserters_test.go:159: ✅ Monitor is ready
time="2025-10-04 22:12:02" level=info msg="Stopping hybrid camera monitor"
time="2025-10-04 22:12:02" level=info msg="Device event loop stopped due to context cancellation"
time="2025-10-04 22:12:02" level=info msg="Camera reconcile loop stopped due to context cancellation"
time="2025-10-04 22:12:02" level=info msg="Event loop stopped"
time="2025-10-04 22:12:02" level=info msg="Stopped fsnotify device event source"
time="2025-10-04 22:12:02" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:12:02" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:12:02" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:12:02" level=info msg="Hybrid camera monitor stopped"
    camera_asserters_test.go:147: ✅ Monitor stopped successfully
time="2025-10-04 22:12:02" level=info msg="Starting hybrid camera monitor"
time="2025-10-04 22:12:02" level=info msg="Starting device event source"
time="2025-10-04 22:12:02" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:02" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:12:02" level=info msg="Device event source started successfully"
time="2025-10-04 22:12:02" level=info msg="Running in event-first mode with fsnotify support"
time="2025-10-04 22:12:02" level=info msg="Bounded worker pool started"
time="2025-10-04 22:12:02" level=info msg="Spawning monitor loops"
time="2025-10-04 22:12:02" level=info msg="Monitor start completed successfully"
    progressive_readiness.go:52: ✅ Monitor Start succeeded immediately - Progressive Readiness working
    camera_asserters_test.go:133: ✅ PROGRESSIVE READINESS: Monitor start succeeded immediately
time="2025-10-04 22:12:02" level=info msg="Starting seed discovery"
time="2025-10-04 22:12:02" level=info msg="Error checking device"
time="2025-10-04 22:12:02" level=warning msg="Device check error occurred"
time="2025-10-04 22:12:02" level=info msg="Seed discovery completed"
time="2025-10-04 22:12:02" level=info msg="Monitor is now ready"
time="2025-10-04 22:12:02" level=info msg="Starting event-first camera monitoring"
time="2025-10-04 22:12:02" level=info msg="Camera reconcile loop started"
time="2025-10-04 22:12:02" level=info msg="Device event loop started"
    camera_asserters_test.go:159: ✅ Monitor is ready
time="2025-10-04 22:12:03" level=info msg="Stopping hybrid camera monitor"
time="2025-10-04 22:12:03" level=info msg="Device event loop stopped due to context cancellation"
time="2025-10-04 22:12:03" level=info msg="Camera reconcile loop stopped due to context cancellation"
time="2025-10-04 22:12:03" level=info msg="Event loop stopped"
time="2025-10-04 22:12:03" level=info msg="Stopped fsnotify device event source"
time="2025-10-04 22:12:03" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:12:03" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:12:03" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:12:03" level=info msg="Hybrid camera monitor stopped"
    camera_asserters_test.go:147: ✅ Monitor stopped successfully
time="2025-10-04 22:12:03" level=info msg="Starting hybrid camera monitor"
time="2025-10-04 22:12:03" level=info msg="Starting device event source"
time="2025-10-04 22:12:03" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:03" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:12:03" level=info msg="Device event source started successfully"
time="2025-10-04 22:12:03" level=info msg="Running in event-first mode with fsnotify support"
time="2025-10-04 22:12:03" level=info msg="Bounded worker pool started"
time="2025-10-04 22:12:03" level=info msg="Spawning monitor loops"
time="2025-10-04 22:12:03" level=info msg="Monitor start completed successfully"
    progressive_readiness.go:52: ✅ Monitor Start succeeded immediately - Progressive Readiness working
time="2025-10-04 22:12:03" level=info msg="Starting seed discovery"
    camera_asserters_test.go:133: ✅ PROGRESSIVE READINESS: Monitor start succeeded immediately
time="2025-10-04 22:12:03" level=info msg="Error checking device"
time="2025-10-04 22:12:03" level=warning msg="Device check error occurred"
time="2025-10-04 22:12:03" level=info msg="Seed discovery completed"
time="2025-10-04 22:12:03" level=info msg="Monitor is now ready"
time="2025-10-04 22:12:03" level=info msg="Starting event-first camera monitoring"
time="2025-10-04 22:12:03" level=info msg="Camera reconcile loop started"
time="2025-10-04 22:12:03" level=info msg="Device event loop started"
    camera_asserters_test.go:159: ✅ Monitor is ready
time="2025-10-04 22:12:03" level=info msg="Stopping hybrid camera monitor"
time="2025-10-04 22:12:03" level=info msg="Device event loop stopped due to context cancellation"
time="2025-10-04 22:12:03" level=info msg="Camera reconcile loop stopped due to context cancellation"
time="2025-10-04 22:12:03" level=info msg="Event loop stopped"
time="2025-10-04 22:12:03" level=info msg="Stopped fsnotify device event source"
time="2025-10-04 22:12:03" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:12:03" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:12:03" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:12:03" level=info msg="Hybrid camera monitor stopped"
    camera_asserters_test.go:147: ✅ Monitor stopped successfully
time="2025-10-04 22:12:03" level=info msg="Starting hybrid camera monitor"
time="2025-10-04 22:12:03" level=info msg="Starting device event source"
time="2025-10-04 22:12:03" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:03" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:12:03" level=info msg="Device event source started successfully"
time="2025-10-04 22:12:03" level=info msg="Running in event-first mode with fsnotify support"
time="2025-10-04 22:12:03" level=info msg="Bounded worker pool started"
time="2025-10-04 22:12:03" level=info msg="Spawning monitor loops"
time="2025-10-04 22:12:03" level=info msg="Monitor start completed successfully"
    progressive_readiness.go:52: ✅ Monitor Start succeeded immediately - Progressive Readiness working
    camera_asserters_test.go:133: ✅ PROGRESSIVE READINESS: Monitor start succeeded immediately
time="2025-10-04 22:12:03" level=info msg="Starting seed discovery"
time="2025-10-04 22:12:03" level=info msg="Error checking device"
time="2025-10-04 22:12:03" level=warning msg="Device check error occurred"
time="2025-10-04 22:12:03" level=info msg="Seed discovery completed"
time="2025-10-04 22:12:03" level=info msg="Monitor is now ready"
time="2025-10-04 22:12:03" level=info msg="Starting event-first camera monitoring"
time="2025-10-04 22:12:03" level=info msg="Camera reconcile loop started"
time="2025-10-04 22:12:03" level=info msg="Device event loop started"
    camera_asserters_test.go:159: ✅ Monitor is ready
time="2025-10-04 22:12:03" level=info msg="Stopping hybrid camera monitor"
time="2025-10-04 22:12:03" level=info msg="Device event loop stopped due to context cancellation"
time="2025-10-04 22:12:03" level=info msg="Event loop stopped"
time="2025-10-04 22:12:03" level=info msg="Stopped fsnotify device event source"
time="2025-10-04 22:12:03" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:12:03" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:12:03" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:12:03" level=info msg="Hybrid camera monitor stopped"
    camera_asserters_test.go:147: ✅ Monitor stopped successfully
time="2025-10-04 22:12:03" level=info msg="Camera reconcile loop stopped due to context cancellation"
    camera_error_handling_test.go:189: ✅ Rapid start/stop cycles validated
=== RUN   TestCameraMonitor_EdgeCases_Comprehensive/concurrent_operations
time="2025-10-04 22:12:03" level=info msg="Starting hybrid camera monitor"
time="2025-10-04 22:12:03" level=info msg="Starting device event source"
time="2025-10-04 22:12:03" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:03" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:12:03" level=info msg="Device event source started successfully"
time="2025-10-04 22:12:03" level=info msg="Running in event-first mode with fsnotify support"
time="2025-10-04 22:12:03" level=info msg="Bounded worker pool started"
time="2025-10-04 22:12:03" level=info msg="Spawning monitor loops"
time="2025-10-04 22:12:03" level=info msg="Monitor start completed successfully"
=== NAME  TestCameraMonitor_EdgeCases_Comprehensive
    progressive_readiness.go:52: ✅ Monitor Start succeeded immediately - Progressive Readiness working
    camera_asserters_test.go:133: ✅ PROGRESSIVE READINESS: Monitor start succeeded immediately
time="2025-10-04 22:12:03" level=info msg="Starting seed discovery"
time="2025-10-04 22:12:03" level=info msg="Error checking device"
time="2025-10-04 22:12:03" level=warning msg="Device check error occurred"
time="2025-10-04 22:12:03" level=info msg="Seed discovery completed"
time="2025-10-04 22:12:03" level=info msg="Monitor is now ready"
time="2025-10-04 22:12:03" level=info msg="Starting event-first camera monitoring"
time="2025-10-04 22:12:03" level=info msg="Camera reconcile loop started"
time="2025-10-04 22:12:03" level=info msg="Device event loop started"
    camera_asserters_test.go:159: ✅ Monitor is ready
    camera_error_handling_test.go:245: ✅ Concurrent operations validated
=== RUN   TestCameraMonitor_EdgeCases_Comprehensive/device_creation_edge_cases
time="2025-10-04 22:12:03" level=error msg="monitor_start_return_err - monitor is already running"
=== NAME  TestCameraMonitor_EdgeCases_Comprehensive
    progressive_readiness.go:61: ⏳ Monitor Start needs readiness - waiting for event (not polling)
    progressive_readiness.go:67: 🔔 Readiness event received for Monitor Start - retrying operation
time="2025-10-04 22:12:03" level=error msg="monitor_start_return_err - monitor is already running"
    camera_asserters_test.go:127: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/camera/camera_asserters_test.go:127
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/camera/camera_error_handling_test.go:250
        	Error:      	Received unexpected error:
        	            	monitor is already running
        	Test:       	TestCameraMonitor_EdgeCases_Comprehensive
        	Messages:   	Monitor must start successfully
=== NAME  TestCameraMonitor_EdgeCases_Comprehensive/device_creation_edge_cases
    testing.go:1679: test executed panic(nil) or runtime.Goexit: subtest may have called FailNow on a parent test
time="2025-10-04 22:12:03" level=info msg="Stopping hybrid camera monitor"
time="2025-10-04 22:12:03" level=info msg="Device event loop stopped due to context cancellation"
time="2025-10-04 22:12:03" level=info msg="Camera reconcile loop stopped due to context cancellation"
time="2025-10-04 22:12:03" level=info msg="Event loop stopped"
time="2025-10-04 22:12:03" level=info msg="Stopped fsnotify device event source"
time="2025-10-04 22:12:03" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:12:03" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:12:03" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:12:03" level=info msg="Hybrid camera monitor stopped"
--- FAIL: TestCameraMonitor_EdgeCases_Comprehensive (0.83s)
    --- PASS: TestCameraMonitor_EdgeCases_Comprehensive/rapid_start_stop_cycles (0.62s)
    --- PASS: TestCameraMonitor_EdgeCases_Comprehensive/concurrent_operations (0.11s)
    --- FAIL: TestCameraMonitor_EdgeCases_Comprehensive/device_creation_edge_cases (0.00s)
=== RUN   TestCameraMonitor_Performance_Comprehensive
time="2025-10-04 22:12:03" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:03" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:03" level=info msg="Created fresh device event source instance with smart selection"
=== RUN   TestCameraMonitor_Performance_Comprehensive/performance_under_load
time="2025-10-04 22:12:03" level=info msg="Starting hybrid camera monitor"
time="2025-10-04 22:12:03" level=info msg="Starting device event source"
time="2025-10-04 22:12:03" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:03" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:12:03" level=info msg="Device event source started successfully"
time="2025-10-04 22:12:03" level=info msg="Running in event-first mode with fsnotify support"
time="2025-10-04 22:12:03" level=info msg="Bounded worker pool started"
time="2025-10-04 22:12:03" level=info msg="Spawning monitor loops"
time="2025-10-04 22:12:03" level=info msg="Monitor start completed successfully"
=== NAME  TestCameraMonitor_Performance_Comprehensive
    progressive_readiness.go:52: ✅ Monitor Start succeeded immediately - Progressive Readiness working
    camera_asserters_test.go:133: ✅ PROGRESSIVE READINESS: Monitor start succeeded immediately
time="2025-10-04 22:12:03" level=info msg="Starting seed discovery"
time="2025-10-04 22:12:03" level=info msg="Error checking device"
time="2025-10-04 22:12:03" level=warning msg="Device check error occurred"
time="2025-10-04 22:12:03" level=info msg="New V4L2 device discovered"
time="2025-10-04 22:12:03" level=info msg="Seed discovery completed"
time="2025-10-04 22:12:03" level=info msg="Monitor is now ready"
time="2025-10-04 22:12:03" level=info msg="Starting event-first camera monitoring"
time="2025-10-04 22:12:03" level=info msg="Camera reconcile loop started"
time="2025-10-04 22:12:03" level=info msg="Device event loop started"
    camera_asserters_test.go:159: ✅ Monitor is ready
    camera_error_handling_test.go:352: ✅ Performance under load validated (duration: 212.021µs)
=== RUN   TestCameraMonitor_Performance_Comprehensive/memory_usage_patterns
time="2025-10-04 22:12:03" level=error msg="monitor_start_return_err - monitor is already running"
=== NAME  TestCameraMonitor_Performance_Comprehensive
    progressive_readiness.go:61: ⏳ Monitor Start needs readiness - waiting for event (not polling)
    progressive_readiness.go:67: 🔔 Readiness event received for Monitor Start - retrying operation
time="2025-10-04 22:12:03" level=error msg="monitor_start_return_err - monitor is already running"
    camera_asserters_test.go:127: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/camera/camera_asserters_test.go:127
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/camera/camera_error_handling_test.go:357
        	Error:      	Received unexpected error:
        	            	monitor is already running
        	Test:       	TestCameraMonitor_Performance_Comprehensive
        	Messages:   	Monitor must start successfully
=== NAME  TestCameraMonitor_Performance_Comprehensive/memory_usage_patterns
    testing.go:1679: test executed panic(nil) or runtime.Goexit: subtest may have called FailNow on a parent test
time="2025-10-04 22:12:03" level=info msg="Stopping hybrid camera monitor"
time="2025-10-04 22:12:03" level=info msg="Event loop stopped"
time="2025-10-04 22:12:03" level=info msg="Stopped fsnotify device event source"
time="2025-10-04 22:12:03" level=info msg="Camera reconcile loop stopped due to context cancellation"
time="2025-10-04 22:12:03" level=info msg="Device event loop stopped due to context cancellation"
time="2025-10-04 22:12:03" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:12:03" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:12:03" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:12:03" level=info msg="Hybrid camera monitor stopped"
--- FAIL: TestCameraMonitor_Performance_Comprehensive (0.20s)
    --- PASS: TestCameraMonitor_Performance_Comprehensive/performance_under_load (0.10s)
    --- FAIL: TestCameraMonitor_Performance_Comprehensive/memory_usage_patterns (0.00s)
=== RUN   TestRealHardware_DeviceDetection_ReqCAM001_Success
time="2025-10-04 22:12:03" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:03" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:03" level=info msg="Created fresh device event source instance with smart selection"
    camera_hardware_comprehensive_test.go:21: Found 0 V4L2 devices
    camera_hardware_comprehensive_test.go:39: ✅ Real device detection validated
--- PASS: TestRealHardware_DeviceDetection_ReqCAM001_Success (0.00s)
=== RUN   TestRealHardware_V4L2Commands_ReqCAM001_Success
time="2025-10-04 22:12:03" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:03" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:03" level=info msg="Created fresh device event source instance with smart selection"
    camera_hardware_comprehensive_test.go:52: No V4L2 devices available for testing
--- SKIP: TestRealHardware_V4L2Commands_ReqCAM001_Success (0.00s)
=== RUN   TestRealHardware_DeviceInfoParsing_ReqCAM001_Success
time="2025-10-04 22:12:03" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:03" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:03" level=info msg="Created fresh device event source instance with smart selection"
    camera_hardware_comprehensive_test.go:85: No V4L2 devices available for testing
--- SKIP: TestRealHardware_DeviceInfoParsing_ReqCAM001_Success (0.00s)
=== RUN   TestRealHardware_Integration_ReqCAM001_Success
time="2025-10-04 22:12:03" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:03" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:03" level=info msg="Created fresh device event source instance with smart selection"
    camera_hardware_comprehensive_test.go:128: Integration test discovered 0 devices
    camera_hardware_comprehensive_test.go:151: ✅ Complete integration validated
--- PASS: TestRealHardware_Integration_ReqCAM001_Success (0.00s)
=== RUN   TestRealHardware_ErrorScenarios_ReqCAM001_Success
time="2025-10-04 22:12:03" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:03" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:03" level=info msg="Created fresh device event source instance with smart selection"
    camera_hardware_comprehensive_test.go:164: Testing error scenarios with device: /dev/video999
    camera_hardware_comprehensive_test.go:166: ✅ Error scenarios validated
--- PASS: TestRealHardware_ErrorScenarios_ReqCAM001_Success (0.00s)
=== RUN   TestRealHardware_FileSystemOperations_ReqCAM001_Success
time="2025-10-04 22:12:03" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:03" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:03" level=info msg="Created fresh device event source instance with smart selection"
    camera_hardware_comprehensive_test.go:191: Found 2 V4L2 devices in /dev
    camera_hardware_comprehensive_test.go:195: Testing device: /dev/video0
time="2025-10-04 22:12:03" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:03" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:03" level=info msg="Created fresh device event source instance with smart selection"
    camera_hardware_comprehensive_test.go:210: Device /dev/video0 not discovered by monitor (expected for non-camera devices)
    camera_hardware_comprehensive_test.go:195: Testing device: /dev/video1
time="2025-10-04 22:12:03" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:03" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:03" level=info msg="Created fresh device event source instance with smart selection"
    camera_hardware_comprehensive_test.go:210: Device /dev/video1 not discovered by monitor (expected for non-camera devices)
    camera_hardware_comprehensive_test.go:221: ✅ File system operations validated
--- PASS: TestRealHardware_FileSystemOperations_ReqCAM001_Success (0.00s)
=== RUN   TestCameraMonitor_Integration_Comprehensive
time="2025-10-04 22:12:03" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:03" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:03" level=info msg="Created fresh device event source instance with smart selection"
=== RUN   TestCameraMonitor_Integration_Comprehensive/full_lifecycle_multiple_cycles
time="2025-10-04 22:12:03" level=info msg="Starting hybrid camera monitor"
time="2025-10-04 22:12:03" level=info msg="Starting device event source"
time="2025-10-04 22:12:03" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:03" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:12:03" level=info msg="Device event source started successfully"
time="2025-10-04 22:12:03" level=info msg="Running in event-first mode with fsnotify support"
time="2025-10-04 22:12:03" level=info msg="Bounded worker pool started"
time="2025-10-04 22:12:03" level=info msg="Spawning monitor loops"
time="2025-10-04 22:12:03" level=info msg="Monitor start completed successfully"
=== NAME  TestCameraMonitor_Integration_Comprehensive
    progressive_readiness.go:52: ✅ Monitor Start succeeded immediately - Progressive Readiness working
    camera_asserters_test.go:133: ✅ PROGRESSIVE READINESS: Monitor start succeeded immediately
time="2025-10-04 22:12:03" level=info msg="Starting seed discovery"
time="2025-10-04 22:12:03" level=info msg="Error checking device"
time="2025-10-04 22:12:03" level=warning msg="Device check error occurred"
time="2025-10-04 22:12:03" level=info msg="New V4L2 device discovered"
time="2025-10-04 22:12:03" level=info msg="Seed discovery completed"
time="2025-10-04 22:12:03" level=info msg="Monitor is now ready"
time="2025-10-04 22:12:03" level=info msg="Starting event-first camera monitoring"
time="2025-10-04 22:12:03" level=info msg="Camera reconcile loop started"
time="2025-10-04 22:12:03" level=info msg="Device event loop started"
    camera_asserters_test.go:159: ✅ Monitor is ready
time="2025-10-04 22:12:03" level=info msg="Stopping hybrid camera monitor"
time="2025-10-04 22:12:03" level=info msg="Event loop stopped"
time="2025-10-04 22:12:03" level=info msg="Device event loop stopped due to context cancellation"
time="2025-10-04 22:12:03" level=info msg="Camera reconcile loop stopped due to context cancellation"
time="2025-10-04 22:12:03" level=info msg="Stopped fsnotify device event source"
time="2025-10-04 22:12:03" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:12:03" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:12:03" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:12:03" level=info msg="Hybrid camera monitor stopped"
    camera_asserters_test.go:147: ✅ Monitor stopped successfully
time="2025-10-04 22:12:03" level=info msg="Starting hybrid camera monitor"
time="2025-10-04 22:12:03" level=info msg="Starting device event source"
time="2025-10-04 22:12:03" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:03" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:12:03" level=info msg="Device event source started successfully"
time="2025-10-04 22:12:03" level=info msg="Running in event-first mode with fsnotify support"
time="2025-10-04 22:12:03" level=info msg="Bounded worker pool started"
time="2025-10-04 22:12:03" level=info msg="Spawning monitor loops"
time="2025-10-04 22:12:03" level=info msg="Monitor start completed successfully"
    progressive_readiness.go:52: ✅ Monitor Start succeeded immediately - Progressive Readiness working
    camera_asserters_test.go:133: ✅ PROGRESSIVE READINESS: Monitor start succeeded immediately
time="2025-10-04 22:12:03" level=info msg="Starting seed discovery"
time="2025-10-04 22:12:03" level=info msg="Error checking device"
time="2025-10-04 22:12:03" level=warning msg="Device check error occurred"
time="2025-10-04 22:12:03" level=info msg="Seed discovery completed"
time="2025-10-04 22:12:03" level=info msg="Monitor is now ready"
time="2025-10-04 22:12:03" level=info msg="Starting event-first camera monitoring"
time="2025-10-04 22:12:03" level=info msg="Camera reconcile loop started"
time="2025-10-04 22:12:03" level=info msg="Device event loop started"
    camera_asserters_test.go:159: ✅ Monitor is ready
    camera_integration_test.go:38: ✅ Full lifecycle with multiple cycles validated
=== RUN   TestCameraMonitor_Integration_Comprehensive/error_handling_recovery
time="2025-10-04 22:12:03" level=info msg="Stopping hybrid camera monitor"
time="2025-10-04 22:12:03" level=info msg="Event loop stopped"
time="2025-10-04 22:12:03" level=info msg="Camera reconcile loop stopped due to context cancellation"
time="2025-10-04 22:12:03" level=info msg="Device event loop stopped due to context cancellation"
time="2025-10-04 22:12:03" level=info msg="Stopped fsnotify device event source"
time="2025-10-04 22:12:03" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:12:03" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:12:03" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:12:03" level=info msg="Hybrid camera monitor stopped"
time="2025-10-04 22:12:03" level=info msg="Starting hybrid camera monitor"
time="2025-10-04 22:12:03" level=info msg="Starting device event source"
time="2025-10-04 22:12:03" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:03" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:12:03" level=info msg="Device event source started successfully"
time="2025-10-04 22:12:03" level=info msg="Running in event-first mode with fsnotify support"
time="2025-10-04 22:12:03" level=info msg="Bounded worker pool started"
time="2025-10-04 22:12:03" level=info msg="Spawning monitor loops"
time="2025-10-04 22:12:03" level=info msg="Monitor start completed successfully"
=== NAME  TestCameraMonitor_Integration_Comprehensive
    progressive_readiness.go:52: ✅ Monitor Start succeeded immediately - Progressive Readiness working
    camera_asserters_test.go:133: ✅ PROGRESSIVE READINESS: Monitor start succeeded immediately
time="2025-10-04 22:12:03" level=info msg="Starting seed discovery"
time="2025-10-04 22:12:03" level=info msg="Error checking device"
time="2025-10-04 22:12:03" level=warning msg="Device check error occurred"
time="2025-10-04 22:12:03" level=info msg="Seed discovery completed"
time="2025-10-04 22:12:03" level=info msg="Monitor is now ready"
time="2025-10-04 22:12:03" level=info msg="Starting event-first camera monitoring"
time="2025-10-04 22:12:03" level=info msg="Camera reconcile loop started"
time="2025-10-04 22:12:03" level=info msg="Device event loop started"
    camera_asserters_test.go:159: ✅ Monitor is ready
time="2025-10-04 22:12:04" level=error msg="monitor_start_return_err - monitor is already running"
    camera_integration_test.go:55: ✅ Error handling and recovery validated
=== RUN   TestCameraMonitor_Integration_Comprehensive/configuration_event_notifier_integration
=== NAME  TestCameraMonitor_Integration_Comprehensive
    camera_integration_test.go:72: ✅ Configuration and event notifier integration validated
=== RUN   TestCameraMonitor_Integration_Comprehensive/resource_management_cleanup
=== NAME  TestCameraMonitor_Integration_Comprehensive
    camera_integration_test.go:88: ✅ Resource management and cleanup validated
=== RUN   TestCameraMonitor_Integration_Comprehensive/multiple_rapid_configuration_changes
=== NAME  TestCameraMonitor_Integration_Comprehensive
    camera_integration_test.go:103: ✅ Multiple rapid configuration changes validated
=== RUN   TestCameraMonitor_Integration_Comprehensive/stats_consistency_under_load
=== NAME  TestCameraMonitor_Integration_Comprehensive
    camera_integration_test.go:115: ✅ Stats consistency under load validated
time="2025-10-04 22:12:04" level=info msg="Stopping hybrid camera monitor"
time="2025-10-04 22:12:04" level=info msg="Event loop stopped"
time="2025-10-04 22:12:04" level=info msg="Device event loop stopped due to context cancellation"
time="2025-10-04 22:12:04" level=info msg="Camera reconcile loop stopped due to context cancellation"
time="2025-10-04 22:12:04" level=info msg="Stopped fsnotify device event source"
time="2025-10-04 22:12:04" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:12:04" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:12:04" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:12:04" level=info msg="Hybrid camera monitor stopped"
--- PASS: TestCameraMonitor_Integration_Comprehensive (0.41s)
    --- PASS: TestCameraMonitor_Integration_Comprehensive/full_lifecycle_multiple_cycles (0.20s)
    --- PASS: TestCameraMonitor_Integration_Comprehensive/error_handling_recovery (0.10s)
    --- PASS: TestCameraMonitor_Integration_Comprehensive/configuration_event_notifier_integration (0.00s)
    --- PASS: TestCameraMonitor_Integration_Comprehensive/resource_management_cleanup (0.00s)
    --- PASS: TestCameraMonitor_Integration_Comprehensive/multiple_rapid_configuration_changes (0.00s)
    --- PASS: TestCameraMonitor_Integration_Comprehensive/stats_consistency_under_load (0.00s)
=== RUN   TestCameraMonitor_Integration_EdgeCases
time="2025-10-04 22:12:04" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:04" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:04" level=info msg="Created fresh device event source instance with smart selection"
=== RUN   TestCameraMonitor_Integration_EdgeCases/rapid_start_stop_cycles
time="2025-10-04 22:12:04" level=info msg="Starting hybrid camera monitor"
time="2025-10-04 22:12:04" level=info msg="Starting device event source"
time="2025-10-04 22:12:04" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:04" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:12:04" level=info msg="Device event source started successfully"
time="2025-10-04 22:12:04" level=info msg="Running in event-first mode with fsnotify support"
time="2025-10-04 22:12:04" level=info msg="Bounded worker pool started"
time="2025-10-04 22:12:04" level=info msg="Spawning monitor loops"
time="2025-10-04 22:12:04" level=info msg="Monitor start completed successfully"
time="2025-10-04 22:12:04" level=info msg="Starting seed discovery"
=== NAME  TestCameraMonitor_Integration_EdgeCases
    progressive_readiness.go:52: ✅ Monitor Start succeeded immediately - Progressive Readiness working
    camera_asserters_test.go:133: ✅ PROGRESSIVE READINESS: Monitor start succeeded immediately
time="2025-10-04 22:12:04" level=info msg="Error checking device"
time="2025-10-04 22:12:04" level=warning msg="Device check error occurred"
time="2025-10-04 22:12:04" level=info msg="New V4L2 device discovered"
time="2025-10-04 22:12:04" level=info msg="Seed discovery completed"
time="2025-10-04 22:12:04" level=info msg="Monitor is now ready"
time="2025-10-04 22:12:04" level=info msg="Starting event-first camera monitoring"
time="2025-10-04 22:12:04" level=info msg="Camera reconcile loop started"
time="2025-10-04 22:12:04" level=info msg="Device event loop started"
    camera_asserters_test.go:159: ✅ Monitor is ready
time="2025-10-04 22:12:04" level=info msg="Stopping hybrid camera monitor"
time="2025-10-04 22:12:04" level=info msg="Device event loop stopped due to context cancellation"
time="2025-10-04 22:12:04" level=info msg="Camera reconcile loop stopped due to context cancellation"
time="2025-10-04 22:12:04" level=info msg="Event loop stopped"
time="2025-10-04 22:12:04" level=info msg="Stopped fsnotify device event source"
time="2025-10-04 22:12:04" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:12:04" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:12:04" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:12:04" level=info msg="Hybrid camera monitor stopped"
    camera_asserters_test.go:147: ✅ Monitor stopped successfully
time="2025-10-04 22:12:04" level=info msg="Starting hybrid camera monitor"
time="2025-10-04 22:12:04" level=info msg="Starting device event source"
time="2025-10-04 22:12:04" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:04" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:12:04" level=info msg="Device event source started successfully"
time="2025-10-04 22:12:04" level=info msg="Running in event-first mode with fsnotify support"
time="2025-10-04 22:12:04" level=info msg="Bounded worker pool started"
time="2025-10-04 22:12:04" level=info msg="Spawning monitor loops"
time="2025-10-04 22:12:04" level=info msg="Monitor start completed successfully"
    progressive_readiness.go:52: ✅ Monitor Start succeeded immediately - Progressive Readiness working
    camera_asserters_test.go:133: ✅ PROGRESSIVE READINESS: Monitor start succeeded immediately
time="2025-10-04 22:12:04" level=info msg="Starting seed discovery"
time="2025-10-04 22:12:04" level=info msg="Error checking device"
time="2025-10-04 22:12:04" level=warning msg="Device check error occurred"
time="2025-10-04 22:12:04" level=info msg="Seed discovery completed"
time="2025-10-04 22:12:04" level=info msg="Monitor is now ready"
time="2025-10-04 22:12:04" level=info msg="Starting event-first camera monitoring"
time="2025-10-04 22:12:04" level=info msg="Camera reconcile loop started"
time="2025-10-04 22:12:04" level=info msg="Device event loop started"
    camera_asserters_test.go:159: ✅ Monitor is ready
time="2025-10-04 22:12:04" level=info msg="Stopping hybrid camera monitor"
time="2025-10-04 22:12:04" level=info msg="Event loop stopped"
time="2025-10-04 22:12:04" level=info msg="Camera reconcile loop stopped due to context cancellation"
time="2025-10-04 22:12:04" level=info msg="Device event loop stopped due to context cancellation"
time="2025-10-04 22:12:04" level=info msg="Stopped fsnotify device event source"
time="2025-10-04 22:12:04" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:12:04" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:12:04" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:12:04" level=info msg="Hybrid camera monitor stopped"
    camera_asserters_test.go:147: ✅ Monitor stopped successfully
time="2025-10-04 22:12:04" level=info msg="Starting hybrid camera monitor"
time="2025-10-04 22:12:04" level=info msg="Starting device event source"
time="2025-10-04 22:12:04" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:04" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:12:04" level=info msg="Device event source started successfully"
time="2025-10-04 22:12:04" level=info msg="Running in event-first mode with fsnotify support"
time="2025-10-04 22:12:04" level=info msg="Bounded worker pool started"
time="2025-10-04 22:12:04" level=info msg="Spawning monitor loops"
time="2025-10-04 22:12:04" level=info msg="Monitor start completed successfully"
    progressive_readiness.go:52: ✅ Monitor Start succeeded immediately - Progressive Readiness working
    camera_asserters_test.go:133: ✅ PROGRESSIVE READINESS: Monitor start succeeded immediately
time="2025-10-04 22:12:04" level=info msg="Starting seed discovery"
time="2025-10-04 22:12:04" level=info msg="Error checking device"
time="2025-10-04 22:12:04" level=warning msg="Device check error occurred"
time="2025-10-04 22:12:04" level=info msg="Seed discovery completed"
time="2025-10-04 22:12:04" level=info msg="Monitor is now ready"
time="2025-10-04 22:12:04" level=info msg="Starting event-first camera monitoring"
time="2025-10-04 22:12:04" level=info msg="Camera reconcile loop started"
time="2025-10-04 22:12:04" level=info msg="Device event loop started"
    camera_asserters_test.go:159: ✅ Monitor is ready
time="2025-10-04 22:12:04" level=info msg="Stopping hybrid camera monitor"
time="2025-10-04 22:12:04" level=info msg="Event loop stopped"
time="2025-10-04 22:12:04" level=info msg="Camera reconcile loop stopped due to context cancellation"
time="2025-10-04 22:12:04" level=info msg="Device event loop stopped due to context cancellation"
time="2025-10-04 22:12:04" level=info msg="Stopped fsnotify device event source"
time="2025-10-04 22:12:04" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:12:04" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:12:04" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:12:04" level=info msg="Hybrid camera monitor stopped"
    camera_asserters_test.go:147: ✅ Monitor stopped successfully
    camera_integration_test.go:140: ✅ Rapid start/stop cycles validated
=== RUN   TestCameraMonitor_Integration_EdgeCases/concurrent_operations
time="2025-10-04 22:12:04" level=info msg="Starting hybrid camera monitor"
time="2025-10-04 22:12:04" level=info msg="Starting device event source"
time="2025-10-04 22:12:04" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:04" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:12:04" level=info msg="Device event source started successfully"
time="2025-10-04 22:12:04" level=info msg="Running in event-first mode with fsnotify support"
time="2025-10-04 22:12:04" level=info msg="Bounded worker pool started"
time="2025-10-04 22:12:04" level=info msg="Spawning monitor loops"
time="2025-10-04 22:12:04" level=info msg="Monitor start completed successfully"
=== NAME  TestCameraMonitor_Integration_EdgeCases
    progressive_readiness.go:52: ✅ Monitor Start succeeded immediately - Progressive Readiness working
    camera_asserters_test.go:133: ✅ PROGRESSIVE READINESS: Monitor start succeeded immediately
time="2025-10-04 22:12:04" level=info msg="Starting seed discovery"
time="2025-10-04 22:12:04" level=info msg="Error checking device"
time="2025-10-04 22:12:04" level=warning msg="Device check error occurred"
time="2025-10-04 22:12:04" level=info msg="Seed discovery completed"
time="2025-10-04 22:12:04" level=info msg="Monitor is now ready"
time="2025-10-04 22:12:04" level=info msg="Starting event-first camera monitoring"
time="2025-10-04 22:12:04" level=info msg="Camera reconcile loop started"
time="2025-10-04 22:12:04" level=info msg="Device event loop started"
    camera_asserters_test.go:159: ✅ Monitor is ready
    camera_integration_test.go:177: ✅ Concurrent operations validated
=== RUN   TestCameraMonitor_Integration_EdgeCases/device_creation_various_sources
time="2025-10-04 22:12:04" level=error msg="monitor_start_return_err - monitor is already running"
=== NAME  TestCameraMonitor_Integration_EdgeCases
    progressive_readiness.go:61: ⏳ Monitor Start needs readiness - waiting for event (not polling)
    progressive_readiness.go:67: 🔔 Readiness event received for Monitor Start - retrying operation
time="2025-10-04 22:12:04" level=error msg="monitor_start_return_err - monitor is already running"
    camera_asserters_test.go:127: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/camera/camera_asserters_test.go:127
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/camera/camera_integration_test.go:182
        	Error:      	Received unexpected error:
        	            	monitor is already running
        	Test:       	TestCameraMonitor_Integration_EdgeCases
        	Messages:   	Monitor must start successfully
=== NAME  TestCameraMonitor_Integration_EdgeCases/device_creation_various_sources
    testing.go:1679: test executed panic(nil) or runtime.Goexit: subtest may have called FailNow on a parent test
time="2025-10-04 22:12:04" level=info msg="Stopping hybrid camera monitor"
time="2025-10-04 22:12:04" level=info msg="Device event loop stopped due to context cancellation"
time="2025-10-04 22:12:04" level=info msg="Camera reconcile loop stopped due to context cancellation"
time="2025-10-04 22:12:04" level=info msg="Event loop stopped"
time="2025-10-04 22:12:04" level=info msg="Stopped fsnotify device event source"
time="2025-10-04 22:12:04" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:12:04" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:12:04" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:12:04" level=info msg="Hybrid camera monitor stopped"
--- FAIL: TestCameraMonitor_Integration_EdgeCases (0.57s)
    --- PASS: TestCameraMonitor_Integration_EdgeCases/rapid_start_stop_cycles (0.37s)
    --- PASS: TestCameraMonitor_Integration_EdgeCases/concurrent_operations (0.10s)
    --- FAIL: TestCameraMonitor_Integration_EdgeCases/device_creation_various_sources (0.00s)
=== RUN   TestCameraMonitor_Integration_ErrorPaths
time="2025-10-04 22:12:04" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:04" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:04" level=info msg="Created fresh device event source instance with smart selection"
=== RUN   TestCameraMonitor_Integration_ErrorPaths/invalid_device_paths
time="2025-10-04 22:12:04" level=info msg="Starting hybrid camera monitor"
time="2025-10-04 22:12:04" level=info msg="Starting device event source"
time="2025-10-04 22:12:04" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:04" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:12:04" level=info msg="Device event source started successfully"
time="2025-10-04 22:12:04" level=info msg="Running in event-first mode with fsnotify support"
time="2025-10-04 22:12:04" level=info msg="Bounded worker pool started"
time="2025-10-04 22:12:04" level=info msg="Spawning monitor loops"
time="2025-10-04 22:12:04" level=info msg="Monitor start completed successfully"
=== NAME  TestCameraMonitor_Integration_ErrorPaths
    progressive_readiness.go:52: ✅ Monitor Start succeeded immediately - Progressive Readiness working
    camera_asserters_test.go:133: ✅ PROGRESSIVE READINESS: Monitor start succeeded immediately
time="2025-10-04 22:12:04" level=info msg="Starting seed discovery"
time="2025-10-04 22:12:04" level=info msg="Error checking device"
time="2025-10-04 22:12:04" level=warning msg="Device check error occurred"
time="2025-10-04 22:12:04" level=info msg="New V4L2 device discovered"
time="2025-10-04 22:12:04" level=info msg="Seed discovery completed"
time="2025-10-04 22:12:04" level=info msg="Monitor is now ready"
time="2025-10-04 22:12:04" level=info msg="Starting event-first camera monitoring"
time="2025-10-04 22:12:04" level=info msg="Camera reconcile loop started"
time="2025-10-04 22:12:04" level=info msg="Device event loop started"
    camera_asserters_test.go:159: ✅ Monitor is ready
    camera_integration_test.go:279: ✅ Invalid device paths handled gracefully
=== RUN   TestCameraMonitor_Integration_ErrorPaths/context_cancellation
time="2025-10-04 22:12:04" level=error msg="monitor_start_return_err - monitor is already running"
=== NAME  TestCameraMonitor_Integration_ErrorPaths
    progressive_readiness.go:61: ⏳ Monitor Start needs readiness - waiting for event (not polling)
    progressive_readiness.go:67: 🔔 Readiness event received for Monitor Start - retrying operation
time="2025-10-04 22:12:04" level=error msg="monitor_start_return_err - monitor is already running"
    camera_asserters_test.go:127: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/camera/camera_asserters_test.go:127
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/camera/camera_integration_test.go:285
        	Error:      	Received unexpected error:
        	            	monitor is already running
        	Test:       	TestCameraMonitor_Integration_ErrorPaths
        	Messages:   	Monitor must start successfully
=== NAME  TestCameraMonitor_Integration_ErrorPaths/context_cancellation
    testing.go:1679: test executed panic(nil) or runtime.Goexit: subtest may have called FailNow on a parent test
time="2025-10-04 22:12:04" level=info msg="Stopping hybrid camera monitor"
time="2025-10-04 22:12:04" level=info msg="Device event loop stopped due to context cancellation"
time="2025-10-04 22:12:04" level=info msg="Event loop stopped"
time="2025-10-04 22:12:04" level=info msg="Camera reconcile loop stopped due to context cancellation"
time="2025-10-04 22:12:04" level=info msg="Stopped fsnotify device event source"
time="2025-10-04 22:12:04" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:12:04" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:12:04" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:12:04" level=info msg="Hybrid camera monitor stopped"
--- FAIL: TestCameraMonitor_Integration_ErrorPaths (0.20s)
    --- PASS: TestCameraMonitor_Integration_ErrorPaths/invalid_device_paths (0.10s)
    --- FAIL: TestCameraMonitor_Integration_ErrorPaths/context_cancellation (0.00s)
=== RUN   TestCameraMonitor_Integration_Performance
time="2025-10-04 22:12:04" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:04" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:04" level=info msg="Created fresh device event source instance with smart selection"
=== RUN   TestCameraMonitor_Integration_Performance/performance_under_load
time="2025-10-04 22:12:04" level=info msg="Starting hybrid camera monitor"
time="2025-10-04 22:12:04" level=info msg="Starting device event source"
time="2025-10-04 22:12:04" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:04" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:12:04" level=info msg="Device event source started successfully"
time="2025-10-04 22:12:04" level=info msg="Running in event-first mode with fsnotify support"
time="2025-10-04 22:12:04" level=info msg="Bounded worker pool started"
time="2025-10-04 22:12:04" level=info msg="Spawning monitor loops"
time="2025-10-04 22:12:04" level=info msg="Monitor start completed successfully"
=== NAME  TestCameraMonitor_Integration_Performance
    progressive_readiness.go:52: ✅ Monitor Start succeeded immediately - Progressive Readiness working
    camera_asserters_test.go:133: ✅ PROGRESSIVE READINESS: Monitor start succeeded immediately
time="2025-10-04 22:12:04" level=info msg="Starting seed discovery"
time="2025-10-04 22:12:04" level=info msg="Error checking device"
time="2025-10-04 22:12:04" level=warning msg="Device check error occurred"
time="2025-10-04 22:12:04" level=info msg="New V4L2 device discovered"
time="2025-10-04 22:12:04" level=info msg="Seed discovery completed"
time="2025-10-04 22:12:04" level=info msg="Monitor is now ready"
time="2025-10-04 22:12:04" level=info msg="Starting event-first camera monitoring"
time="2025-10-04 22:12:04" level=info msg="Camera reconcile loop started"
time="2025-10-04 22:12:04" level=info msg="Device event loop started"
    camera_asserters_test.go:159: ✅ Monitor is ready
    camera_integration_test.go:366: ✅ Performance under load validated (duration: 94.61µs)
=== RUN   TestCameraMonitor_Integration_Performance/memory_usage_patterns
time="2025-10-04 22:12:05" level=error msg="monitor_start_return_err - monitor is already running"
=== NAME  TestCameraMonitor_Integration_Performance
    progressive_readiness.go:61: ⏳ Monitor Start needs readiness - waiting for event (not polling)
    progressive_readiness.go:67: 🔔 Readiness event received for Monitor Start - retrying operation
time="2025-10-04 22:12:05" level=error msg="monitor_start_return_err - monitor is already running"
    camera_asserters_test.go:127: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/camera/camera_asserters_test.go:127
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/camera/camera_integration_test.go:371
        	Error:      	Received unexpected error:
        	            	monitor is already running
        	Test:       	TestCameraMonitor_Integration_Performance
        	Messages:   	Monitor must start successfully
=== NAME  TestCameraMonitor_Integration_Performance/memory_usage_patterns
    testing.go:1679: test executed panic(nil) or runtime.Goexit: subtest may have called FailNow on a parent test
time="2025-10-04 22:12:05" level=info msg="Stopping hybrid camera monitor"
time="2025-10-04 22:12:05" level=info msg="Device event loop stopped due to context cancellation"
time="2025-10-04 22:12:05" level=info msg="Event loop stopped"
time="2025-10-04 22:12:05" level=info msg="Camera reconcile loop stopped due to context cancellation"
time="2025-10-04 22:12:05" level=info msg="Stopped fsnotify device event source"
time="2025-10-04 22:12:05" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:12:05" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:12:05" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:12:05" level=info msg="Hybrid camera monitor stopped"
--- FAIL: TestCameraMonitor_Integration_Performance (0.20s)
    --- PASS: TestCameraMonitor_Integration_Performance/performance_under_load (0.10s)
    --- FAIL: TestCameraMonitor_Integration_Performance/memory_usage_patterns (0.00s)
=== RUN   TestCameraLifecycle_ConnectDisconnect_ReqCAM001_Success
time="2025-10-04 22:12:05" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:05" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:05" level=info msg="Created fresh device event source instance with smart selection"
time="2025-10-04 22:12:05" level=info msg="Starting hybrid camera monitor"
time="2025-10-04 22:12:05" level=info msg="Starting device event source"
time="2025-10-04 22:12:05" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:05" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:12:05" level=info msg="Device event source started successfully"
time="2025-10-04 22:12:05" level=info msg="Running in event-first mode with fsnotify support"
time="2025-10-04 22:12:05" level=info msg="Bounded worker pool started"
time="2025-10-04 22:12:05" level=info msg="Spawning monitor loops"
time="2025-10-04 22:12:05" level=info msg="Monitor start completed successfully"
    progressive_readiness.go:52: ✅ Monitor Start succeeded immediately - Progressive Readiness working
time="2025-10-04 22:12:05" level=info msg="Starting seed discovery"
    camera_asserters_test.go:133: ✅ PROGRESSIVE READINESS: Monitor start succeeded immediately
time="2025-10-04 22:12:05" level=info msg="Error checking device"
time="2025-10-04 22:12:05" level=warning msg="Device check error occurred"
time="2025-10-04 22:12:05" level=info msg="New V4L2 device discovered"
time="2025-10-04 22:12:05" level=info msg="Seed discovery completed"
time="2025-10-04 22:12:05" level=info msg="Monitor is now ready"
time="2025-10-04 22:12:05" level=info msg="Starting event-first camera monitoring"
time="2025-10-04 22:12:05" level=info msg="Camera reconcile loop started"
time="2025-10-04 22:12:05" level=info msg="Device event loop started"
    camera_asserters_test.go:159: ✅ Monitor is ready
    camera_lifecycle_test.go:30: Lifecycle test discovered 1 devices
time="2025-10-04 22:12:05" level=info msg="Stopping hybrid camera monitor"
time="2025-10-04 22:12:05" level=info msg="Device event loop stopped due to context cancellation"
time="2025-10-04 22:12:05" level=info msg="Camera reconcile loop stopped due to context cancellation"
time="2025-10-04 22:12:05" level=info msg="Event loop stopped"
time="2025-10-04 22:12:05" level=info msg="Stopped fsnotify device event source"
time="2025-10-04 22:12:05" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:12:05" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:12:05" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:12:05" level=info msg="Hybrid camera monitor stopped"
    camera_asserters_test.go:147: ✅ Monitor stopped successfully
    camera_lifecycle_test.go:37: ✅ Complete device lifecycle validated
--- PASS: TestCameraLifecycle_ConnectDisconnect_ReqCAM001_Success (0.10s)
=== RUN   TestCameraLifecycle_StateTransitions_ReqCAM001_Success
time="2025-10-04 22:12:05" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:05" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:05" level=info msg="Created fresh device event source instance with smart selection"
time="2025-10-04 22:12:05" level=info msg="Starting hybrid camera monitor"
time="2025-10-04 22:12:05" level=info msg="Starting device event source"
time="2025-10-04 22:12:05" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:05" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:12:05" level=info msg="Device event source started successfully"
time="2025-10-04 22:12:05" level=info msg="Running in event-first mode with fsnotify support"
time="2025-10-04 22:12:05" level=info msg="Bounded worker pool started"
time="2025-10-04 22:12:05" level=info msg="Spawning monitor loops"
time="2025-10-04 22:12:05" level=info msg="Monitor start completed successfully"
    progressive_readiness.go:52: ✅ Monitor Start succeeded immediately - Progressive Readiness working
    camera_asserters_test.go:133: ✅ PROGRESSIVE READINESS: Monitor start succeeded immediately
time="2025-10-04 22:12:05" level=info msg="Starting seed discovery"
time="2025-10-04 22:12:05" level=info msg="Error checking device"
time="2025-10-04 22:12:05" level=warning msg="Device check error occurred"
time="2025-10-04 22:12:05" level=info msg="New V4L2 device discovered"
time="2025-10-04 22:12:05" level=info msg="Seed discovery completed"
time="2025-10-04 22:12:05" level=info msg="Monitor is now ready"
time="2025-10-04 22:12:05" level=info msg="Starting event-first camera monitoring"
time="2025-10-04 22:12:05" level=info msg="Camera reconcile loop started"
time="2025-10-04 22:12:05" level=info msg="Device event loop started"
    camera_asserters_test.go:159: ✅ Monitor is ready
time="2025-10-04 22:12:05" level=info msg="Stopping hybrid camera monitor"
time="2025-10-04 22:12:05" level=info msg="Event loop stopped"
time="2025-10-04 22:12:05" level=info msg="Camera reconcile loop stopped due to context cancellation"
time="2025-10-04 22:12:05" level=info msg="Device event loop stopped due to context cancellation"
time="2025-10-04 22:12:05" level=info msg="Stopped fsnotify device event source"
time="2025-10-04 22:12:05" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:12:05" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:12:05" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:12:05" level=info msg="Hybrid camera monitor stopped"
    camera_asserters_test.go:147: ✅ Monitor stopped successfully
    camera_lifecycle_test.go:67: ✅ State transition behavior validated
--- PASS: TestCameraLifecycle_StateTransitions_ReqCAM001_Success (0.10s)
=== RUN   TestCameraLifecycle_EventGeneration_ReqCAM001_Success
time="2025-10-04 22:12:05" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:05" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:05" level=info msg="Created fresh device event source instance with smart selection"
time="2025-10-04 22:12:05" level=info msg="Starting hybrid camera monitor"
time="2025-10-04 22:12:05" level=info msg="Starting device event source"
time="2025-10-04 22:12:05" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:05" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:12:05" level=info msg="Device event source started successfully"
time="2025-10-04 22:12:05" level=info msg="Running in event-first mode with fsnotify support"
time="2025-10-04 22:12:05" level=info msg="Bounded worker pool started"
time="2025-10-04 22:12:05" level=info msg="Spawning monitor loops"
time="2025-10-04 22:12:05" level=info msg="Monitor start completed successfully"
    progressive_readiness.go:52: ✅ Monitor Start succeeded immediately - Progressive Readiness working
    camera_asserters_test.go:133: ✅ PROGRESSIVE READINESS: Monitor start succeeded immediately
time="2025-10-04 22:12:05" level=info msg="Starting seed discovery"
time="2025-10-04 22:12:05" level=info msg="Error checking device"
time="2025-10-04 22:12:05" level=warning msg="Device check error occurred"
time="2025-10-04 22:12:05" level=info msg="New V4L2 device discovered"
time="2025-10-04 22:12:05" level=info msg="Seed discovery completed"
time="2025-10-04 22:12:05" level=info msg="Monitor is now ready"
time="2025-10-04 22:12:05" level=info msg="Starting event-first camera monitoring"
time="2025-10-04 22:12:05" level=info msg="Camera reconcile loop started"
time="2025-10-04 22:12:05" level=info msg="Device event loop started"
    camera_asserters_test.go:159: ✅ Monitor is ready
    camera_lifecycle_test.go:82: Event generation test discovered 1 devices
    camera_lifecycle_test.go:86: Testing device lifecycle for: /dev/video0
time="2025-10-04 22:12:05" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:05" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:05" level=info msg="Created fresh device event source instance with smart selection"
time="2025-10-04 22:12:05" level=info msg="Starting hybrid camera monitor"
time="2025-10-04 22:12:05" level=info msg="Starting device event source"
time="2025-10-04 22:12:05" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:05" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:12:05" level=info msg="Device event source started successfully"
time="2025-10-04 22:12:05" level=info msg="Running in event-first mode with fsnotify support"
time="2025-10-04 22:12:05" level=info msg="Bounded worker pool started"
time="2025-10-04 22:12:05" level=info msg="Spawning monitor loops"
time="2025-10-04 22:12:05" level=info msg="Monitor start completed successfully"
    progressive_readiness.go:52: ✅ Monitor Start succeeded immediately - Progressive Readiness working
    camera_asserters_test.go:133: ✅ PROGRESSIVE READINESS: Monitor start succeeded immediately
time="2025-10-04 22:12:05" level=info msg="Starting seed discovery"
time="2025-10-04 22:12:05" level=info msg="Error checking device"
time="2025-10-04 22:12:05" level=warning msg="Device check error occurred"
time="2025-10-04 22:12:05" level=info msg="New V4L2 device discovered"
time="2025-10-04 22:12:05" level=info msg="Seed discovery completed"
time="2025-10-04 22:12:05" level=info msg="Monitor is now ready"
time="2025-10-04 22:12:05" level=info msg="Starting event-first camera monitoring"
time="2025-10-04 22:12:05" level=info msg="Camera reconcile loop started"
time="2025-10-04 22:12:05" level=info msg="Device event loop started"
    camera_asserters_test.go:159: ✅ Monitor is ready
    progressive_readiness.go:52: ✅ ProbeDeviceCapabilities succeeded immediately - Progressive Readiness working
    camera_asserters_test.go:250: ✅ PROGRESSIVE READINESS: Capability probing succeeded immediately
    camera_asserters_test.go:259: ✅ Device capabilities validated: 9 capabilities, card: USB 2.0 Camera: USB 2.0 Camera
    camera_lifecycle_test.go:96: Device /dev/video0 has capabilities: &{DriverName:uvcvideo CardName:USB 2.0 Camera: USB 2.0 Camera BusInfo:usb-0000:00:1a.0-1.2 Version:6.14.11 Capabilities:[0x84a00001 Video Capture Metadata Capture Streaming Extended Pix Format Device Capabilities Video Capture Streaming Extended Pix Format] DeviceCaps:[0x04200001 Video Capture Streaming Extended Pix Format]}
    camera_lifecycle_test.go:100: Device /dev/video0 has capabilities: {DriverName:uvcvideo CardName:USB 2.0 Camera: USB 2.0 Camera BusInfo:usb-0000:00:1a.0-1.2 Version:6.14.11 Capabilities:[0x84a00001 Video Capture Metadata Capture Streaming Extended Pix Format Device Capabilities Video Capture Streaming Extended Pix Format] DeviceCaps:[0x04200001 Video Capture Streaming Extended Pix Format]}
    camera_lifecycle_test.go:104: ✅ Event generation during lifecycle validated
time="2025-10-04 22:12:05" level=info msg="Stopping hybrid camera monitor"
time="2025-10-04 22:12:05" level=info msg="Device event loop stopped due to context cancellation"
time="2025-10-04 22:12:05" level=info msg="Event loop stopped"
time="2025-10-04 22:12:05" level=info msg="Camera reconcile loop stopped due to context cancellation"
time="2025-10-04 22:12:05" level=info msg="Stopped fsnotify device event source"
time="2025-10-04 22:12:05" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:12:05" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:12:05" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:12:05" level=info msg="Hybrid camera monitor stopped"
--- PASS: TestCameraLifecycle_EventGeneration_ReqCAM001_Success (0.30s)
=== RUN   TestCameraLifecycle_MultipleStartStop_ReqCAM001_Success
time="2025-10-04 22:12:05" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:05" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:05" level=info msg="Created fresh device event source instance with smart selection"
    camera_lifecycle_test.go:115: Testing lifecycle cycle 1
time="2025-10-04 22:12:05" level=info msg="Starting hybrid camera monitor"
time="2025-10-04 22:12:05" level=info msg="Starting device event source"
time="2025-10-04 22:12:05" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:05" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:12:05" level=info msg="Device event source started successfully"
time="2025-10-04 22:12:05" level=info msg="Running in event-first mode with fsnotify support"
time="2025-10-04 22:12:05" level=info msg="Bounded worker pool started"
time="2025-10-04 22:12:05" level=info msg="Spawning monitor loops"
time="2025-10-04 22:12:05" level=info msg="Monitor start completed successfully"
    progressive_readiness.go:52: ✅ Monitor Start succeeded immediately - Progressive Readiness working
    camera_asserters_test.go:133: ✅ PROGRESSIVE READINESS: Monitor start succeeded immediately
time="2025-10-04 22:12:05" level=info msg="Starting seed discovery"
time="2025-10-04 22:12:05" level=info msg="Error checking device"
time="2025-10-04 22:12:05" level=warning msg="Device check error occurred"
time="2025-10-04 22:12:05" level=info msg="New V4L2 device discovered"
time="2025-10-04 22:12:05" level=info msg="Seed discovery completed"
time="2025-10-04 22:12:05" level=info msg="Monitor is now ready"
time="2025-10-04 22:12:05" level=info msg="Starting event-first camera monitoring"
time="2025-10-04 22:12:05" level=info msg="Camera reconcile loop started"
time="2025-10-04 22:12:05" level=info msg="Device event loop started"
    camera_asserters_test.go:159: ✅ Monitor is ready
time="2025-10-04 22:12:05" level=info msg="Stopping hybrid camera monitor"
time="2025-10-04 22:12:05" level=info msg="Device event loop stopped due to context cancellation"
time="2025-10-04 22:12:05" level=info msg="Camera reconcile loop stopped due to context cancellation"
time="2025-10-04 22:12:05" level=info msg="Event loop stopped"
time="2025-10-04 22:12:05" level=info msg="Stopped fsnotify device event source"
time="2025-10-04 22:12:05" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:12:05" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:12:05" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:12:05" level=info msg="Hybrid camera monitor stopped"
    camera_asserters_test.go:147: ✅ Monitor stopped successfully
    camera_lifecycle_test.go:115: Testing lifecycle cycle 2
time="2025-10-04 22:12:05" level=info msg="Starting hybrid camera monitor"
time="2025-10-04 22:12:05" level=info msg="Starting device event source"
time="2025-10-04 22:12:05" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:05" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:12:05" level=info msg="Device event source started successfully"
time="2025-10-04 22:12:05" level=info msg="Running in event-first mode with fsnotify support"
time="2025-10-04 22:12:05" level=info msg="Bounded worker pool started"
time="2025-10-04 22:12:05" level=info msg="Spawning monitor loops"
time="2025-10-04 22:12:05" level=info msg="Monitor start completed successfully"
    progressive_readiness.go:52: ✅ Monitor Start succeeded immediately - Progressive Readiness working
    camera_asserters_test.go:133: ✅ PROGRESSIVE READINESS: Monitor start succeeded immediately
time="2025-10-04 22:12:05" level=info msg="Starting seed discovery"
time="2025-10-04 22:12:05" level=info msg="Error checking device"
time="2025-10-04 22:12:05" level=warning msg="Device check error occurred"
time="2025-10-04 22:12:05" level=info msg="Seed discovery completed"
time="2025-10-04 22:12:05" level=info msg="Monitor is now ready"
time="2025-10-04 22:12:05" level=info msg="Starting event-first camera monitoring"
time="2025-10-04 22:12:05" level=info msg="Camera reconcile loop started"
time="2025-10-04 22:12:05" level=info msg="Device event loop started"
    camera_asserters_test.go:159: ✅ Monitor is ready
time="2025-10-04 22:12:05" level=info msg="Stopping hybrid camera monitor"
time="2025-10-04 22:12:05" level=info msg="Device event loop stopped due to context cancellation"
time="2025-10-04 22:12:05" level=info msg="Event loop stopped"
time="2025-10-04 22:12:05" level=info msg="Camera reconcile loop stopped due to context cancellation"
time="2025-10-04 22:12:05" level=info msg="Stopped fsnotify device event source"
time="2025-10-04 22:12:05" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:12:05" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:12:05" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:12:05" level=info msg="Hybrid camera monitor stopped"
    camera_asserters_test.go:147: ✅ Monitor stopped successfully
    camera_lifecycle_test.go:115: Testing lifecycle cycle 3
time="2025-10-04 22:12:05" level=info msg="Starting hybrid camera monitor"
time="2025-10-04 22:12:05" level=info msg="Starting device event source"
time="2025-10-04 22:12:05" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:05" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:12:05" level=info msg="Device event source started successfully"
time="2025-10-04 22:12:05" level=info msg="Running in event-first mode with fsnotify support"
time="2025-10-04 22:12:05" level=info msg="Bounded worker pool started"
time="2025-10-04 22:12:05" level=info msg="Spawning monitor loops"
time="2025-10-04 22:12:05" level=info msg="Monitor start completed successfully"
    progressive_readiness.go:52: ✅ Monitor Start succeeded immediately - Progressive Readiness working
    camera_asserters_test.go:133: ✅ PROGRESSIVE READINESS: Monitor start succeeded immediately
time="2025-10-04 22:12:05" level=info msg="Starting seed discovery"
time="2025-10-04 22:12:05" level=info msg="Error checking device"
time="2025-10-04 22:12:05" level=warning msg="Device check error occurred"
time="2025-10-04 22:12:05" level=info msg="Seed discovery completed"
time="2025-10-04 22:12:05" level=info msg="Monitor is now ready"
time="2025-10-04 22:12:05" level=info msg="Starting event-first camera monitoring"
time="2025-10-04 22:12:05" level=info msg="Camera reconcile loop started"
time="2025-10-04 22:12:05" level=info msg="Device event loop started"
    camera_asserters_test.go:159: ✅ Monitor is ready
time="2025-10-04 22:12:05" level=info msg="Stopping hybrid camera monitor"
time="2025-10-04 22:12:05" level=info msg="Event loop stopped"
time="2025-10-04 22:12:05" level=info msg="Camera reconcile loop stopped due to context cancellation"
time="2025-10-04 22:12:05" level=info msg="Device event loop stopped due to context cancellation"
time="2025-10-04 22:12:05" level=info msg="Stopped fsnotify device event source"
time="2025-10-04 22:12:05" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:12:05" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:12:05" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:12:05" level=info msg="Hybrid camera monitor stopped"
    camera_asserters_test.go:147: ✅ Monitor stopped successfully
    camera_lifecycle_test.go:130: ✅ Multiple start/stop cycles validated
--- PASS: TestCameraLifecycle_MultipleStartStop_ReqCAM001_Success (0.31s)
=== RUN   TestCameraLifecycle_ConcurrentLifecycle_ReqCAM001_Success
    camera_lifecycle_test.go:135: Skipping due to test infrastructure issue - monitor already running
--- SKIP: TestCameraLifecycle_ConcurrentLifecycle_ReqCAM001_Success (0.00s)
=== RUN   TestCameraLifecycle_ErrorRecovery_ReqCAM001_Success
time="2025-10-04 22:12:05" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:05" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:05" level=info msg="Created fresh device event source instance with smart selection"
    camera_lifecycle_test.go:198: Testing error recovery attempt 1
time="2025-10-04 22:12:05" level=info msg="Starting hybrid camera monitor"
time="2025-10-04 22:12:05" level=info msg="Starting device event source"
time="2025-10-04 22:12:05" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:05" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:12:05" level=info msg="Device event source started successfully"
time="2025-10-04 22:12:05" level=info msg="Running in event-first mode with fsnotify support"
time="2025-10-04 22:12:05" level=info msg="Bounded worker pool started"
time="2025-10-04 22:12:05" level=info msg="Spawning monitor loops"
time="2025-10-04 22:12:05" level=info msg="Monitor start completed successfully"
    progressive_readiness.go:52: ✅ Monitor Start succeeded immediately - Progressive Readiness working
    camera_asserters_test.go:133: ✅ PROGRESSIVE READINESS: Monitor start succeeded immediately
time="2025-10-04 22:12:05" level=info msg="Starting seed discovery"
time="2025-10-04 22:12:05" level=info msg="Error checking device"
time="2025-10-04 22:12:05" level=warning msg="Device check error occurred"
time="2025-10-04 22:12:05" level=info msg="New V4L2 device discovered"
time="2025-10-04 22:12:05" level=info msg="Seed discovery completed"
time="2025-10-04 22:12:05" level=info msg="Monitor is now ready"
time="2025-10-04 22:12:05" level=info msg="Starting event-first camera monitoring"
time="2025-10-04 22:12:05" level=info msg="Camera reconcile loop started"
time="2025-10-04 22:12:05" level=info msg="Device event loop started"
    camera_asserters_test.go:159: ✅ Monitor is ready
time="2025-10-04 22:12:06" level=info msg="Stopping hybrid camera monitor"
time="2025-10-04 22:12:06" level=info msg="Device event loop stopped due to context cancellation"
time="2025-10-04 22:12:06" level=info msg="Camera reconcile loop stopped due to context cancellation"
time="2025-10-04 22:12:06" level=info msg="Event loop stopped"
time="2025-10-04 22:12:06" level=info msg="Stopped fsnotify device event source"
time="2025-10-04 22:12:06" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:12:06" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:12:06" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:12:06" level=info msg="Hybrid camera monitor stopped"
    camera_asserters_test.go:147: ✅ Monitor stopped successfully
    camera_lifecycle_test.go:198: Testing error recovery attempt 2
time="2025-10-04 22:12:06" level=info msg="Starting hybrid camera monitor"
time="2025-10-04 22:12:06" level=info msg="Starting device event source"
time="2025-10-04 22:12:06" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:06" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:12:06" level=info msg="Device event source started successfully"
time="2025-10-04 22:12:06" level=info msg="Running in event-first mode with fsnotify support"
time="2025-10-04 22:12:06" level=info msg="Bounded worker pool started"
time="2025-10-04 22:12:06" level=info msg="Spawning monitor loops"
time="2025-10-04 22:12:06" level=info msg="Monitor start completed successfully"
time="2025-10-04 22:12:06" level=info msg="Starting seed discovery"
    progressive_readiness.go:52: ✅ Monitor Start succeeded immediately - Progressive Readiness working
    camera_asserters_test.go:133: ✅ PROGRESSIVE READINESS: Monitor start succeeded immediately
time="2025-10-04 22:12:06" level=info msg="Error checking device"
time="2025-10-04 22:12:06" level=warning msg="Device check error occurred"
time="2025-10-04 22:12:06" level=info msg="Seed discovery completed"
time="2025-10-04 22:12:06" level=info msg="Monitor is now ready"
time="2025-10-04 22:12:06" level=info msg="Starting event-first camera monitoring"
time="2025-10-04 22:12:06" level=info msg="Camera reconcile loop started"
time="2025-10-04 22:12:06" level=info msg="Device event loop started"
    camera_asserters_test.go:159: ✅ Monitor is ready
time="2025-10-04 22:12:06" level=info msg="Stopping hybrid camera monitor"
time="2025-10-04 22:12:06" level=info msg="Event loop stopped"
time="2025-10-04 22:12:06" level=info msg="Camera reconcile loop stopped due to context cancellation"
time="2025-10-04 22:12:06" level=info msg="Device event loop stopped due to context cancellation"
time="2025-10-04 22:12:06" level=info msg="Stopped fsnotify device event source"
time="2025-10-04 22:12:06" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:12:06" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:12:06" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:12:06" level=info msg="Hybrid camera monitor stopped"
    camera_asserters_test.go:147: ✅ Monitor stopped successfully
    camera_lifecycle_test.go:198: Testing error recovery attempt 3
time="2025-10-04 22:12:06" level=info msg="Starting hybrid camera monitor"
time="2025-10-04 22:12:06" level=info msg="Starting device event source"
time="2025-10-04 22:12:06" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:06" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:12:06" level=info msg="Device event source started successfully"
time="2025-10-04 22:12:06" level=info msg="Running in event-first mode with fsnotify support"
time="2025-10-04 22:12:06" level=info msg="Bounded worker pool started"
time="2025-10-04 22:12:06" level=info msg="Spawning monitor loops"
time="2025-10-04 22:12:06" level=info msg="Monitor start completed successfully"
    progressive_readiness.go:52: ✅ Monitor Start succeeded immediately - Progressive Readiness working
    camera_asserters_test.go:133: ✅ PROGRESSIVE READINESS: Monitor start succeeded immediately
time="2025-10-04 22:12:06" level=info msg="Starting seed discovery"
time="2025-10-04 22:12:06" level=info msg="Error checking device"
time="2025-10-04 22:12:06" level=warning msg="Device check error occurred"
time="2025-10-04 22:12:06" level=info msg="Seed discovery completed"
time="2025-10-04 22:12:06" level=info msg="Monitor is now ready"
time="2025-10-04 22:12:06" level=info msg="Starting event-first camera monitoring"
time="2025-10-04 22:12:06" level=info msg="Camera reconcile loop started"
time="2025-10-04 22:12:06" level=info msg="Device event loop started"
    camera_asserters_test.go:159: ✅ Monitor is ready
time="2025-10-04 22:12:06" level=info msg="Stopping hybrid camera monitor"
time="2025-10-04 22:12:06" level=info msg="Device event loop stopped due to context cancellation"
time="2025-10-04 22:12:06" level=info msg="Camera reconcile loop stopped due to context cancellation"
time="2025-10-04 22:12:06" level=info msg="Event loop stopped"
time="2025-10-04 22:12:06" level=info msg="Stopped fsnotify device event source"
time="2025-10-04 22:12:06" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:12:06" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:12:06" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:12:06" level=info msg="Hybrid camera monitor stopped"
    camera_asserters_test.go:147: ✅ Monitor stopped successfully
    camera_lifecycle_test.go:211: ✅ Error recovery during lifecycle validated
--- PASS: TestCameraLifecycle_ErrorRecovery_ReqCAM001_Success (0.31s)
=== RUN   TestCameraMonitor_Basic_ReqCAM001_Success_Refactored
time="2025-10-04 22:12:06" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:06" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:06" level=info msg="Created fresh device event source instance with smart selection"
    camera_monitor_basic_test.go:42: ✅ Basic monitor functionality validated
--- PASS: TestCameraMonitor_Basic_ReqCAM001_Success_Refactored (0.00s)
=== RUN   TestCameraMonitor_StartStop_ReqCAM001_Success_Refactored
time="2025-10-04 22:12:06" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:06" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:06" level=info msg="Created fresh device event source instance with smart selection"
time="2025-10-04 22:12:06" level=info msg="Starting hybrid camera monitor"
time="2025-10-04 22:12:06" level=info msg="Starting device event source"
time="2025-10-04 22:12:06" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:06" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:12:06" level=info msg="Device event source started successfully"
time="2025-10-04 22:12:06" level=info msg="Running in event-first mode with fsnotify support"
time="2025-10-04 22:12:06" level=info msg="Bounded worker pool started"
time="2025-10-04 22:12:06" level=info msg="Spawning monitor loops"
time="2025-10-04 22:12:06" level=info msg="Monitor start completed successfully"
    progressive_readiness.go:52: ✅ Monitor Start succeeded immediately - Progressive Readiness working
    camera_asserters_test.go:133: ✅ PROGRESSIVE READINESS: Monitor start succeeded immediately
time="2025-10-04 22:12:06" level=info msg="Stopping hybrid camera monitor"
time="2025-10-04 22:12:06" level=info msg="Starting seed discovery"
time="2025-10-04 22:12:06" level=info msg="Event loop stopped"
time="2025-10-04 22:12:06" level=info msg="Error checking device"
time="2025-10-04 22:12:06" level=info msg="Failed to probe device capabilities"
time="2025-10-04 22:12:06" level=warning msg="Device check error occurred"
time="2025-10-04 22:12:06" level=info msg="New V4L2 device discovered"
time="2025-10-04 22:12:06" level=info msg="Seed discovery completed"
time="2025-10-04 22:12:06" level=info msg="Monitor is now ready"
time="2025-10-04 22:12:06" level=info msg="Starting event-first camera monitoring"
time="2025-10-04 22:12:06" level=info msg="Device event loop started"
time="2025-10-04 22:12:06" level=info msg="Camera reconcile loop started"
time="2025-10-04 22:12:06" level=info msg="Camera reconcile loop stopped due to context cancellation"
time="2025-10-04 22:12:06" level=info msg="Stopped fsnotify device event source"
time="2025-10-04 22:12:06" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:12:06" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:12:06" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:12:06" level=info msg="Hybrid camera monitor stopped"
    camera_asserters_test.go:147: ✅ Monitor stopped successfully
    camera_monitor_basic_test.go:66: ✅ Start/stop lifecycle validated
--- PASS: TestCameraMonitor_StartStop_ReqCAM001_Success_Refactored (0.00s)
=== RUN   TestCameraMonitor_Readiness_ReqCAM001_Success_Refactored
time="2025-10-04 22:12:06" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:06" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:06" level=info msg="Created fresh device event source instance with smart selection"
time="2025-10-04 22:12:06" level=info msg="Starting hybrid camera monitor"
time="2025-10-04 22:12:06" level=info msg="Starting device event source"
time="2025-10-04 22:12:06" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:06" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:12:06" level=info msg="Device event source started successfully"
time="2025-10-04 22:12:06" level=info msg="Running in event-first mode with fsnotify support"
time="2025-10-04 22:12:06" level=info msg="Bounded worker pool started"
time="2025-10-04 22:12:06" level=info msg="Spawning monitor loops"
time="2025-10-04 22:12:06" level=info msg="Monitor start completed successfully"
    progressive_readiness.go:52: ✅ Monitor Start succeeded immediately - Progressive Readiness working
    camera_asserters_test.go:133: ✅ PROGRESSIVE READINESS: Monitor start succeeded immediately
time="2025-10-04 22:12:06" level=info msg="Starting seed discovery"
time="2025-10-04 22:12:06" level=info msg="Error checking device"
time="2025-10-04 22:12:06" level=warning msg="Device check error occurred"
time="2025-10-04 22:12:06" level=info msg="New V4L2 device discovered"
time="2025-10-04 22:12:06" level=info msg="Seed discovery completed"
time="2025-10-04 22:12:06" level=info msg="Monitor is now ready"
time="2025-10-04 22:12:06" level=info msg="Starting event-first camera monitoring"
time="2025-10-04 22:12:06" level=info msg="Camera reconcile loop started"
time="2025-10-04 22:12:06" level=info msg="Device event loop started"
    camera_asserters_test.go:159: ✅ Monitor is ready
    camera_monitor_basic_test.go:88: ✅ Readiness functionality validated
time="2025-10-04 22:12:06" level=info msg="Stopping hybrid camera monitor"
time="2025-10-04 22:12:06" level=info msg="Device event loop stopped due to context cancellation"
time="2025-10-04 22:12:06" level=info msg="Event loop stopped"
time="2025-10-04 22:12:06" level=info msg="Camera reconcile loop stopped due to context cancellation"
time="2025-10-04 22:12:06" level=info msg="Stopped fsnotify device event source"
time="2025-10-04 22:12:06" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:12:06" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:12:06" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:12:06" level=info msg="Hybrid camera monitor stopped"
--- PASS: TestCameraMonitor_Readiness_ReqCAM001_Success_Refactored (0.20s)
=== RUN   TestCameraMonitor_DeviceDiscovery_ReqCAM001_Success_Refactored
time="2025-10-04 22:12:06" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:06" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:06" level=info msg="Created fresh device event source instance with smart selection"
time="2025-10-04 22:12:06" level=info msg="Starting hybrid camera monitor"
time="2025-10-04 22:12:06" level=info msg="Starting device event source"
time="2025-10-04 22:12:06" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:06" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:12:06" level=info msg="Device event source started successfully"
time="2025-10-04 22:12:06" level=info msg="Running in event-first mode with fsnotify support"
time="2025-10-04 22:12:06" level=info msg="Bounded worker pool started"
time="2025-10-04 22:12:06" level=info msg="Spawning monitor loops"
time="2025-10-04 22:12:06" level=info msg="Monitor start completed successfully"
    progressive_readiness.go:52: ✅ Monitor Start succeeded immediately - Progressive Readiness working
time="2025-10-04 22:12:06" level=info msg="Starting seed discovery"
    camera_asserters_test.go:133: ✅ PROGRESSIVE READINESS: Monitor start succeeded immediately
time="2025-10-04 22:12:06" level=info msg="Error checking device"
time="2025-10-04 22:12:06" level=warning msg="Device check error occurred"
time="2025-10-04 22:12:06" level=info msg="New V4L2 device discovered"
time="2025-10-04 22:12:06" level=info msg="Seed discovery completed"
time="2025-10-04 22:12:06" level=info msg="Monitor is now ready"
time="2025-10-04 22:12:06" level=info msg="Starting event-first camera monitoring"
time="2025-10-04 22:12:06" level=info msg="Camera reconcile loop started"
time="2025-10-04 22:12:06" level=info msg="Device event loop started"
    camera_asserters_test.go:159: ✅ Monitor is ready
    camera_asserters_test.go:194: ✅ Device discovery completed: 1 devices found
    camera_monitor_basic_test.go:104: ✅ Device discovery completed: 1 devices found
time="2025-10-04 22:12:06" level=info msg="Stopping hybrid camera monitor"
time="2025-10-04 22:12:06" level=info msg="Camera reconcile loop stopped due to context cancellation"
time="2025-10-04 22:12:06" level=info msg="Device event loop stopped due to context cancellation"
time="2025-10-04 22:12:06" level=info msg="Event loop stopped"
time="2025-10-04 22:12:06" level=info msg="Stopped fsnotify device event source"
time="2025-10-04 22:12:06" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:12:06" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:12:06" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:12:06" level=info msg="Hybrid camera monitor stopped"
--- PASS: TestCameraMonitor_DeviceDiscovery_ReqCAM001_Success_Refactored (0.20s)
=== RUN   TestCameraMonitor_DeviceCapabilities_ReqCAM002_Success_Refactored
time="2025-10-04 22:12:06" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:06" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:06" level=info msg="Created fresh device event source instance with smart selection"
time="2025-10-04 22:12:06" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:06" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:06" level=info msg="Created fresh device event source instance with smart selection"
time="2025-10-04 22:12:06" level=info msg="Starting hybrid camera monitor"
time="2025-10-04 22:12:06" level=info msg="Starting device event source"
time="2025-10-04 22:12:06" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:06" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:12:06" level=info msg="Device event source started successfully"
time="2025-10-04 22:12:06" level=info msg="Running in event-first mode with fsnotify support"
time="2025-10-04 22:12:06" level=info msg="Bounded worker pool started"
time="2025-10-04 22:12:06" level=info msg="Spawning monitor loops"
time="2025-10-04 22:12:06" level=info msg="Monitor start completed successfully"
    progressive_readiness.go:52: ✅ Monitor Start succeeded immediately - Progressive Readiness working
    camera_asserters_test.go:133: ✅ PROGRESSIVE READINESS: Monitor start succeeded immediately
time="2025-10-04 22:12:06" level=info msg="Starting seed discovery"
time="2025-10-04 22:12:06" level=info msg="Error checking device"
time="2025-10-04 22:12:06" level=warning msg="Device check error occurred"
time="2025-10-04 22:12:06" level=info msg="New V4L2 device discovered"
time="2025-10-04 22:12:06" level=info msg="Seed discovery completed"
time="2025-10-04 22:12:06" level=info msg="Monitor is now ready"
time="2025-10-04 22:12:06" level=info msg="Starting event-first camera monitoring"
time="2025-10-04 22:12:06" level=info msg="Camera reconcile loop started"
time="2025-10-04 22:12:06" level=info msg="Device event loop started"
    camera_asserters_test.go:159: ✅ Monitor is ready
    camera_asserters_test.go:194: ✅ Device discovery completed: 1 devices found
time="2025-10-04 22:12:06" level=info msg="Starting hybrid camera monitor"
time="2025-10-04 22:12:06" level=info msg="Starting device event source"
time="2025-10-04 22:12:06" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:06" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:12:06" level=info msg="Device event source started successfully"
time="2025-10-04 22:12:06" level=info msg="Running in event-first mode with fsnotify support"
time="2025-10-04 22:12:06" level=info msg="Bounded worker pool started"
time="2025-10-04 22:12:06" level=info msg="Spawning monitor loops"
time="2025-10-04 22:12:06" level=info msg="Monitor start completed successfully"
    progressive_readiness.go:52: ✅ Monitor Start succeeded immediately - Progressive Readiness working
    camera_asserters_test.go:133: ✅ PROGRESSIVE READINESS: Monitor start succeeded immediately
time="2025-10-04 22:12:06" level=info msg="Starting seed discovery"
time="2025-10-04 22:12:06" level=info msg="Error checking device"
time="2025-10-04 22:12:06" level=warning msg="Device check error occurred"
time="2025-10-04 22:12:06" level=info msg="New V4L2 device discovered"
time="2025-10-04 22:12:06" level=info msg="Seed discovery completed"
time="2025-10-04 22:12:06" level=info msg="Monitor is now ready"
time="2025-10-04 22:12:06" level=info msg="Starting event-first camera monitoring"
time="2025-10-04 22:12:06" level=info msg="Camera reconcile loop started"
time="2025-10-04 22:12:06" level=info msg="Device event loop started"
    camera_asserters_test.go:159: ✅ Monitor is ready
    progressive_readiness.go:52: ✅ ProbeDeviceCapabilities succeeded immediately - Progressive Readiness working
    camera_asserters_test.go:250: ✅ PROGRESSIVE READINESS: Capability probing succeeded immediately
    camera_asserters_test.go:259: ✅ Device capabilities validated: 9 capabilities, card: USB 2.0 Camera: USB 2.0 Camera
    camera_monitor_basic_test.go:137: ✅ Device capabilities validated: 9 capabilities
time="2025-10-04 22:12:06" level=info msg="Stopping hybrid camera monitor"
time="2025-10-04 22:12:06" level=info msg="Camera reconcile loop stopped due to context cancellation"
time="2025-10-04 22:12:06" level=info msg="Event loop stopped"
time="2025-10-04 22:12:06" level=info msg="Device event loop stopped due to context cancellation"
time="2025-10-04 22:12:06" level=info msg="Stopped fsnotify device event source"
time="2025-10-04 22:12:06" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:12:06" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:12:06" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:12:06" level=info msg="Hybrid camera monitor stopped"
time="2025-10-04 22:12:06" level=info msg="Stopping hybrid camera monitor"
time="2025-10-04 22:12:06" level=info msg="Device event loop stopped due to context cancellation"
time="2025-10-04 22:12:06" level=info msg="Event loop stopped"
time="2025-10-04 22:12:06" level=info msg="Camera reconcile loop stopped due to context cancellation"
time="2025-10-04 22:12:06" level=info msg="Stopped fsnotify device event source"
time="2025-10-04 22:12:06" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:12:06" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:12:06" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:12:06" level=info msg="Hybrid camera monitor stopped"
--- PASS: TestCameraMonitor_DeviceCapabilities_ReqCAM002_Success_Refactored (0.41s)
=== RUN   TestCameraMonitor_CompleteLifecycle_ReqCAM001_Success_Refactored
time="2025-10-04 22:12:07" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:07" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:07" level=info msg="Created fresh device event source instance with smart selection"
time="2025-10-04 22:12:07" level=info msg="Starting hybrid camera monitor"
time="2025-10-04 22:12:07" level=info msg="Starting device event source"
time="2025-10-04 22:12:07" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:07" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:12:07" level=info msg="Device event source started successfully"
time="2025-10-04 22:12:07" level=info msg="Running in event-first mode with fsnotify support"
time="2025-10-04 22:12:07" level=info msg="Bounded worker pool started"
time="2025-10-04 22:12:07" level=info msg="Spawning monitor loops"
time="2025-10-04 22:12:07" level=info msg="Monitor start completed successfully"
    progressive_readiness.go:52: ✅ Monitor Start succeeded immediately - Progressive Readiness working
time="2025-10-04 22:12:07" level=info msg="Starting seed discovery"
    camera_asserters_test.go:133: ✅ PROGRESSIVE READINESS: Monitor start succeeded immediately
time="2025-10-04 22:12:07" level=info msg="Error checking device"
time="2025-10-04 22:12:07" level=warning msg="Device check error occurred"
time="2025-10-04 22:12:07" level=info msg="New V4L2 device discovered"
time="2025-10-04 22:12:07" level=info msg="Seed discovery completed"
time="2025-10-04 22:12:07" level=info msg="Monitor is now ready"
time="2025-10-04 22:12:07" level=info msg="Starting event-first camera monitoring"
time="2025-10-04 22:12:07" level=info msg="Camera reconcile loop started"
time="2025-10-04 22:12:07" level=info msg="Device event loop started"
    camera_asserters_test.go:159: ✅ Monitor is ready
time="2025-10-04 22:12:07" level=info msg="Stopping hybrid camera monitor"
time="2025-10-04 22:12:07" level=info msg="Device event loop stopped due to context cancellation"
time="2025-10-04 22:12:07" level=info msg="Camera reconcile loop stopped due to context cancellation"
time="2025-10-04 22:12:07" level=info msg="Event loop stopped"
time="2025-10-04 22:12:07" level=info msg="Stopped fsnotify device event source"
time="2025-10-04 22:12:07" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:12:07" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:12:07" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:12:07" level=info msg="Hybrid camera monitor stopped"
    camera_asserters_test.go:147: ✅ Monitor stopped successfully
    camera_asserters_test.go:310: ✅ Complete lifecycle validated successfully
    camera_monitor_basic_test.go:151: ✅ Complete lifecycle validated
--- PASS: TestCameraMonitor_CompleteLifecycle_ReqCAM001_Success_Refactored (0.10s)
=== RUN   TestCameraMonitor_ErrorHandling_ReqCAM005_Success_Refactored
time="2025-10-04 22:12:07" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:07" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:07" level=info msg="Created fresh device event source instance with smart selection"
time="2025-10-04 22:12:07" level=info msg="Starting hybrid camera monitor"
time="2025-10-04 22:12:07" level=info msg="Starting device event source"
time="2025-10-04 22:12:07" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:07" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:12:07" level=info msg="Device event source started successfully"
time="2025-10-04 22:12:07" level=info msg="Running in event-first mode with fsnotify support"
time="2025-10-04 22:12:07" level=info msg="Bounded worker pool started"
time="2025-10-04 22:12:07" level=info msg="Spawning monitor loops"
time="2025-10-04 22:12:07" level=info msg="Monitor start completed successfully"
time="2025-10-04 22:12:07" level=info msg="Starting seed discovery"
    progressive_readiness.go:52: ✅ Monitor Start succeeded immediately - Progressive Readiness working
    camera_asserters_test.go:133: ✅ PROGRESSIVE READINESS: Monitor start succeeded immediately
time="2025-10-04 22:12:07" level=info msg="Error checking device"
time="2025-10-04 22:12:07" level=warning msg="Device check error occurred"
time="2025-10-04 22:12:07" level=info msg="New V4L2 device discovered"
time="2025-10-04 22:12:07" level=info msg="Seed discovery completed"
time="2025-10-04 22:12:07" level=info msg="Monitor is now ready"
time="2025-10-04 22:12:07" level=info msg="Starting event-first camera monitoring"
time="2025-10-04 22:12:07" level=info msg="Camera reconcile loop started"
time="2025-10-04 22:12:07" level=info msg="Device event loop started"
    camera_asserters_test.go:159: ✅ Monitor is ready
    camera_asserters_test.go:341: ✅ Invalid device correctly not found: /dev/nonexistent
    camera_monitor_basic_test.go:165: ✅ Error handling validated
time="2025-10-04 22:12:07" level=info msg="Stopping hybrid camera monitor"
time="2025-10-04 22:12:07" level=info msg="Event loop stopped"
time="2025-10-04 22:12:07" level=info msg="Device event loop stopped due to context cancellation"
time="2025-10-04 22:12:07" level=info msg="Camera reconcile loop stopped due to context cancellation"
time="2025-10-04 22:12:07" level=info msg="Stopped fsnotify device event source"
time="2025-10-04 22:12:07" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:12:07" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:12:07" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:12:07" level=info msg="Hybrid camera monitor stopped"
--- PASS: TestCameraMonitor_ErrorHandling_ReqCAM005_Success_Refactored (0.20s)
=== RUN   TestCameraMonitor_Performance_ReqCAM006_Success_Refactored
time="2025-10-04 22:12:07" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:07" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:07" level=info msg="Created fresh device event source instance with smart selection"
time="2025-10-04 22:12:07" level=info msg="Starting hybrid camera monitor"
time="2025-10-04 22:12:07" level=info msg="Starting device event source"
time="2025-10-04 22:12:07" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:07" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:12:07" level=info msg="Device event source started successfully"
time="2025-10-04 22:12:07" level=info msg="Running in event-first mode with fsnotify support"
time="2025-10-04 22:12:07" level=info msg="Bounded worker pool started"
time="2025-10-04 22:12:07" level=info msg="Spawning monitor loops"
time="2025-10-04 22:12:07" level=info msg="Monitor start completed successfully"
    progressive_readiness.go:52: ✅ Monitor Start succeeded immediately - Progressive Readiness working
    camera_asserters_test.go:133: ✅ PROGRESSIVE READINESS: Monitor start succeeded immediately
time="2025-10-04 22:12:07" level=info msg="Starting seed discovery"
time="2025-10-04 22:12:07" level=info msg="Error checking device"
time="2025-10-04 22:12:07" level=warning msg="Device check error occurred"
time="2025-10-04 22:12:07" level=info msg="New V4L2 device discovered"
time="2025-10-04 22:12:07" level=info msg="Seed discovery completed"
time="2025-10-04 22:12:07" level=info msg="Monitor is now ready"
time="2025-10-04 22:12:07" level=info msg="Starting event-first camera monitoring"
time="2025-10-04 22:12:07" level=info msg="Camera reconcile loop started"
time="2025-10-04 22:12:07" level=info msg="Device event loop started"
    camera_asserters_test.go:159: ✅ Monitor is ready
    camera_asserters_test.go:375: ✅ Startup performance validated: 100.668488ms (max: 3s)
time="2025-10-04 22:12:07" level=info msg="Stopping hybrid camera monitor"
time="2025-10-04 22:12:07" level=info msg="Device event loop stopped due to context cancellation"
time="2025-10-04 22:12:07" level=info msg="Camera reconcile loop stopped due to context cancellation"
time="2025-10-04 22:12:07" level=info msg="Event loop stopped"
time="2025-10-04 22:12:07" level=info msg="Stopped fsnotify device event source"
time="2025-10-04 22:12:07" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:12:07" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:12:07" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:12:07" level=info msg="Hybrid camera monitor stopped"
    camera_asserters_test.go:147: ✅ Monitor stopped successfully
    camera_asserters_test.go:388: ✅ Stop performance validated: 530.2µs (max: 2s)
    camera_monitor_basic_test.go:182: ✅ Performance validation completed
--- PASS: TestCameraMonitor_Performance_ReqCAM006_Success_Refactored (0.10s)
=== RUN   TestCameraMonitor_StateTransitions_ReqCAM001_Success_Refactored
time="2025-10-04 22:12:07" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:07" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:07" level=info msg="Created fresh device event source instance with smart selection"
time="2025-10-04 22:12:07" level=info msg="Starting hybrid camera monitor"
time="2025-10-04 22:12:07" level=info msg="Starting device event source"
time="2025-10-04 22:12:07" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:07" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:12:07" level=info msg="Device event source started successfully"
time="2025-10-04 22:12:07" level=info msg="Running in event-first mode with fsnotify support"
time="2025-10-04 22:12:07" level=info msg="Bounded worker pool started"
time="2025-10-04 22:12:07" level=info msg="Spawning monitor loops"
time="2025-10-04 22:12:07" level=info msg="Monitor start completed successfully"
time="2025-10-04 22:12:07" level=info msg="Starting seed discovery"
    progressive_readiness.go:52: ✅ Monitor Start succeeded immediately - Progressive Readiness working
    camera_asserters_test.go:133: ✅ PROGRESSIVE READINESS: Monitor start succeeded immediately
time="2025-10-04 22:12:07" level=info msg="Error checking device"
time="2025-10-04 22:12:07" level=warning msg="Device check error occurred"
time="2025-10-04 22:12:07" level=info msg="New V4L2 device discovered"
time="2025-10-04 22:12:07" level=info msg="Seed discovery completed"
time="2025-10-04 22:12:07" level=info msg="Monitor is now ready"
time="2025-10-04 22:12:07" level=info msg="Starting event-first camera monitoring"
time="2025-10-04 22:12:07" level=info msg="Camera reconcile loop started"
time="2025-10-04 22:12:07" level=info msg="Device event loop started"
    camera_asserters_test.go:159: ✅ Monitor is ready
time="2025-10-04 22:12:07" level=info msg="Stopping hybrid camera monitor"
time="2025-10-04 22:12:07" level=info msg="Camera reconcile loop stopped due to context cancellation"
time="2025-10-04 22:12:07" level=info msg="Event loop stopped"
time="2025-10-04 22:12:07" level=info msg="Device event loop stopped due to context cancellation"
time="2025-10-04 22:12:07" level=info msg="Stopped fsnotify device event source"
time="2025-10-04 22:12:07" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:12:07" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:12:07" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:12:07" level=info msg="Hybrid camera monitor stopped"
    camera_asserters_test.go:147: ✅ Monitor stopped successfully
    camera_monitor_basic_test.go:212: ✅ State transitions validated
--- PASS: TestCameraMonitor_StateTransitions_ReqCAM001_Success_Refactored (0.10s)
=== RUN   TestCameraMonitor_ConcurrentOperations_ReqCAM001_Success_Refactored
time="2025-10-04 22:12:07" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:07" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:07" level=info msg="Created fresh device event source instance with smart selection"
time="2025-10-04 22:12:07" level=info msg="Starting hybrid camera monitor"
time="2025-10-04 22:12:07" level=info msg="Starting device event source"
time="2025-10-04 22:12:07" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:07" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:12:07" level=info msg="Device event source started successfully"
time="2025-10-04 22:12:07" level=info msg="Running in event-first mode with fsnotify support"
time="2025-10-04 22:12:07" level=info msg="Bounded worker pool started"
time="2025-10-04 22:12:07" level=info msg="Spawning monitor loops"
time="2025-10-04 22:12:07" level=info msg="Monitor start completed successfully"
    progressive_readiness.go:52: ✅ Monitor Start succeeded immediately - Progressive Readiness working
time="2025-10-04 22:12:07" level=info msg="Starting seed discovery"
    camera_asserters_test.go:133: ✅ PROGRESSIVE READINESS: Monitor start succeeded immediately
time="2025-10-04 22:12:07" level=info msg="Error checking device"
time="2025-10-04 22:12:07" level=warning msg="Device check error occurred"
time="2025-10-04 22:12:07" level=info msg="New V4L2 device discovered"
time="2025-10-04 22:12:07" level=info msg="Seed discovery completed"
time="2025-10-04 22:12:07" level=info msg="Monitor is now ready"
time="2025-10-04 22:12:07" level=info msg="Starting event-first camera monitoring"
time="2025-10-04 22:12:07" level=info msg="Camera reconcile loop started"
time="2025-10-04 22:12:07" level=info msg="Device event loop started"
    camera_asserters_test.go:159: ✅ Monitor is ready
    camera_monitor_basic_test.go:234: ✅ Concurrent operations validated
time="2025-10-04 22:12:07" level=info msg="Stopping hybrid camera monitor"
time="2025-10-04 22:12:07" level=info msg="Camera reconcile loop stopped due to context cancellation"
time="2025-10-04 22:12:07" level=info msg="Event loop stopped"
time="2025-10-04 22:12:07" level=info msg="Device event loop stopped due to context cancellation"
time="2025-10-04 22:12:07" level=info msg="Stopped fsnotify device event source"
time="2025-10-04 22:12:07" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:12:07" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:12:07" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:12:07" level=info msg="Hybrid camera monitor stopped"
--- PASS: TestCameraMonitor_ConcurrentOperations_ReqCAM001_Success_Refactored (0.20s)
=== RUN   TestMinUtilityFunction_ReqCAM001_Success
time="2025-10-04 22:12:07" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:07" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:07" level=info msg="Created fresh device event source instance with smart selection"
time="2025-10-04 22:12:07" level=info msg="Starting hybrid camera monitor"
time="2025-10-04 22:12:07" level=info msg="Starting device event source"
time="2025-10-04 22:12:07" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:07" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:12:07" level=info msg="Device event source started successfully"
time="2025-10-04 22:12:07" level=info msg="Running in event-first mode with fsnotify support"
time="2025-10-04 22:12:07" level=info msg="Bounded worker pool started"
time="2025-10-04 22:12:07" level=info msg="Spawning monitor loops"
time="2025-10-04 22:12:07" level=info msg="Monitor start completed successfully"
time="2025-10-04 22:12:07" level=info msg="Starting seed discovery"
    progressive_readiness.go:52: ✅ Monitor Start succeeded immediately - Progressive Readiness working
    camera_asserters_test.go:133: ✅ PROGRESSIVE READINESS: Monitor start succeeded immediately
time="2025-10-04 22:12:07" level=info msg="Error checking device"
time="2025-10-04 22:12:07" level=warning msg="Device check error occurred"
time="2025-10-04 22:12:07" level=info msg="New V4L2 device discovered"
time="2025-10-04 22:12:07" level=info msg="Seed discovery completed"
time="2025-10-04 22:12:07" level=info msg="Monitor is now ready"
time="2025-10-04 22:12:07" level=info msg="Starting event-first camera monitoring"
time="2025-10-04 22:12:07" level=info msg="Camera reconcile loop started"
time="2025-10-04 22:12:07" level=info msg="Device event loop started"
    camera_asserters_test.go:159: ✅ Monitor is ready
    camera_monitor_basic_test.go:264: ✅ Min utility function exercised through polling interval calculations
time="2025-10-04 22:12:07" level=info msg="Stopping hybrid camera monitor"
time="2025-10-04 22:12:07" level=info msg="Device event loop stopped due to context cancellation"
time="2025-10-04 22:12:07" level=info msg="Event loop stopped"
time="2025-10-04 22:12:07" level=info msg="Camera reconcile loop stopped due to context cancellation"
time="2025-10-04 22:12:07" level=info msg="Stopped fsnotify device event source"
time="2025-10-04 22:12:07" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:12:07" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:12:07" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:12:07" level=info msg="Hybrid camera monitor stopped"
--- PASS: TestMinUtilityFunction_ReqCAM001_Success (0.30s)
=== RUN   TestProcessEventFunction_ReqCAM001_Success
time="2025-10-04 22:12:08" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:08" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:08" level=info msg="Created fresh device event source instance with smart selection"
time="2025-10-04 22:12:08" level=info msg="Starting hybrid camera monitor"
time="2025-10-04 22:12:08" level=info msg="Starting device event source"
time="2025-10-04 22:12:08" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:08" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:12:08" level=info msg="Device event source started successfully"
time="2025-10-04 22:12:08" level=info msg="Running in event-first mode with fsnotify support"
time="2025-10-04 22:12:08" level=info msg="Bounded worker pool started"
time="2025-10-04 22:12:08" level=info msg="Spawning monitor loops"
time="2025-10-04 22:12:08" level=info msg="Monitor start completed successfully"
    progressive_readiness.go:52: ✅ Monitor Start succeeded immediately - Progressive Readiness working
    camera_asserters_test.go:133: ✅ PROGRESSIVE READINESS: Monitor start succeeded immediately
time="2025-10-04 22:12:08" level=info msg="Starting seed discovery"
time="2025-10-04 22:12:08" level=info msg="Error checking device"
time="2025-10-04 22:12:08" level=warning msg="Device check error occurred"
time="2025-10-04 22:12:08" level=info msg="New V4L2 device discovered"
time="2025-10-04 22:12:08" level=info msg="Seed discovery completed"
time="2025-10-04 22:12:08" level=info msg="Monitor is now ready"
time="2025-10-04 22:12:08" level=info msg="Starting event-first camera monitoring"
time="2025-10-04 22:12:08" level=info msg="Camera reconcile loop started"
time="2025-10-04 22:12:08" level=info msg="Device event loop started"
    camera_asserters_test.go:159: ✅ Monitor is ready
    camera_monitor_basic_test.go:290: ✅ ProcessEvent function exercised through event system operations
time="2025-10-04 22:12:08" level=info msg="Stopping hybrid camera monitor"
time="2025-10-04 22:12:08" level=info msg="Device event loop stopped due to context cancellation"
time="2025-10-04 22:12:08" level=info msg="Event loop stopped"
time="2025-10-04 22:12:08" level=info msg="Camera reconcile loop stopped due to context cancellation"
time="2025-10-04 22:12:08" level=info msg="Stopped fsnotify device event source"
time="2025-10-04 22:12:08" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:12:08" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:12:08" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:12:08" level=info msg="Hybrid camera monitor stopped"
--- PASS: TestProcessEventFunction_ReqCAM001_Success (0.20s)
=== RUN   TestSetEventNotifierFunction_ReqCAM001_Success
time="2025-10-04 22:12:08" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:08" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:08" level=info msg="Created fresh device event source instance with smart selection"
time="2025-10-04 22:12:08" level=info msg="Starting hybrid camera monitor"
time="2025-10-04 22:12:08" level=info msg="Starting device event source"
time="2025-10-04 22:12:08" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:08" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:12:08" level=info msg="Device event source started successfully"
time="2025-10-04 22:12:08" level=info msg="Running in event-first mode with fsnotify support"
time="2025-10-04 22:12:08" level=info msg="Bounded worker pool started"
time="2025-10-04 22:12:08" level=info msg="Spawning monitor loops"
time="2025-10-04 22:12:08" level=info msg="Monitor start completed successfully"
    progressive_readiness.go:52: ✅ Monitor Start succeeded immediately - Progressive Readiness working
    camera_asserters_test.go:133: ✅ PROGRESSIVE READINESS: Monitor start succeeded immediately
time="2025-10-04 22:12:08" level=info msg="Starting seed discovery"
time="2025-10-04 22:12:08" level=info msg="Error checking device"
time="2025-10-04 22:12:08" level=warning msg="Device check error occurred"
time="2025-10-04 22:12:08" level=info msg="New V4L2 device discovered"
time="2025-10-04 22:12:08" level=info msg="Seed discovery completed"
time="2025-10-04 22:12:08" level=info msg="Monitor is now ready"
time="2025-10-04 22:12:08" level=info msg="Starting event-first camera monitoring"
time="2025-10-04 22:12:08" level=info msg="Camera reconcile loop started"
time="2025-10-04 22:12:08" level=info msg="Device event loop started"
    camera_asserters_test.go:159: ✅ Monitor is ready
    camera_monitor_basic_test.go:317: ✅ SetEventNotifier function validated
time="2025-10-04 22:12:08" level=info msg="Stopping hybrid camera monitor"
time="2025-10-04 22:12:08" level=info msg="Device event loop stopped due to context cancellation"
time="2025-10-04 22:12:08" level=info msg="Camera reconcile loop stopped due to context cancellation"
time="2025-10-04 22:12:08" level=info msg="Event loop stopped"
time="2025-10-04 22:12:08" level=info msg="Stopped fsnotify device event source"
time="2025-10-04 22:12:08" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:12:08" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:12:08" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:12:08" level=info msg="Hybrid camera monitor stopped"
--- PASS: TestSetEventNotifierFunction_ReqCAM001_Success (0.20s)
=== RUN   TestAddIPCameraSourcesFunction_ReqCAM001_Success
time="2025-10-04 22:12:08" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:08" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:08" level=info msg="Created fresh device event source instance with smart selection"
time="2025-10-04 22:12:08" level=info msg="Starting hybrid camera monitor"
time="2025-10-04 22:12:08" level=info msg="Starting device event source"
time="2025-10-04 22:12:08" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:08" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:12:08" level=info msg="Device event source started successfully"
time="2025-10-04 22:12:08" level=info msg="Running in event-first mode with fsnotify support"
time="2025-10-04 22:12:08" level=info msg="Bounded worker pool started"
time="2025-10-04 22:12:08" level=info msg="Spawning monitor loops"
time="2025-10-04 22:12:08" level=info msg="Monitor start completed successfully"
    progressive_readiness.go:52: ✅ Monitor Start succeeded immediately - Progressive Readiness working
time="2025-10-04 22:12:08" level=info msg="Starting seed discovery"
    camera_asserters_test.go:133: ✅ PROGRESSIVE READINESS: Monitor start succeeded immediately
time="2025-10-04 22:12:08" level=info msg="Error checking device"
time="2025-10-04 22:12:08" level=warning msg="Device check error occurred"
time="2025-10-04 22:12:08" level=info msg="New V4L2 device discovered"
time="2025-10-04 22:12:08" level=info msg="Seed discovery completed"
time="2025-10-04 22:12:08" level=info msg="Monitor is now ready"
time="2025-10-04 22:12:08" level=info msg="Starting event-first camera monitoring"
time="2025-10-04 22:12:08" level=info msg="Camera reconcile loop started"
time="2025-10-04 22:12:08" level=info msg="Device event loop started"
    camera_asserters_test.go:159: ✅ Monitor is ready
    camera_monitor_basic_test.go:340: ✅ AddIPCameraSources function exercised during monitor initialization
time="2025-10-04 22:12:08" level=info msg="Stopping hybrid camera monitor"
time="2025-10-04 22:12:08" level=info msg="Device event loop stopped due to context cancellation"
time="2025-10-04 22:12:08" level=info msg="Event loop stopped"
time="2025-10-04 22:12:08" level=info msg="Camera reconcile loop stopped due to context cancellation"
time="2025-10-04 22:12:08" level=info msg="Stopped fsnotify device event source"
time="2025-10-04 22:12:08" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:12:08" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:12:08" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:12:08" level=info msg="Hybrid camera monitor stopped"
--- PASS: TestAddIPCameraSourcesFunction_ReqCAM001_Success (0.20s)
=== RUN   TestStartPollOnlyMonitoringFunction_ReqCAM001_Success
time="2025-10-04 22:12:08" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:08" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:08" level=info msg="Created fresh device event source instance with smart selection"
time="2025-10-04 22:12:08" level=info msg="Starting hybrid camera monitor"
time="2025-10-04 22:12:08" level=info msg="Starting device event source"
time="2025-10-04 22:12:08" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:08" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:12:08" level=info msg="Device event source started successfully"
time="2025-10-04 22:12:08" level=info msg="Running in event-first mode with fsnotify support"
time="2025-10-04 22:12:08" level=info msg="Bounded worker pool started"
time="2025-10-04 22:12:08" level=info msg="Spawning monitor loops"
time="2025-10-04 22:12:08" level=info msg="Monitor start completed successfully"
    progressive_readiness.go:52: ✅ Monitor Start succeeded immediately - Progressive Readiness working
time="2025-10-04 22:12:08" level=info msg="Starting seed discovery"
    camera_asserters_test.go:133: ✅ PROGRESSIVE READINESS: Monitor start succeeded immediately
time="2025-10-04 22:12:08" level=info msg="Error checking device"
time="2025-10-04 22:12:08" level=warning msg="Device check error occurred"
time="2025-10-04 22:12:08" level=info msg="New V4L2 device discovered"
time="2025-10-04 22:12:08" level=info msg="Seed discovery completed"
time="2025-10-04 22:12:08" level=info msg="Monitor is now ready"
time="2025-10-04 22:12:08" level=info msg="Starting event-first camera monitoring"
time="2025-10-04 22:12:08" level=info msg="Camera reconcile loop started"
time="2025-10-04 22:12:08" level=info msg="Device event loop started"
    camera_asserters_test.go:159: ✅ Monitor is ready
    camera_monitor_basic_test.go:363: ✅ StartPollOnlyMonitoring function exercised during monitor operation
time="2025-10-04 22:12:08" level=info msg="Stopping hybrid camera monitor"
time="2025-10-04 22:12:08" level=info msg="Event loop stopped"
time="2025-10-04 22:12:08" level=info msg="Camera reconcile loop stopped due to context cancellation"
time="2025-10-04 22:12:08" level=info msg="Device event loop stopped due to context cancellation"
time="2025-10-04 22:12:08" level=info msg="Stopped fsnotify device event source"
time="2025-10-04 22:12:08" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:12:08" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:12:08" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:12:08" level=info msg="Hybrid camera monitor stopped"
--- PASS: TestStartPollOnlyMonitoringFunction_ReqCAM001_Success (0.20s)
=== RUN   TestDeviceCreationMethods_ReqCAM001_Success
time="2025-10-04 22:12:08" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:08" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:08" level=info msg="Created fresh device event source instance with smart selection"
time="2025-10-04 22:12:08" level=info msg="Starting hybrid camera monitor"
time="2025-10-04 22:12:08" level=info msg="Starting device event source"
time="2025-10-04 22:12:08" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:08" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:12:08" level=info msg="Device event source started successfully"
time="2025-10-04 22:12:08" level=info msg="Running in event-first mode with fsnotify support"
time="2025-10-04 22:12:08" level=info msg="Bounded worker pool started"
time="2025-10-04 22:12:08" level=info msg="Spawning monitor loops"
time="2025-10-04 22:12:08" level=info msg="Monitor start completed successfully"
    progressive_readiness.go:52: ✅ Monitor Start succeeded immediately - Progressive Readiness working
time="2025-10-04 22:12:08" level=info msg="Starting seed discovery"
    camera_asserters_test.go:133: ✅ PROGRESSIVE READINESS: Monitor start succeeded immediately
time="2025-10-04 22:12:08" level=info msg="Error checking device"
time="2025-10-04 22:12:08" level=warning msg="Device check error occurred"
time="2025-10-04 22:12:08" level=info msg="New V4L2 device discovered"
time="2025-10-04 22:12:08" level=info msg="Seed discovery completed"
time="2025-10-04 22:12:08" level=info msg="Monitor is now ready"
time="2025-10-04 22:12:08" level=info msg="Starting event-first camera monitoring"
time="2025-10-04 22:12:08" level=info msg="Camera reconcile loop started"
time="2025-10-04 22:12:08" level=info msg="Device event loop started"
    camera_asserters_test.go:159: ✅ Monitor is ready
=== RUN   TestDeviceCreationMethods_ReqCAM001_Success/createNetworkCameraDeviceInfo
=== RUN   TestDeviceCreationMethods_ReqCAM001_Success/createFileCameraDeviceInfo
=== RUN   TestDeviceCreationMethods_ReqCAM001_Success/createGenericCameraDeviceInfo
=== NAME  TestDeviceCreationMethods_ReqCAM001_Success
    camera_monitor_basic_test.go:421: ✅ Device creation methods validated
time="2025-10-04 22:12:08" level=info msg="Stopping hybrid camera monitor"
time="2025-10-04 22:12:08" level=info msg="Device event loop stopped due to context cancellation"
time="2025-10-04 22:12:08" level=info msg="Camera reconcile loop stopped due to context cancellation"
time="2025-10-04 22:12:08" level=info msg="Event loop stopped"
time="2025-10-04 22:12:08" level=info msg="Stopped fsnotify device event source"
time="2025-10-04 22:12:09" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:12:09" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:12:09" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:12:09" level=info msg="Hybrid camera monitor stopped"
--- PASS: TestDeviceCreationMethods_ReqCAM001_Success (0.20s)
    --- PASS: TestDeviceCreationMethods_ReqCAM001_Success/createNetworkCameraDeviceInfo (0.00s)
    --- PASS: TestDeviceCreationMethods_ReqCAM001_Success/createFileCameraDeviceInfo (0.00s)
    --- PASS: TestDeviceCreationMethods_ReqCAM001_Success/createGenericCameraDeviceInfo (0.00s)
=== RUN   TestHybridCameraMonitor_AdvancedFunctionality_ReqCAM001_Success_Refactored
time="2025-10-04 22:12:09" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:09" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:09" level=info msg="Created fresh device event source instance with smart selection"
time="2025-10-04 22:12:09" level=info msg="Starting hybrid camera monitor"
time="2025-10-04 22:12:09" level=info msg="Starting device event source"
time="2025-10-04 22:12:09" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:09" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:12:09" level=info msg="Device event source started successfully"
time="2025-10-04 22:12:09" level=info msg="Running in event-first mode with fsnotify support"
time="2025-10-04 22:12:09" level=info msg="Bounded worker pool started"
time="2025-10-04 22:12:09" level=info msg="Spawning monitor loops"
time="2025-10-04 22:12:09" level=info msg="Monitor start completed successfully"
    progressive_readiness.go:52: ✅ Monitor Start succeeded immediately - Progressive Readiness working
time="2025-10-04 22:12:09" level=info msg="Starting seed discovery"
    camera_asserters_test.go:133: ✅ PROGRESSIVE READINESS: Monitor start succeeded immediately
time="2025-10-04 22:12:09" level=info msg="Error checking device"
time="2025-10-04 22:12:09" level=warning msg="Device check error occurred"
time="2025-10-04 22:12:09" level=info msg="New V4L2 device discovered"
time="2025-10-04 22:12:09" level=info msg="Seed discovery completed"
time="2025-10-04 22:12:09" level=info msg="Monitor is now ready"
time="2025-10-04 22:12:09" level=info msg="Starting event-first camera monitoring"
time="2025-10-04 22:12:09" level=info msg="Camera reconcile loop started"
time="2025-10-04 22:12:09" level=info msg="Device event loop started"
    camera_asserters_test.go:159: ✅ Monitor is ready
    camera_monitor_basic_test.go:462: Default formats: [{YUYV 640 480 [30.000 fps 25.000 fps]} {MJPG 1280 720 [30.000 fps 25.000 fps 15.000 fps]}]
    camera_monitor_basic_test.go:480: ✅ Advanced monitor functionality validated
time="2025-10-04 22:12:09" level=info msg="Stopping hybrid camera monitor"
time="2025-10-04 22:12:09" level=info msg="Device event loop stopped due to context cancellation"
time="2025-10-04 22:12:09" level=info msg="Camera reconcile loop stopped due to context cancellation"
time="2025-10-04 22:12:09" level=info msg="Event loop stopped"
time="2025-10-04 22:12:09" level=info msg="Stopped fsnotify device event source"
time="2025-10-04 22:12:09" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:12:09" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:12:09" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:12:09" level=info msg="Hybrid camera monitor stopped"
--- PASS: TestHybridCameraMonitor_AdvancedFunctionality_ReqCAM001_Success_Refactored (0.20s)
=== RUN   TestHybridCameraMonitor_Basic_ReqCAM001_Success
time="2025-10-04 22:12:09" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:09" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:09" level=info msg="Created fresh device event source instance with smart selection"
time="2025-10-04 22:12:09" level=info msg="Starting hybrid camera monitor"
time="2025-10-04 22:12:09" level=info msg="Starting device event source"
time="2025-10-04 22:12:09" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:09" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:12:09" level=info msg="Device event source started successfully"
time="2025-10-04 22:12:09" level=info msg="Running in event-first mode with fsnotify support"
time="2025-10-04 22:12:09" level=info msg="Bounded worker pool started"
time="2025-10-04 22:12:09" level=info msg="Spawning monitor loops"
time="2025-10-04 22:12:09" level=info msg="Monitor start completed successfully"
    progressive_readiness.go:52: ✅ Monitor Start succeeded immediately - Progressive Readiness working
    camera_asserters_test.go:133: ✅ PROGRESSIVE READINESS: Monitor start succeeded immediately
time="2025-10-04 22:12:09" level=info msg="Starting seed discovery"
time="2025-10-04 22:12:09" level=info msg="Error checking device"
time="2025-10-04 22:12:09" level=warning msg="Device check error occurred"
time="2025-10-04 22:12:09" level=info msg="New V4L2 device discovered"
time="2025-10-04 22:12:09" level=info msg="Seed discovery completed"
time="2025-10-04 22:12:09" level=info msg="Monitor is now ready"
time="2025-10-04 22:12:09" level=info msg="Starting event-first camera monitoring"
time="2025-10-04 22:12:09" level=info msg="Camera reconcile loop started"
time="2025-10-04 22:12:09" level=info msg="Device event loop started"
    camera_asserters_test.go:159: ✅ Monitor is ready
time="2025-10-04 22:12:09" level=info msg="Stopping hybrid camera monitor"
time="2025-10-04 22:12:09" level=info msg="Device event loop stopped due to context cancellation"
time="2025-10-04 22:12:09" level=info msg="Event loop stopped"
time="2025-10-04 22:12:09" level=info msg="Camera reconcile loop stopped due to context cancellation"
time="2025-10-04 22:12:09" level=info msg="Stopped fsnotify device event source"
time="2025-10-04 22:12:09" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:12:09" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:12:09" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:12:09" level=info msg="Hybrid camera monitor stopped"
    camera_asserters_test.go:147: ✅ Monitor stopped successfully
    camera_monitor_comprehensive_test.go:23: ✅ Basic monitor functionality validated
--- PASS: TestHybridCameraMonitor_Basic_ReqCAM001_Success (0.10s)
=== RUN   TestHybridCameraMonitor_StartStop_ReqCAM001_Success
time="2025-10-04 22:12:09" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:09" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:09" level=info msg="Created fresh device event source instance with smart selection"
time="2025-10-04 22:12:09" level=info msg="Starting hybrid camera monitor"
time="2025-10-04 22:12:09" level=info msg="Starting device event source"
time="2025-10-04 22:12:09" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:09" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:12:09" level=info msg="Device event source started successfully"
time="2025-10-04 22:12:09" level=info msg="Running in event-first mode with fsnotify support"
time="2025-10-04 22:12:09" level=info msg="Bounded worker pool started"
time="2025-10-04 22:12:09" level=info msg="Spawning monitor loops"
time="2025-10-04 22:12:09" level=info msg="Monitor start completed successfully"
    progressive_readiness.go:52: ✅ Monitor Start succeeded immediately - Progressive Readiness working
    camera_asserters_test.go:133: ✅ PROGRESSIVE READINESS: Monitor start succeeded immediately
time="2025-10-04 22:12:09" level=info msg="Starting seed discovery"
time="2025-10-04 22:12:09" level=info msg="Error checking device"
time="2025-10-04 22:12:09" level=warning msg="Device check error occurred"
time="2025-10-04 22:12:09" level=info msg="New V4L2 device discovered"
time="2025-10-04 22:12:09" level=info msg="Seed discovery completed"
time="2025-10-04 22:12:09" level=info msg="Monitor is now ready"
time="2025-10-04 22:12:09" level=info msg="Starting event-first camera monitoring"
time="2025-10-04 22:12:09" level=info msg="Camera reconcile loop started"
time="2025-10-04 22:12:09" level=info msg="Device event loop started"
    camera_asserters_test.go:159: ✅ Monitor is ready
time="2025-10-04 22:12:09" level=info msg="Stopping hybrid camera monitor"
time="2025-10-04 22:12:09" level=info msg="Device event loop stopped due to context cancellation"
time="2025-10-04 22:12:09" level=info msg="Event loop stopped"
time="2025-10-04 22:12:09" level=info msg="Camera reconcile loop stopped due to context cancellation"
time="2025-10-04 22:12:09" level=info msg="Stopped fsnotify device event source"
time="2025-10-04 22:12:09" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:12:09" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:12:09" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:12:09" level=info msg="Hybrid camera monitor stopped"
    camera_asserters_test.go:147: ✅ Monitor stopped successfully
    camera_monitor_comprehensive_test.go:43: ✅ Start/stop behavior validated
--- PASS: TestHybridCameraMonitor_StartStop_ReqCAM001_Success (0.10s)
=== RUN   TestHybridCameraMonitor_DeviceDiscovery_ReqCAM001_Success
time="2025-10-04 22:12:09" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:09" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:09" level=info msg="Created fresh device event source instance with smart selection"
    camera_monitor_comprehensive_test.go:56: Discovered 0 devices
    camera_monitor_comprehensive_test.go:63: ✅ Device discovery functionality validated
--- PASS: TestHybridCameraMonitor_DeviceDiscovery_ReqCAM001_Success (0.00s)
=== RUN   TestHybridCameraMonitor_Stats_ReqCAM001_Success
time="2025-10-04 22:12:09" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:09" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:09" level=info msg="Created fresh device event source instance with smart selection"
time="2025-10-04 22:12:09" level=info msg="Starting hybrid camera monitor"
time="2025-10-04 22:12:09" level=info msg="Starting device event source"
time="2025-10-04 22:12:09" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:09" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:12:09" level=info msg="Device event source started successfully"
time="2025-10-04 22:12:09" level=info msg="Running in event-first mode with fsnotify support"
time="2025-10-04 22:12:09" level=info msg="Bounded worker pool started"
time="2025-10-04 22:12:09" level=info msg="Spawning monitor loops"
time="2025-10-04 22:12:09" level=info msg="Monitor start completed successfully"
    progressive_readiness.go:52: ✅ Monitor Start succeeded immediately - Progressive Readiness working
    camera_asserters_test.go:133: ✅ PROGRESSIVE READINESS: Monitor start succeeded immediately
time="2025-10-04 22:12:09" level=info msg="Starting seed discovery"
time="2025-10-04 22:12:09" level=info msg="Error checking device"
time="2025-10-04 22:12:09" level=warning msg="Device check error occurred"
time="2025-10-04 22:12:09" level=info msg="New V4L2 device discovered"
time="2025-10-04 22:12:09" level=info msg="Seed discovery completed"
time="2025-10-04 22:12:09" level=info msg="Monitor is now ready"
time="2025-10-04 22:12:09" level=info msg="Starting event-first camera monitoring"
time="2025-10-04 22:12:09" level=info msg="Camera reconcile loop started"
time="2025-10-04 22:12:09" level=info msg="Device event loop started"
    camera_asserters_test.go:159: ✅ Monitor is ready
    camera_monitor_comprehensive_test.go:84: Final stats: &{Running:true ActiveTasks:0 PollingCycles:1 DeviceStateChanges:1 CapabilityProbesAttempted:1 CapabilityProbesSuccessful:1 CapabilityTimeouts:0 CapabilityParseErrors:0 PollingFailureCount:0 CurrentPollInterval:0.1 KnownDevicesCount:1 UdevEventsProcessed:0 UdevEventsFiltered:0 UdevEventsSkipped:0 DeviceEventsProcessed:0 DeviceEventsDropped:0 DevicesConnected:0}
    camera_monitor_comprehensive_test.go:88: ✅ Monitor statistics validated
time="2025-10-04 22:12:09" level=info msg="Stopping hybrid camera monitor"
time="2025-10-04 22:12:09" level=info msg="Device event loop stopped due to context cancellation"
time="2025-10-04 22:12:09" level=info msg="Camera reconcile loop stopped due to context cancellation"
time="2025-10-04 22:12:09" level=info msg="Event loop stopped"
time="2025-10-04 22:12:09" level=info msg="Stopped fsnotify device event source"
time="2025-10-04 22:12:09" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:12:09" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:12:09" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:12:09" level=info msg="Hybrid camera monitor stopped"
--- PASS: TestHybridCameraMonitor_Stats_ReqCAM001_Success (0.20s)
=== RUN   TestHybridCameraMonitor_ConcurrentStartStop_ReqCAM001_Success
    camera_monitor_comprehensive_test.go:93: Skipping due to test infrastructure issue - monitor already running
--- SKIP: TestHybridCameraMonitor_ConcurrentStartStop_ReqCAM001_Success (0.00s)
=== RUN   TestHybridCameraMonitor_ErrorHandling_ReqCAM001_Success
time="2025-10-04 22:12:09" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:09" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:09" level=info msg="Created fresh device event source instance with smart selection"
time="2025-10-04 22:12:09" level=info msg="Stopping hybrid camera monitor"
    camera_monitor_comprehensive_test.go:161: Stop on non-running monitor result: <nil>
time="2025-10-04 22:12:09" level=info msg="Starting hybrid camera monitor"
time="2025-10-04 22:12:09" level=info msg="Starting device event source"
time="2025-10-04 22:12:09" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:09" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:12:09" level=info msg="Device event source started successfully"
time="2025-10-04 22:12:09" level=info msg="Running in event-first mode with fsnotify support"
time="2025-10-04 22:12:09" level=info msg="Bounded worker pool started"
time="2025-10-04 22:12:09" level=info msg="Spawning monitor loops"
time="2025-10-04 22:12:09" level=info msg="Monitor start completed successfully"
time="2025-10-04 22:12:09" level=error msg="monitor_start_return_err - monitor is already running"
    camera_monitor_comprehensive_test.go:170: Second start result: monitor is already running
time="2025-10-04 22:12:09" level=info msg="Stopping hybrid camera monitor"
time="2025-10-04 22:12:09" level=info msg="Starting seed discovery"
time="2025-10-04 22:12:09" level=info msg="Event loop stopped"
time="2025-10-04 22:12:09" level=info msg="Error checking device"
time="2025-10-04 22:12:09" level=info msg="Failed to probe device capabilities"
time="2025-10-04 22:12:09" level=warning msg="Device check error occurred"
time="2025-10-04 22:12:09" level=info msg="New V4L2 device discovered"
time="2025-10-04 22:12:09" level=info msg="Seed discovery completed"
time="2025-10-04 22:12:09" level=info msg="Monitor is now ready"
time="2025-10-04 22:12:09" level=info msg="Starting event-first camera monitoring"
time="2025-10-04 22:12:09" level=info msg="Device event loop started"
time="2025-10-04 22:12:09" level=info msg="Camera reconcile loop started"
time="2025-10-04 22:12:09" level=info msg="Stopped fsnotify device event source"
time="2025-10-04 22:12:09" level=info msg="Camera reconcile loop stopped due to context cancellation"
time="2025-10-04 22:12:09" level=info msg="Device event loop stopped due to context cancellation"
time="2025-10-04 22:12:09" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:12:09" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:12:09" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:12:09" level=info msg="Hybrid camera monitor stopped"
    camera_monitor_comprehensive_test.go:174: ✅ Error handling scenarios validated
--- PASS: TestHybridCameraMonitor_ErrorHandling_ReqCAM001_Success (0.00s)
=== RUN   TestHybridCameraMonitor_SnapshotFunctionality_ReqCAM001_Success
time="2025-10-04 22:12:09" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:09" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:09" level=info msg="Created fresh device event source instance with smart selection"
time="2025-10-04 22:12:09" level=info msg="Starting hybrid camera monitor"
time="2025-10-04 22:12:09" level=info msg="Starting device event source"
time="2025-10-04 22:12:09" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:09" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:12:09" level=info msg="Device event source started successfully"
time="2025-10-04 22:12:09" level=info msg="Running in event-first mode with fsnotify support"
time="2025-10-04 22:12:09" level=info msg="Bounded worker pool started"
time="2025-10-04 22:12:09" level=info msg="Spawning monitor loops"
time="2025-10-04 22:12:09" level=info msg="Monitor start completed successfully"
    progressive_readiness.go:52: ✅ Monitor Start succeeded immediately - Progressive Readiness working
time="2025-10-04 22:12:09" level=info msg="Starting seed discovery"
    camera_asserters_test.go:133: ✅ PROGRESSIVE READINESS: Monitor start succeeded immediately
time="2025-10-04 22:12:09" level=info msg="Error checking device"
time="2025-10-04 22:12:09" level=warning msg="Device check error occurred"
time="2025-10-04 22:12:09" level=info msg="New V4L2 device discovered"
time="2025-10-04 22:12:09" level=info msg="Seed discovery completed"
time="2025-10-04 22:12:09" level=info msg="Monitor is now ready"
time="2025-10-04 22:12:09" level=info msg="Starting event-first camera monitoring"
time="2025-10-04 22:12:09" level=info msg="Camera reconcile loop started"
time="2025-10-04 22:12:09" level=info msg="Device event loop started"
    camera_asserters_test.go:159: ✅ Monitor is ready
    camera_snapshot_test.go:31: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/camera/camera_snapshot_test.go:31
        	Error:      	"--stream-mmap --stream-to /tmp/test_snapshot.jpg --stream-count 1 --set-fmt-video width=640,height=480" does not contain "/dev/video0"
        	Test:       	TestHybridCameraMonitor_SnapshotFunctionality_ReqCAM001_Success
        	Messages:   	Args should contain device path
    camera_snapshot_test.go:33: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/camera/camera_snapshot_test.go:33
        	Error:      	"--stream-mmap --stream-to /tmp/test_snapshot.jpg --stream-count 1 --set-fmt-video width=640,height=480" does not contain "mjpeg"
        	Test:       	TestHybridCameraMonitor_SnapshotFunctionality_ReqCAM001_Success
        	Messages:   	Args should contain format
    camera_snapshot_test.go:35: ✅ Snapshot functionality validated
time="2025-10-04 22:12:09" level=info msg="Stopping hybrid camera monitor"
time="2025-10-04 22:12:09" level=info msg="Device event loop stopped due to context cancellation"
time="2025-10-04 22:12:09" level=info msg="Event loop stopped"
time="2025-10-04 22:12:09" level=info msg="Camera reconcile loop stopped due to context cancellation"
time="2025-10-04 22:12:09" level=info msg="Stopped fsnotify device event source"
time="2025-10-04 22:12:09" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:12:09" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:12:09" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:12:09" level=info msg="Hybrid camera monitor stopped"
--- FAIL: TestHybridCameraMonitor_SnapshotFunctionality_ReqCAM001_Success (0.20s)
=== RUN   TestHybridCameraMonitor_PixelFormatSelection_ReqCAM001_Success
time="2025-10-04 22:12:09" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:09" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:09" level=info msg="Created fresh device event source instance with smart selection"
time="2025-10-04 22:12:09" level=info msg="Starting hybrid camera monitor"
time="2025-10-04 22:12:09" level=info msg="Starting device event source"
time="2025-10-04 22:12:09" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:09" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:12:09" level=info msg="Device event source started successfully"
time="2025-10-04 22:12:09" level=info msg="Running in event-first mode with fsnotify support"
time="2025-10-04 22:12:09" level=info msg="Bounded worker pool started"
time="2025-10-04 22:12:09" level=info msg="Spawning monitor loops"
time="2025-10-04 22:12:09" level=info msg="Monitor start completed successfully"
time="2025-10-04 22:12:09" level=info msg="Starting seed discovery"
    progressive_readiness.go:52: ✅ Monitor Start succeeded immediately - Progressive Readiness working
    camera_asserters_test.go:133: ✅ PROGRESSIVE READINESS: Monitor start succeeded immediately
time="2025-10-04 22:12:09" level=info msg="Error checking device"
time="2025-10-04 22:12:09" level=warning msg="Device check error occurred"
time="2025-10-04 22:12:09" level=info msg="New V4L2 device discovered"
time="2025-10-04 22:12:09" level=info msg="Seed discovery completed"
time="2025-10-04 22:12:09" level=info msg="Monitor is now ready"
time="2025-10-04 22:12:09" level=info msg="Starting event-first camera monitoring"
time="2025-10-04 22:12:09" level=info msg="Camera reconcile loop started"
time="2025-10-04 22:12:09" level=info msg="Device event loop started"
    camera_asserters_test.go:159: ✅ Monitor is ready
time="2025-10-04 22:12:10" level=info msg="Selecting optimal pixel format for camera"
time="2025-10-04 22:12:10" level=info msg="Selected optimal pixel format"
    camera_snapshot_test.go:73: ✅ Pixel format selection validated
time="2025-10-04 22:12:10" level=info msg="Stopping hybrid camera monitor"
time="2025-10-04 22:12:10" level=info msg="Camera reconcile loop stopped due to context cancellation"
time="2025-10-04 22:12:10" level=info msg="Event loop stopped"
time="2025-10-04 22:12:10" level=info msg="Device event loop stopped due to context cancellation"
time="2025-10-04 22:12:10" level=info msg="Stopped fsnotify device event source"
time="2025-10-04 22:12:10" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:12:10" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:12:10" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:12:10" level=info msg="Hybrid camera monitor stopped"
--- PASS: TestHybridCameraMonitor_PixelFormatSelection_ReqCAM001_Success (0.20s)
=== RUN   TestHybridCameraMonitor_EventSystem_ReqCAM001_Success
time="2025-10-04 22:12:10" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:10" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:10" level=info msg="Created fresh device event source instance with smart selection"
time="2025-10-04 22:12:10" level=info msg="Starting hybrid camera monitor"
time="2025-10-04 22:12:10" level=info msg="Starting device event source"
time="2025-10-04 22:12:10" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:10" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:12:10" level=info msg="Device event source started successfully"
time="2025-10-04 22:12:10" level=info msg="Running in event-first mode with fsnotify support"
time="2025-10-04 22:12:10" level=info msg="Bounded worker pool started"
time="2025-10-04 22:12:10" level=info msg="Spawning monitor loops"
time="2025-10-04 22:12:10" level=info msg="Monitor start completed successfully"
    progressive_readiness.go:52: ✅ Monitor Start succeeded immediately - Progressive Readiness working
    camera_asserters_test.go:133: ✅ PROGRESSIVE READINESS: Monitor start succeeded immediately
time="2025-10-04 22:12:10" level=info msg="Starting seed discovery"
time="2025-10-04 22:12:10" level=info msg="Error checking device"
time="2025-10-04 22:12:10" level=warning msg="Device check error occurred"
time="2025-10-04 22:12:10" level=info msg="New V4L2 device discovered"
time="2025-10-04 22:12:10" level=info msg="Seed discovery completed"
time="2025-10-04 22:12:10" level=info msg="Monitor is now ready"
time="2025-10-04 22:12:10" level=info msg="Starting event-first camera monitoring"
time="2025-10-04 22:12:10" level=info msg="Camera reconcile loop started"
time="2025-10-04 22:12:10" level=info msg="Device event loop started"
    camera_asserters_test.go:159: ✅ Monitor is ready
time="2025-10-04 22:12:10" level=info msg="Added camera event callback"
time="2025-10-04 22:12:10" level=info msg="Added camera event handler"
    camera_snapshot_test.go:102: ✅ Event system functionality validated
time="2025-10-04 22:12:10" level=info msg="Stopping hybrid camera monitor"
time="2025-10-04 22:12:10" level=info msg="Device event loop stopped due to context cancellation"
time="2025-10-04 22:12:10" level=info msg="Event loop stopped"
time="2025-10-04 22:12:10" level=info msg="Camera reconcile loop stopped due to context cancellation"
time="2025-10-04 22:12:10" level=info msg="Stopped fsnotify device event source"
time="2025-10-04 22:12:10" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:12:10" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:12:10" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:12:10" level=info msg="Hybrid camera monitor stopped"
--- PASS: TestHybridCameraMonitor_EventSystem_ReqCAM001_Success (0.20s)
=== RUN   TestHybridCameraMonitor_Configuration_ReqCAM001_Success
time="2025-10-04 22:12:10" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:10" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:10" level=info msg="Created fresh device event source instance with smart selection"
time="2025-10-04 22:12:10" level=info msg="Starting hybrid camera monitor"
time="2025-10-04 22:12:10" level=info msg="Starting device event source"
time="2025-10-04 22:12:10" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:10" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:12:10" level=info msg="Device event source started successfully"
time="2025-10-04 22:12:10" level=info msg="Running in event-first mode with fsnotify support"
time="2025-10-04 22:12:10" level=info msg="Bounded worker pool started"
time="2025-10-04 22:12:10" level=info msg="Spawning monitor loops"
time="2025-10-04 22:12:10" level=info msg="Monitor start completed successfully"
    progressive_readiness.go:52: ✅ Monitor Start succeeded immediately - Progressive Readiness working
time="2025-10-04 22:12:10" level=info msg="Starting seed discovery"
    camera_asserters_test.go:133: ✅ PROGRESSIVE READINESS: Monitor start succeeded immediately
time="2025-10-04 22:12:10" level=info msg="Error checking device"
time="2025-10-04 22:12:10" level=warning msg="Device check error occurred"
time="2025-10-04 22:12:10" level=info msg="New V4L2 device discovered"
time="2025-10-04 22:12:10" level=info msg="Seed discovery completed"
time="2025-10-04 22:12:10" level=info msg="Monitor is now ready"
time="2025-10-04 22:12:10" level=info msg="Starting event-first camera monitoring"
time="2025-10-04 22:12:10" level=info msg="Camera reconcile loop started"
time="2025-10-04 22:12:10" level=info msg="Device event loop started"
    camera_asserters_test.go:159: ✅ Monitor is ready
    camera_snapshot_test.go:122: Configuration update test skipped - requires proper config structure
    camera_snapshot_test.go:125: ✅ Configuration functionality validated
time="2025-10-04 22:12:10" level=info msg="Stopping hybrid camera monitor"
time="2025-10-04 22:12:10" level=info msg="Camera reconcile loop stopped due to context cancellation"
time="2025-10-04 22:12:10" level=info msg="Device event loop stopped due to context cancellation"
time="2025-10-04 22:12:10" level=info msg="Event loop stopped"
time="2025-10-04 22:12:10" level=info msg="Stopped fsnotify device event source"
time="2025-10-04 22:12:10" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:12:10" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:12:10" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:12:10" level=info msg="Hybrid camera monitor stopped"
--- PASS: TestHybridCameraMonitor_Configuration_ReqCAM001_Success (0.20s)
=== RUN   TestHybridCameraMonitor_AsserterHelpers_ReqCAM001_Success
time="2025-10-04 22:12:10" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:10" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:10" level=info msg="Created fresh device event source instance with smart selection"
time="2025-10-04 22:12:10" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:10" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:10" level=info msg="Created fresh device event source instance with smart selection"
time="2025-10-04 22:12:10" level=info msg="Starting hybrid camera monitor"
time="2025-10-04 22:12:10" level=info msg="Starting device event source"
time="2025-10-04 22:12:10" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:10" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:12:10" level=info msg="Device event source started successfully"
time="2025-10-04 22:12:10" level=info msg="Running in event-first mode with fsnotify support"
time="2025-10-04 22:12:10" level=info msg="Bounded worker pool started"
time="2025-10-04 22:12:10" level=info msg="Spawning monitor loops"
time="2025-10-04 22:12:10" level=info msg="Monitor start completed successfully"
time="2025-10-04 22:12:10" level=info msg="Starting seed discovery"
    progressive_readiness.go:52: ✅ Monitor Start succeeded immediately - Progressive Readiness working
    camera_asserters_test.go:133: ✅ PROGRESSIVE READINESS: Monitor start succeeded immediately
time="2025-10-04 22:12:10" level=info msg="Error checking device"
time="2025-10-04 22:12:10" level=warning msg="Device check error occurred"
time="2025-10-04 22:12:10" level=info msg="New V4L2 device discovered"
time="2025-10-04 22:12:10" level=info msg="Seed discovery completed"
time="2025-10-04 22:12:10" level=info msg="Monitor is now ready"
time="2025-10-04 22:12:10" level=info msg="Starting event-first camera monitoring"
time="2025-10-04 22:12:10" level=info msg="Camera reconcile loop started"
time="2025-10-04 22:12:10" level=info msg="Device event loop started"
    camera_asserters_test.go:159: ✅ Monitor is ready
    camera_asserters_test.go:194: ✅ Device discovery completed: 1 devices found
    camera_asserters_test.go:206: ✅ Device /dev/video0 validated successfully
    camera_snapshot_test.go:156: ✅ Asserter helper methods validated
time="2025-10-04 22:12:10" level=info msg="Stopping hybrid camera monitor"
time="2025-10-04 22:12:10" level=info msg="Device event loop stopped due to context cancellation"
time="2025-10-04 22:12:10" level=info msg="Event loop stopped"
time="2025-10-04 22:12:10" level=info msg="Camera reconcile loop stopped due to context cancellation"
time="2025-10-04 22:12:10" level=info msg="Stopped fsnotify device event source"
time="2025-10-04 22:12:10" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:12:10" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:12:10" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:12:10" level=info msg="Hybrid camera monitor stopped"
--- PASS: TestHybridCameraMonitor_AsserterHelpers_ReqCAM001_Success (0.20s)
=== RUN   TestCameraMonitor_SpecificFunctions_Comprehensive
time="2025-10-04 22:12:10" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:10" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:10" level=info msg="Created fresh device event source instance with smart selection"
=== RUN   TestCameraMonitor_SpecificFunctions_Comprehensive/handleConfigurationUpdate_function
time="2025-10-04 22:12:10" level=info msg="Starting hybrid camera monitor"
time="2025-10-04 22:12:10" level=info msg="Starting device event source"
time="2025-10-04 22:12:10" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:10" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:12:10" level=info msg="Device event source started successfully"
time="2025-10-04 22:12:10" level=info msg="Running in event-first mode with fsnotify support"
time="2025-10-04 22:12:10" level=info msg="Bounded worker pool started"
time="2025-10-04 22:12:10" level=info msg="Spawning monitor loops"
time="2025-10-04 22:12:10" level=info msg="Monitor start completed successfully"
=== NAME  TestCameraMonitor_SpecificFunctions_Comprehensive
    progressive_readiness.go:52: ✅ Monitor Start succeeded immediately - Progressive Readiness working
time="2025-10-04 22:12:10" level=info msg="Starting seed discovery"
    camera_asserters_test.go:133: ✅ PROGRESSIVE READINESS: Monitor start succeeded immediately
time="2025-10-04 22:12:10" level=info msg="Error checking device"
time="2025-10-04 22:12:10" level=warning msg="Device check error occurred"
time="2025-10-04 22:12:10" level=info msg="New V4L2 device discovered"
time="2025-10-04 22:12:10" level=info msg="Seed discovery completed"
time="2025-10-04 22:12:10" level=info msg="Monitor is now ready"
time="2025-10-04 22:12:10" level=info msg="Starting event-first camera monitoring"
time="2025-10-04 22:12:10" level=info msg="Camera reconcile loop started"
time="2025-10-04 22:12:10" level=info msg="Device event loop started"
    camera_asserters_test.go:159: ✅ Monitor is ready
    camera_specific_functions_test.go:37: ✅ handleConfigurationUpdate function exercised
=== RUN   TestCameraMonitor_SpecificFunctions_Comprehensive/processEvent_function_various_events
=== NAME  TestCameraMonitor_SpecificFunctions_Comprehensive
    camera_specific_functions_test.go:44: ✅ Monitor already running - processEvent function exercised through event system
=== RUN   TestCameraMonitor_SpecificFunctions_Comprehensive/min_function_various_inputs
=== NAME  TestCameraMonitor_SpecificFunctions_Comprehensive
    camera_specific_functions_test.go:73: ✅ Monitor already running - min function exercised through polling interval calculations
=== RUN   TestCameraMonitor_SpecificFunctions_Comprehensive/addIPCameraSources_function
=== NAME  TestCameraMonitor_SpecificFunctions_Comprehensive
    camera_specific_functions_test.go:103: ✅ Monitor already running - addIPCameraSources function exercised during monitor initialization
=== RUN   TestCameraMonitor_SpecificFunctions_Comprehensive/startPollOnlyMonitoring_function
=== NAME  TestCameraMonitor_SpecificFunctions_Comprehensive
    camera_specific_functions_test.go:126: ✅ Monitor already running - startPollOnlyMonitoring function exercised during monitor operation
time="2025-10-04 22:12:10" level=info msg="Stopping hybrid camera monitor"
time="2025-10-04 22:12:10" level=info msg="Camera reconcile loop stopped due to context cancellation"
time="2025-10-04 22:12:10" level=info msg="Event loop stopped"
time="2025-10-04 22:12:10" level=info msg="Device event loop stopped due to context cancellation"
time="2025-10-04 22:12:10" level=info msg="Stopped fsnotify device event source"
time="2025-10-04 22:12:10" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:12:10" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:12:10" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:12:10" level=info msg="Hybrid camera monitor stopped"
--- PASS: TestCameraMonitor_SpecificFunctions_Comprehensive (0.30s)
    --- PASS: TestCameraMonitor_SpecificFunctions_Comprehensive/handleConfigurationUpdate_function (0.20s)
    --- PASS: TestCameraMonitor_SpecificFunctions_Comprehensive/processEvent_function_various_events (0.00s)
    --- PASS: TestCameraMonitor_SpecificFunctions_Comprehensive/min_function_various_inputs (0.00s)
    --- PASS: TestCameraMonitor_SpecificFunctions_Comprehensive/addIPCameraSources_function (0.00s)
    --- PASS: TestCameraMonitor_SpecificFunctions_Comprehensive/startPollOnlyMonitoring_function (0.00s)
=== RUN   TestCameraMonitor_DeviceCreation_Comprehensive
time="2025-10-04 22:12:11" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:11" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:11" level=info msg="Created fresh device event source instance with smart selection"
time="2025-10-04 22:12:11" level=info msg="Starting hybrid camera monitor"
time="2025-10-04 22:12:11" level=info msg="Starting device event source"
time="2025-10-04 22:12:11" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:11" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:12:11" level=info msg="Device event source started successfully"
time="2025-10-04 22:12:11" level=info msg="Running in event-first mode with fsnotify support"
time="2025-10-04 22:12:11" level=info msg="Bounded worker pool started"
time="2025-10-04 22:12:11" level=info msg="Spawning monitor loops"
time="2025-10-04 22:12:11" level=info msg="Monitor start completed successfully"
    progressive_readiness.go:52: ✅ Monitor Start succeeded immediately - Progressive Readiness working
    camera_asserters_test.go:133: ✅ PROGRESSIVE READINESS: Monitor start succeeded immediately
time="2025-10-04 22:12:11" level=info msg="Starting seed discovery"
time="2025-10-04 22:12:11" level=info msg="Error checking device"
time="2025-10-04 22:12:11" level=warning msg="Device check error occurred"
time="2025-10-04 22:12:11" level=info msg="New V4L2 device discovered"
time="2025-10-04 22:12:11" level=info msg="Seed discovery completed"
time="2025-10-04 22:12:11" level=info msg="Monitor is now ready"
time="2025-10-04 22:12:11" level=info msg="Starting event-first camera monitoring"
time="2025-10-04 22:12:11" level=info msg="Camera reconcile loop started"
time="2025-10-04 22:12:11" level=info msg="Device event loop started"
    camera_asserters_test.go:159: ✅ Monitor is ready
=== RUN   TestCameraMonitor_DeviceCreation_Comprehensive/createNetworkCameraDeviceInfo_various_inputs
=== RUN   TestCameraMonitor_DeviceCreation_Comprehensive/createNetworkCameraDeviceInfo_various_inputs/valid_rtsp_source
=== RUN   TestCameraMonitor_DeviceCreation_Comprehensive/createNetworkCameraDeviceInfo_various_inputs/valid_http_source
=== RUN   TestCameraMonitor_DeviceCreation_Comprehensive/createNetworkCameraDeviceInfo_various_inputs/empty_source
=== RUN   TestCameraMonitor_DeviceCreation_Comprehensive/createNetworkCameraDeviceInfo_various_inputs/long_source
=== NAME  TestCameraMonitor_DeviceCreation_Comprehensive
    camera_specific_functions_test.go:215: ✅ createNetworkCameraDeviceInfo with various inputs validated
=== RUN   TestCameraMonitor_DeviceCreation_Comprehensive/createFileCameraDeviceInfo_various_inputs
=== RUN   TestCameraMonitor_DeviceCreation_Comprehensive/createFileCameraDeviceInfo_various_inputs/valid_mp4_source
=== RUN   TestCameraMonitor_DeviceCreation_Comprehensive/createFileCameraDeviceInfo_various_inputs/valid_avi_source
=== RUN   TestCameraMonitor_DeviceCreation_Comprehensive/createFileCameraDeviceInfo_various_inputs/empty_source
=== RUN   TestCameraMonitor_DeviceCreation_Comprehensive/createFileCameraDeviceInfo_various_inputs/long_path_source
=== NAME  TestCameraMonitor_DeviceCreation_Comprehensive
    camera_specific_functions_test.go:278: ✅ createFileCameraDeviceInfo with various inputs validated
=== RUN   TestCameraMonitor_DeviceCreation_Comprehensive/createGenericCameraDeviceInfo_various_inputs
=== RUN   TestCameraMonitor_DeviceCreation_Comprehensive/createGenericCameraDeviceInfo_various_inputs/valid_video0_source
=== RUN   TestCameraMonitor_DeviceCreation_Comprehensive/createGenericCameraDeviceInfo_various_inputs/valid_video1_source
=== RUN   TestCameraMonitor_DeviceCreation_Comprehensive/createGenericCameraDeviceInfo_various_inputs/empty_source
=== RUN   TestCameraMonitor_DeviceCreation_Comprehensive/createGenericCameraDeviceInfo_various_inputs/special_chars_source
=== NAME  TestCameraMonitor_DeviceCreation_Comprehensive
    camera_specific_functions_test.go:341: ✅ createGenericCameraDeviceInfo with various inputs validated
time="2025-10-04 22:12:11" level=info msg="Stopping hybrid camera monitor"
time="2025-10-04 22:12:11" level=info msg="Camera reconcile loop stopped due to context cancellation"
time="2025-10-04 22:12:11" level=info msg="Device event loop stopped due to context cancellation"
time="2025-10-04 22:12:11" level=info msg="Event loop stopped"
time="2025-10-04 22:12:11" level=info msg="Stopped fsnotify device event source"
time="2025-10-04 22:12:11" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:12:11" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:12:11" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:12:11" level=info msg="Hybrid camera monitor stopped"
--- PASS: TestCameraMonitor_DeviceCreation_Comprehensive (0.20s)
    --- PASS: TestCameraMonitor_DeviceCreation_Comprehensive/createNetworkCameraDeviceInfo_various_inputs (0.00s)
        --- PASS: TestCameraMonitor_DeviceCreation_Comprehensive/createNetworkCameraDeviceInfo_various_inputs/valid_rtsp_source (0.00s)
        --- PASS: TestCameraMonitor_DeviceCreation_Comprehensive/createNetworkCameraDeviceInfo_various_inputs/valid_http_source (0.00s)
        --- PASS: TestCameraMonitor_DeviceCreation_Comprehensive/createNetworkCameraDeviceInfo_various_inputs/empty_source (0.00s)
        --- PASS: TestCameraMonitor_DeviceCreation_Comprehensive/createNetworkCameraDeviceInfo_various_inputs/long_source (0.00s)
    --- PASS: TestCameraMonitor_DeviceCreation_Comprehensive/createFileCameraDeviceInfo_various_inputs (0.00s)
        --- PASS: TestCameraMonitor_DeviceCreation_Comprehensive/createFileCameraDeviceInfo_various_inputs/valid_mp4_source (0.00s)
        --- PASS: TestCameraMonitor_DeviceCreation_Comprehensive/createFileCameraDeviceInfo_various_inputs/valid_avi_source (0.00s)
        --- PASS: TestCameraMonitor_DeviceCreation_Comprehensive/createFileCameraDeviceInfo_various_inputs/empty_source (0.00s)
        --- PASS: TestCameraMonitor_DeviceCreation_Comprehensive/createFileCameraDeviceInfo_various_inputs/long_path_source (0.00s)
    --- PASS: TestCameraMonitor_DeviceCreation_Comprehensive/createGenericCameraDeviceInfo_various_inputs (0.00s)
        --- PASS: TestCameraMonitor_DeviceCreation_Comprehensive/createGenericCameraDeviceInfo_various_inputs/valid_video0_source (0.00s)
        --- PASS: TestCameraMonitor_DeviceCreation_Comprehensive/createGenericCameraDeviceInfo_various_inputs/valid_video1_source (0.00s)
        --- PASS: TestCameraMonitor_DeviceCreation_Comprehensive/createGenericCameraDeviceInfo_various_inputs/empty_source (0.00s)
        --- PASS: TestCameraMonitor_DeviceCreation_Comprehensive/createGenericCameraDeviceInfo_various_inputs/special_chars_source (0.00s)
=== RUN   TestCameraMonitor_SnapshotFunctionality_Comprehensive
time="2025-10-04 22:12:11" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:11" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:11" level=info msg="Created fresh device event source instance with smart selection"
time="2025-10-04 22:12:11" level=info msg="Starting hybrid camera monitor"
time="2025-10-04 22:12:11" level=info msg="Starting device event source"
time="2025-10-04 22:12:11" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:11" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:12:11" level=info msg="Device event source started successfully"
time="2025-10-04 22:12:11" level=info msg="Running in event-first mode with fsnotify support"
time="2025-10-04 22:12:11" level=info msg="Bounded worker pool started"
time="2025-10-04 22:12:11" level=info msg="Spawning monitor loops"
time="2025-10-04 22:12:11" level=info msg="Monitor start completed successfully"
    progressive_readiness.go:52: ✅ Monitor Start succeeded immediately - Progressive Readiness working
    camera_asserters_test.go:133: ✅ PROGRESSIVE READINESS: Monitor start succeeded immediately
time="2025-10-04 22:12:11" level=info msg="Starting seed discovery"
time="2025-10-04 22:12:11" level=info msg="Error checking device"
time="2025-10-04 22:12:11" level=warning msg="Device check error occurred"
time="2025-10-04 22:12:11" level=info msg="New V4L2 device discovered"
time="2025-10-04 22:12:11" level=info msg="Seed discovery completed"
time="2025-10-04 22:12:11" level=info msg="Monitor is now ready"
time="2025-10-04 22:12:11" level=info msg="Starting event-first camera monitoring"
time="2025-10-04 22:12:11" level=info msg="Camera reconcile loop started"
time="2025-10-04 22:12:11" level=info msg="Device event loop started"
    camera_asserters_test.go:159: ✅ Monitor is ready
=== RUN   TestCameraMonitor_SnapshotFunctionality_Comprehensive/buildV4L2SnapshotArgs_various_parameters
=== RUN   TestCameraMonitor_SnapshotFunctionality_Comprehensive/buildV4L2SnapshotArgs_various_parameters/default_params
    camera_specific_functions_test.go:380: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/camera/camera_specific_functions_test.go:380
        	Error:      	"--stream-mmap --stream-to /tmp/test1.jpg --stream-count 1 --set-fmt-video width=640,height=480" does not contain "/dev/video0"
        	Test:       	TestCameraMonitor_SnapshotFunctionality_Comprehensive/buildV4L2SnapshotArgs_various_parameters/default_params
        	Messages:   	Args should contain device path for default_params
    camera_specific_functions_test.go:383: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/camera/camera_specific_functions_test.go:383
        	Error:      	"--stream-mmap --stream-to /tmp/test1.jpg --stream-count 1 --set-fmt-video width=640,height=480" does not contain "mjpeg"
        	Test:       	TestCameraMonitor_SnapshotFunctionality_Comprehensive/buildV4L2SnapshotArgs_various_parameters/default_params
        	Messages:   	Args should contain format for default_params
=== RUN   TestCameraMonitor_SnapshotFunctionality_Comprehensive/buildV4L2SnapshotArgs_various_parameters/high_res
    camera_specific_functions_test.go:380: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/camera/camera_specific_functions_test.go:380
        	Error:      	"--stream-mmap --stream-to /tmp/test2.jpg --stream-count 1 --set-fmt-video width=1920,height=1080" does not contain "/dev/video0"
        	Test:       	TestCameraMonitor_SnapshotFunctionality_Comprehensive/buildV4L2SnapshotArgs_various_parameters/high_res
        	Messages:   	Args should contain device path for high_res
    camera_specific_functions_test.go:383: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/camera/camera_specific_functions_test.go:383
        	Error:      	"--stream-mmap --stream-to /tmp/test2.jpg --stream-count 1 --set-fmt-video width=1920,height=1080" does not contain "mjpeg"
        	Test:       	TestCameraMonitor_SnapshotFunctionality_Comprehensive/buildV4L2SnapshotArgs_various_parameters/high_res
        	Messages:   	Args should contain format for high_res
=== RUN   TestCameraMonitor_SnapshotFunctionality_Comprehensive/buildV4L2SnapshotArgs_various_parameters/low_res
    camera_specific_functions_test.go:380: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/camera/camera_specific_functions_test.go:380
        	Error:      	"--stream-mmap --stream-to /tmp/test3.jpg --stream-count 1 --set-fmt-video width=320,height=240" does not contain "/dev/video0"
        	Test:       	TestCameraMonitor_SnapshotFunctionality_Comprehensive/buildV4L2SnapshotArgs_various_parameters/low_res
        	Messages:   	Args should contain device path for low_res
    camera_specific_functions_test.go:383: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/camera/camera_specific_functions_test.go:383
        	Error:      	"--stream-mmap --stream-to /tmp/test3.jpg --stream-count 1 --set-fmt-video width=320,height=240" does not contain "mjpeg"
        	Test:       	TestCameraMonitor_SnapshotFunctionality_Comprehensive/buildV4L2SnapshotArgs_various_parameters/low_res
        	Messages:   	Args should contain format for low_res
=== RUN   TestCameraMonitor_SnapshotFunctionality_Comprehensive/buildV4L2SnapshotArgs_various_parameters/different_format
    camera_specific_functions_test.go:380: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/camera/camera_specific_functions_test.go:380
        	Error:      	"--stream-mmap --stream-to /tmp/test4.jpg --stream-count 1 --set-fmt-video width=640,height=480" does not contain "/dev/video0"
        	Test:       	TestCameraMonitor_SnapshotFunctionality_Comprehensive/buildV4L2SnapshotArgs_various_parameters/different_format
        	Messages:   	Args should contain device path for different_format
    camera_specific_functions_test.go:383: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/camera/camera_specific_functions_test.go:383
        	Error:      	"--stream-mmap --stream-to /tmp/test4.jpg --stream-count 1 --set-fmt-video width=640,height=480" does not contain "yuyv"
        	Test:       	TestCameraMonitor_SnapshotFunctionality_Comprehensive/buildV4L2SnapshotArgs_various_parameters/different_format
        	Messages:   	Args should contain format for different_format
=== RUN   TestCameraMonitor_SnapshotFunctionality_Comprehensive/buildV4L2SnapshotArgs_various_parameters/zero_dimensions
    camera_specific_functions_test.go:380: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/camera/camera_specific_functions_test.go:380
        	Error:      	"--stream-mmap --stream-to /tmp/test5.jpg --stream-count 1" does not contain "/dev/video0"
        	Test:       	TestCameraMonitor_SnapshotFunctionality_Comprehensive/buildV4L2SnapshotArgs_various_parameters/zero_dimensions
        	Messages:   	Args should contain device path for zero_dimensions
    camera_specific_functions_test.go:383: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/camera/camera_specific_functions_test.go:383
        	Error:      	"--stream-mmap --stream-to /tmp/test5.jpg --stream-count 1" does not contain "mjpeg"
        	Test:       	TestCameraMonitor_SnapshotFunctionality_Comprehensive/buildV4L2SnapshotArgs_various_parameters/zero_dimensions
        	Messages:   	Args should contain format for zero_dimensions
=== RUN   TestCameraMonitor_SnapshotFunctionality_Comprehensive/buildV4L2SnapshotArgs_various_parameters/negative_dimensions
    camera_specific_functions_test.go:380: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/camera/camera_specific_functions_test.go:380
        	Error:      	"--stream-mmap --stream-to /tmp/test6.jpg --stream-count 1" does not contain "/dev/video0"
        	Test:       	TestCameraMonitor_SnapshotFunctionality_Comprehensive/buildV4L2SnapshotArgs_various_parameters/negative_dimensions
        	Messages:   	Args should contain device path for negative_dimensions
    camera_specific_functions_test.go:383: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/camera/camera_specific_functions_test.go:383
        	Error:      	"--stream-mmap --stream-to /tmp/test6.jpg --stream-count 1" does not contain "mjpeg"
        	Test:       	TestCameraMonitor_SnapshotFunctionality_Comprehensive/buildV4L2SnapshotArgs_various_parameters/negative_dimensions
        	Messages:   	Args should contain format for negative_dimensions
=== RUN   TestCameraMonitor_SnapshotFunctionality_Comprehensive/buildV4L2SnapshotArgs_various_parameters/very_large_dimensions
    camera_specific_functions_test.go:380: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/camera/camera_specific_functions_test.go:380
        	Error:      	"--stream-mmap --stream-to /tmp/test7.jpg --stream-count 1 --set-fmt-video width=10000,height=10000" does not contain "/dev/video0"
        	Test:       	TestCameraMonitor_SnapshotFunctionality_Comprehensive/buildV4L2SnapshotArgs_various_parameters/very_large_dimensions
        	Messages:   	Args should contain device path for very_large_dimensions
    camera_specific_functions_test.go:383: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/camera/camera_specific_functions_test.go:383
        	Error:      	"--stream-mmap --stream-to /tmp/test7.jpg --stream-count 1 --set-fmt-video width=10000,height=10000" does not contain "mjpeg"
        	Test:       	TestCameraMonitor_SnapshotFunctionality_Comprehensive/buildV4L2SnapshotArgs_various_parameters/very_large_dimensions
        	Messages:   	Args should contain format for very_large_dimensions
=== RUN   TestCameraMonitor_SnapshotFunctionality_Comprehensive/buildV4L2SnapshotArgs_various_parameters/empty_format
    camera_specific_functions_test.go:380: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/camera/camera_specific_functions_test.go:380
        	Error:      	"--stream-mmap --stream-to /tmp/test8.jpg --stream-count 1 --set-fmt-video width=640,height=480" does not contain "/dev/video0"
        	Test:       	TestCameraMonitor_SnapshotFunctionality_Comprehensive/buildV4L2SnapshotArgs_various_parameters/empty_format
        	Messages:   	Args should contain device path for empty_format
=== RUN   TestCameraMonitor_SnapshotFunctionality_Comprehensive/buildV4L2SnapshotArgs_various_parameters/empty_output
    camera_specific_functions_test.go:380: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/camera/camera_specific_functions_test.go:380
        	Error:      	"--stream-mmap --stream-to  --stream-count 1 --set-fmt-video width=640,height=480" does not contain "/dev/video0"
        	Test:       	TestCameraMonitor_SnapshotFunctionality_Comprehensive/buildV4L2SnapshotArgs_various_parameters/empty_output
        	Messages:   	Args should contain device path for empty_output
    camera_specific_functions_test.go:383: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/camera/camera_specific_functions_test.go:383
        	Error:      	"--stream-mmap --stream-to  --stream-count 1 --set-fmt-video width=640,height=480" does not contain "mjpeg"
        	Test:       	TestCameraMonitor_SnapshotFunctionality_Comprehensive/buildV4L2SnapshotArgs_various_parameters/empty_output
        	Messages:   	Args should contain format for empty_output
=== RUN   TestCameraMonitor_SnapshotFunctionality_Comprehensive/buildV4L2SnapshotArgs_various_parameters/empty_device
    camera_specific_functions_test.go:383: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/camera/camera_specific_functions_test.go:383
        	Error:      	"--stream-mmap --stream-to /tmp/test9.jpg --stream-count 1 --set-fmt-video width=640,height=480" does not contain "mjpeg"
        	Test:       	TestCameraMonitor_SnapshotFunctionality_Comprehensive/buildV4L2SnapshotArgs_various_parameters/empty_device
        	Messages:   	Args should contain format for empty_device
=== NAME  TestCameraMonitor_SnapshotFunctionality_Comprehensive
    camera_specific_functions_test.go:388: ✅ buildV4L2SnapshotArgs with various parameters validated
=== RUN   TestCameraMonitor_SnapshotFunctionality_Comprehensive/snapshot_args_extreme_values
=== NAME  TestCameraMonitor_SnapshotFunctionality_Comprehensive
    camera_specific_functions_test.go:395: ✅ Monitor already running - snapshot args with extreme values validated
=== RUN   TestCameraMonitor_SnapshotFunctionality_Comprehensive/device_creation_extreme_inputs
=== NAME  TestCameraMonitor_SnapshotFunctionality_Comprehensive
    camera_specific_functions_test.go:434: ✅ Monitor already running - device creation with extreme inputs validated
time="2025-10-04 22:12:11" level=info msg="Stopping hybrid camera monitor"
time="2025-10-04 22:12:11" level=info msg="Camera reconcile loop stopped due to context cancellation"
time="2025-10-04 22:12:11" level=info msg="Device event loop stopped due to context cancellation"
time="2025-10-04 22:12:11" level=info msg="Event loop stopped"
time="2025-10-04 22:12:11" level=info msg="Stopped fsnotify device event source"
time="2025-10-04 22:12:11" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:12:11" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:12:11" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:12:11" level=info msg="Hybrid camera monitor stopped"
--- FAIL: TestCameraMonitor_SnapshotFunctionality_Comprehensive (0.21s)
    --- FAIL: TestCameraMonitor_SnapshotFunctionality_Comprehensive/buildV4L2SnapshotArgs_various_parameters (0.00s)
        --- FAIL: TestCameraMonitor_SnapshotFunctionality_Comprehensive/buildV4L2SnapshotArgs_various_parameters/default_params (0.00s)
        --- FAIL: TestCameraMonitor_SnapshotFunctionality_Comprehensive/buildV4L2SnapshotArgs_various_parameters/high_res (0.00s)
        --- FAIL: TestCameraMonitor_SnapshotFunctionality_Comprehensive/buildV4L2SnapshotArgs_various_parameters/low_res (0.00s)
        --- FAIL: TestCameraMonitor_SnapshotFunctionality_Comprehensive/buildV4L2SnapshotArgs_various_parameters/different_format (0.00s)
        --- FAIL: TestCameraMonitor_SnapshotFunctionality_Comprehensive/buildV4L2SnapshotArgs_various_parameters/zero_dimensions (0.00s)
        --- FAIL: TestCameraMonitor_SnapshotFunctionality_Comprehensive/buildV4L2SnapshotArgs_various_parameters/negative_dimensions (0.00s)
        --- FAIL: TestCameraMonitor_SnapshotFunctionality_Comprehensive/buildV4L2SnapshotArgs_various_parameters/very_large_dimensions (0.00s)
        --- FAIL: TestCameraMonitor_SnapshotFunctionality_Comprehensive/buildV4L2SnapshotArgs_various_parameters/empty_format (0.00s)
        --- FAIL: TestCameraMonitor_SnapshotFunctionality_Comprehensive/buildV4L2SnapshotArgs_various_parameters/empty_output (0.00s)
        --- FAIL: TestCameraMonitor_SnapshotFunctionality_Comprehensive/buildV4L2SnapshotArgs_various_parameters/empty_device (0.00s)
    --- PASS: TestCameraMonitor_SnapshotFunctionality_Comprehensive/snapshot_args_extreme_values (0.00s)
    --- PASS: TestCameraMonitor_SnapshotFunctionality_Comprehensive/device_creation_extreme_inputs (0.00s)
=== RUN   TestHybridCameraMonitor_DeviceEventProcessing_ReqCAM001_Success
time="2025-10-04 22:12:11" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:11" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:11" level=info msg="Created fresh device event source instance with smart selection"
time="2025-10-04 22:12:11" level=info msg="Starting hybrid camera monitor"
time="2025-10-04 22:12:11" level=info msg="Starting device event source"
time="2025-10-04 22:12:11" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:11" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:12:11" level=info msg="Device event source started successfully"
time="2025-10-04 22:12:11" level=info msg="Running in event-first mode with fsnotify support"
time="2025-10-04 22:12:11" level=info msg="Bounded worker pool started"
time="2025-10-04 22:12:11" level=info msg="Spawning monitor loops"
time="2025-10-04 22:12:11" level=info msg="Monitor start completed successfully"
    progressive_readiness.go:52: ✅ Monitor Start succeeded immediately - Progressive Readiness working
    camera_asserters_test.go:133: ✅ PROGRESSIVE READINESS: Monitor start succeeded immediately
time="2025-10-04 22:12:11" level=info msg="Starting seed discovery"
time="2025-10-04 22:12:11" level=info msg="Error checking device"
time="2025-10-04 22:12:11" level=warning msg="Device check error occurred"
time="2025-10-04 22:12:11" level=info msg="New V4L2 device discovered"
time="2025-10-04 22:12:11" level=info msg="Seed discovery completed"
time="2025-10-04 22:12:11" level=info msg="Monitor is now ready"
time="2025-10-04 22:12:11" level=info msg="Starting event-first camera monitoring"
time="2025-10-04 22:12:11" level=info msg="Camera reconcile loop started"
time="2025-10-04 22:12:11" level=info msg="Device event loop started"
    camera_asserters_test.go:159: ✅ Monitor is ready
time="2025-10-04 22:12:11" level=info msg="Processing device event"
time="2025-10-04 22:12:11" level=info msg="Processing device event"
time="2025-10-04 22:12:11" level=info msg="V4L2 device disconnected via event"
time="2025-10-04 22:12:11" level=info msg="Processing device event"
time="2025-10-04 22:12:11" level=info msg="V4L2 device changed via event"
    device_event_processing_test.go:53: ✅ Device event processing functionality validated
time="2025-10-04 22:12:11" level=info msg="Stopping hybrid camera monitor"
time="2025-10-04 22:12:11" level=info msg="Device event loop stopped due to context cancellation"
time="2025-10-04 22:12:11" level=info msg="Event loop stopped"
time="2025-10-04 22:12:11" level=info msg="Camera reconcile loop stopped due to context cancellation"
time="2025-10-04 22:12:11" level=info msg="Stopped fsnotify device event source"
time="2025-10-04 22:12:11" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:12:11" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:12:11" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:12:11" level=info msg="Hybrid camera monitor stopped"
--- PASS: TestHybridCameraMonitor_DeviceEventProcessing_ReqCAM001_Success (0.20s)
=== RUN   TestHybridCameraMonitor_DeviceEventHandlers_ReqCAM001_Success
time="2025-10-04 22:12:11" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:11" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:11" level=info msg="Created fresh device event source instance with smart selection"
time="2025-10-04 22:12:11" level=info msg="Starting hybrid camera monitor"
time="2025-10-04 22:12:11" level=info msg="Starting device event source"
time="2025-10-04 22:12:11" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:11" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:12:11" level=info msg="Device event source started successfully"
time="2025-10-04 22:12:11" level=info msg="Running in event-first mode with fsnotify support"
time="2025-10-04 22:12:11" level=info msg="Bounded worker pool started"
time="2025-10-04 22:12:11" level=info msg="Spawning monitor loops"
time="2025-10-04 22:12:11" level=info msg="Monitor start completed successfully"
    progressive_readiness.go:52: ✅ Monitor Start succeeded immediately - Progressive Readiness working
    camera_asserters_test.go:133: ✅ PROGRESSIVE READINESS: Monitor start succeeded immediately
time="2025-10-04 22:12:11" level=info msg="Starting seed discovery"
time="2025-10-04 22:12:11" level=info msg="Error checking device"
time="2025-10-04 22:12:11" level=warning msg="Device check error occurred"
time="2025-10-04 22:12:11" level=info msg="New V4L2 device discovered"
time="2025-10-04 22:12:11" level=info msg="Seed discovery completed"
time="2025-10-04 22:12:11" level=info msg="Monitor is now ready"
time="2025-10-04 22:12:11" level=info msg="Starting event-first camera monitoring"
time="2025-10-04 22:12:11" level=info msg="Camera reconcile loop started"
time="2025-10-04 22:12:11" level=info msg="Device event loop started"
    camera_asserters_test.go:159: ✅ Monitor is ready
time="2025-10-04 22:12:11" level=info msg="V4L2 device disconnected via event"
time="2025-10-04 22:12:11" level=info msg="V4L2 device changed via event"
    device_event_processing_test.go:96: ✅ Device event handlers validated
time="2025-10-04 22:12:11" level=info msg="Stopping hybrid camera monitor"
time="2025-10-04 22:12:11" level=info msg="Device event loop stopped due to context cancellation"
time="2025-10-04 22:12:11" level=info msg="Event loop stopped"
time="2025-10-04 22:12:11" level=info msg="Camera reconcile loop stopped due to context cancellation"
time="2025-10-04 22:12:11" level=info msg="Stopped fsnotify device event source"
time="2025-10-04 22:12:11" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:12:11" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:12:11" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:12:11" level=info msg="Hybrid camera monitor stopped"
--- PASS: TestHybridCameraMonitor_DeviceEventHandlers_ReqCAM001_Success (0.20s)
=== RUN   TestHybridCameraMonitor_DeviceCreation_ReqCAM001_Success
time="2025-10-04 22:12:11" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:11" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:11" level=info msg="Created fresh device event source instance with smart selection"
time="2025-10-04 22:12:11" level=info msg="Starting hybrid camera monitor"
time="2025-10-04 22:12:11" level=info msg="Starting device event source"
time="2025-10-04 22:12:11" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:11" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:12:11" level=info msg="Device event source started successfully"
time="2025-10-04 22:12:11" level=info msg="Running in event-first mode with fsnotify support"
time="2025-10-04 22:12:11" level=info msg="Bounded worker pool started"
time="2025-10-04 22:12:11" level=info msg="Spawning monitor loops"
time="2025-10-04 22:12:11" level=info msg="Monitor start completed successfully"
    progressive_readiness.go:52: ✅ Monitor Start succeeded immediately - Progressive Readiness working
time="2025-10-04 22:12:11" level=info msg="Starting seed discovery"
    camera_asserters_test.go:133: ✅ PROGRESSIVE READINESS: Monitor start succeeded immediately
time="2025-10-04 22:12:11" level=info msg="Error checking device"
time="2025-10-04 22:12:11" level=warning msg="Device check error occurred"
time="2025-10-04 22:12:11" level=info msg="New V4L2 device discovered"
time="2025-10-04 22:12:11" level=info msg="Seed discovery completed"
time="2025-10-04 22:12:11" level=info msg="Monitor is now ready"
time="2025-10-04 22:12:11" level=info msg="Starting event-first camera monitoring"
time="2025-10-04 22:12:11" level=info msg="Camera reconcile loop started"
time="2025-10-04 22:12:11" level=info msg="Device event loop started"
    camera_asserters_test.go:159: ✅ Monitor is ready
    device_event_processing_test.go:124: ✅ Device creation methods validated
time="2025-10-04 22:12:11" level=info msg="Stopping hybrid camera monitor"
time="2025-10-04 22:12:11" level=info msg="Device event loop stopped due to context cancellation"
time="2025-10-04 22:12:11" level=info msg="Event loop stopped"
time="2025-10-04 22:12:11" level=info msg="Camera reconcile loop stopped due to context cancellation"
time="2025-10-04 22:12:11" level=info msg="Stopped fsnotify device event source"
time="2025-10-04 22:12:11" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:12:11" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:12:11" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:12:11" level=info msg="Hybrid camera monitor stopped"
--- PASS: TestHybridCameraMonitor_DeviceCreation_ReqCAM001_Success (0.20s)
=== RUN   TestHybridCameraMonitor_PollingFunctionality_ReqCAM001_Success
time="2025-10-04 22:12:12" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:12" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:12" level=info msg="Created fresh device event source instance with smart selection"
time="2025-10-04 22:12:12" level=info msg="Starting hybrid camera monitor"
time="2025-10-04 22:12:12" level=info msg="Starting device event source"
time="2025-10-04 22:12:12" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:12" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:12:12" level=info msg="Device event source started successfully"
time="2025-10-04 22:12:12" level=info msg="Running in event-first mode with fsnotify support"
time="2025-10-04 22:12:12" level=info msg="Bounded worker pool started"
time="2025-10-04 22:12:12" level=info msg="Spawning monitor loops"
time="2025-10-04 22:12:12" level=info msg="Monitor start completed successfully"
    progressive_readiness.go:52: ✅ Monitor Start succeeded immediately - Progressive Readiness working
    camera_asserters_test.go:133: ✅ PROGRESSIVE READINESS: Monitor start succeeded immediately
time="2025-10-04 22:12:12" level=info msg="Starting seed discovery"
time="2025-10-04 22:12:12" level=info msg="Error checking device"
time="2025-10-04 22:12:12" level=warning msg="Device check error occurred"
time="2025-10-04 22:12:12" level=info msg="New V4L2 device discovered"
time="2025-10-04 22:12:12" level=info msg="Seed discovery completed"
time="2025-10-04 22:12:12" level=info msg="Monitor is now ready"
time="2025-10-04 22:12:12" level=info msg="Starting event-first camera monitoring"
time="2025-10-04 22:12:12" level=info msg="Camera reconcile loop started"
time="2025-10-04 22:12:12" level=info msg="Device event loop started"
    camera_asserters_test.go:159: ✅ Monitor is ready
    device_event_processing_test.go:140: ✅ Polling functionality validated
time="2025-10-04 22:12:12" level=info msg="Stopping hybrid camera monitor"
time="2025-10-04 22:12:12" level=info msg="Event loop stopped"
time="2025-10-04 22:12:12" level=info msg="Device event loop stopped due to context cancellation"
time="2025-10-04 22:12:12" level=info msg="Camera reconcile loop stopped due to context cancellation"
time="2025-10-04 22:12:12" level=info msg="Stopped fsnotify device event source"
time="2025-10-04 22:12:12" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:12:12" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:12:12" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:12:12" level=info msg="Hybrid camera monitor stopped"
--- PASS: TestHybridCameraMonitor_PollingFunctionality_ReqCAM001_Success (0.20s)
=== RUN   TestHybridCameraMonitor_UtilityFunctions_ReqCAM001_Success
time="2025-10-04 22:12:12" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:12" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:12" level=info msg="Created fresh device event source instance with smart selection"
time="2025-10-04 22:12:12" level=info msg="Starting hybrid camera monitor"
time="2025-10-04 22:12:12" level=info msg="Starting device event source"
time="2025-10-04 22:12:12" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:12" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:12:12" level=info msg="Device event source started successfully"
time="2025-10-04 22:12:12" level=info msg="Running in event-first mode with fsnotify support"
time="2025-10-04 22:12:12" level=info msg="Bounded worker pool started"
time="2025-10-04 22:12:12" level=info msg="Spawning monitor loops"
time="2025-10-04 22:12:12" level=info msg="Monitor start completed successfully"
    progressive_readiness.go:52: ✅ Monitor Start succeeded immediately - Progressive Readiness working
    camera_asserters_test.go:133: ✅ PROGRESSIVE READINESS: Monitor start succeeded immediately
time="2025-10-04 22:12:12" level=info msg="Starting seed discovery"
time="2025-10-04 22:12:12" level=info msg="Error checking device"
time="2025-10-04 22:12:12" level=warning msg="Device check error occurred"
time="2025-10-04 22:12:12" level=info msg="New V4L2 device discovered"
time="2025-10-04 22:12:12" level=info msg="Seed discovery completed"
time="2025-10-04 22:12:12" level=info msg="Monitor is now ready"
time="2025-10-04 22:12:12" level=info msg="Starting event-first camera monitoring"
time="2025-10-04 22:12:12" level=info msg="Camera reconcile loop started"
time="2025-10-04 22:12:12" level=info msg="Device event loop started"
    camera_asserters_test.go:159: ✅ Monitor is ready
    device_event_processing_test.go:158: ✅ Utility functions validated
time="2025-10-04 22:12:12" level=info msg="Stopping hybrid camera monitor"
time="2025-10-04 22:12:12" level=info msg="Device event loop stopped due to context cancellation"
time="2025-10-04 22:12:12" level=info msg="Camera reconcile loop stopped due to context cancellation"
time="2025-10-04 22:12:12" level=info msg="Event loop stopped"
time="2025-10-04 22:12:12" level=info msg="Stopped fsnotify device event source"
time="2025-10-04 22:12:12" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:12:12" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:12:12" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:12:12" level=info msg="Hybrid camera monitor stopped"
--- PASS: TestHybridCameraMonitor_UtilityFunctions_ReqCAM001_Success (0.20s)
=== RUN   TestHybridCameraMonitor_DeviceReconciliation_ReqCAM001_Success
time="2025-10-04 22:12:12" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:12" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:12" level=info msg="Created fresh device event source instance with smart selection"
time="2025-10-04 22:12:12" level=info msg="Starting hybrid camera monitor"
time="2025-10-04 22:12:12" level=info msg="Starting device event source"
time="2025-10-04 22:12:12" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:12" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:12:12" level=info msg="Device event source started successfully"
time="2025-10-04 22:12:12" level=info msg="Running in event-first mode with fsnotify support"
time="2025-10-04 22:12:12" level=info msg="Bounded worker pool started"
time="2025-10-04 22:12:12" level=info msg="Spawning monitor loops"
time="2025-10-04 22:12:12" level=info msg="Monitor start completed successfully"
    progressive_readiness.go:52: ✅ Monitor Start succeeded immediately - Progressive Readiness working
    camera_asserters_test.go:133: ✅ PROGRESSIVE READINESS: Monitor start succeeded immediately
time="2025-10-04 22:12:12" level=info msg="Starting seed discovery"
time="2025-10-04 22:12:12" level=info msg="Error checking device"
time="2025-10-04 22:12:12" level=warning msg="Device check error occurred"
time="2025-10-04 22:12:12" level=info msg="New V4L2 device discovered"
time="2025-10-04 22:12:12" level=info msg="Seed discovery completed"
time="2025-10-04 22:12:12" level=info msg="Monitor is now ready"
time="2025-10-04 22:12:12" level=info msg="Starting event-first camera monitoring"
time="2025-10-04 22:12:12" level=info msg="Camera reconcile loop started"
time="2025-10-04 22:12:12" level=info msg="Device event loop started"
    camera_asserters_test.go:159: ✅ Monitor is ready
time="2025-10-04 22:12:12" level=info msg="Performing device reconciliation"
    device_event_processing_test.go:174: ✅ Device reconciliation functionality validated
time="2025-10-04 22:12:12" level=info msg="Stopping hybrid camera monitor"
time="2025-10-04 22:12:12" level=info msg="Camera reconcile loop stopped due to context cancellation"
time="2025-10-04 22:12:12" level=info msg="Event loop stopped"
time="2025-10-04 22:12:12" level=info msg="Device event loop stopped due to context cancellation"
time="2025-10-04 22:12:12" level=info msg="Stopped fsnotify device event source"
time="2025-10-04 22:12:12" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:12:12" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:12:12" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:12:12" level=info msg="Hybrid camera monitor stopped"
--- PASS: TestHybridCameraMonitor_DeviceReconciliation_ReqCAM001_Success (0.20s)
=== RUN   TestFsnotifyDeviceEventSource_EventProcessing_ReqCAM001_Success
time="2025-10-04 22:12:12" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:12" level=info msg="Started fsnotify device event source"
    device_event_source_comprehensive_test.go:46: No events received within timeout (expected in test environment)
    device_event_source_comprehensive_test.go:49: ✅ Event processing functionality validated
time="2025-10-04 22:12:13" level=info msg="Event loop stopped"
time="2025-10-04 22:12:13" level=info msg="Stopped fsnotify device event source"
--- PASS: TestFsnotifyDeviceEventSource_EventProcessing_ReqCAM001_Success (1.10s)
=== RUN   TestUdevDeviceEventSource_EventProcessing_ReqCAM001_Success
time="2025-10-04 22:12:13" level=info msg="Started udev device event source"
    device_event_source_comprehensive_test.go:75: ✅ Udev event processing functionality validated
time="2025-10-04 22:12:13" level=info msg="Event loop stopped"
time="2025-10-04 22:12:13" level=info msg="Stopped udev device event source"
--- PASS: TestUdevDeviceEventSource_EventProcessing_ReqCAM001_Success (0.00s)
=== RUN   TestDeviceEventSourceFactory_ReqCAM001_Success
time="2025-10-04 22:12:13" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:13" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:13" level=info msg="Created fresh device event source instance with smart selection"
    device_event_source_comprehensive_test.go:91: ✅ Device event source factory validated
--- PASS: TestDeviceEventSourceFactory_ReqCAM001_Success (0.00s)
=== RUN   TestBoundedWorkerPool_Comprehensive_ReqCAM001_Success
time="2025-10-04 22:12:13" level=info msg="Bounded worker pool started"
time="2025-10-04 22:12:13" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:12:13" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:12:13" level=info msg="Bounded worker pool stopped"
    device_event_source_comprehensive_test.go:132: ✅ Bounded worker pool comprehensive functionality validated
--- PASS: TestBoundedWorkerPool_Comprehensive_ReqCAM001_Success (0.10s)
=== RUN   TestHybridCameraMonitor_AdvancedFunctionality_ReqCAM001_Success_DEPRECATED_2
    device_event_source_comprehensive_test.go:138: DEPRECATED: This test uses old API. Use refactored version instead.
--- SKIP: TestHybridCameraMonitor_AdvancedFunctionality_ReqCAM001_Success_DEPRECATED_2 (0.00s)
=== RUN   TestHybridCameraMonitor_ErrorHandlingAdvanced_ReqCAM001_Success
time="2025-10-04 22:12:13" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:13" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:13" level=info msg="Created fresh device event source instance with smart selection"
time="2025-10-04 22:12:13" level=info msg="Stopping hybrid camera monitor"
    device_event_source_comprehensive_test.go:150: Stop result: <nil>
time="2025-10-04 22:12:13" level=info msg="Selecting optimal pixel format for camera"
    device_event_source_comprehensive_test.go:159: Pixel format selection failed (expected): device /dev/nonexistent not found in monitor
    device_event_source_comprehensive_test.go:164: ✅ Error handling scenarios validated
--- PASS: TestHybridCameraMonitor_ErrorHandlingAdvanced_ReqCAM001_Success (0.00s)
=== RUN   TestHybridCameraMonitor_Performance_ReqCAM001_Success
time="2025-10-04 22:12:13" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:13" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:13" level=info msg="Created fresh device event source instance with smart selection"
time="2025-10-04 22:12:13" level=info msg="Starting hybrid camera monitor"
time="2025-10-04 22:12:13" level=info msg="Starting device event source"
time="2025-10-04 22:12:13" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:13" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:12:13" level=info msg="Device event source started successfully"
time="2025-10-04 22:12:13" level=info msg="Running in event-first mode with fsnotify support"
time="2025-10-04 22:12:13" level=info msg="Bounded worker pool started"
time="2025-10-04 22:12:13" level=info msg="Spawning monitor loops"
time="2025-10-04 22:12:13" level=info msg="Monitor start completed successfully"
    progressive_readiness.go:52: ✅ Monitor Start succeeded immediately - Progressive Readiness working
    camera_asserters_test.go:133: ✅ PROGRESSIVE READINESS: Monitor start succeeded immediately
time="2025-10-04 22:12:13" level=info msg="Starting seed discovery"
    device_event_source_comprehensive_test.go:179: Startup duration: 411.226µs
time="2025-10-04 22:12:13" level=info msg="Error checking device"
time="2025-10-04 22:12:13" level=warning msg="Device check error occurred"
time="2025-10-04 22:12:13" level=info msg="New V4L2 device discovered"
time="2025-10-04 22:12:13" level=info msg="Seed discovery completed"
time="2025-10-04 22:12:13" level=info msg="Monitor is now ready"
time="2025-10-04 22:12:13" level=info msg="Starting event-first camera monitoring"
time="2025-10-04 22:12:13" level=info msg="Camera reconcile loop started"
time="2025-10-04 22:12:13" level=info msg="Device event loop started"
    camera_asserters_test.go:159: ✅ Monitor is ready
    device_event_source_comprehensive_test.go:187: Readiness duration: 100.179551ms
time="2025-10-04 22:12:13" level=info msg="Stopping hybrid camera monitor"
time="2025-10-04 22:12:13" level=info msg="Event loop stopped"
time="2025-10-04 22:12:13" level=info msg="Camera reconcile loop stopped due to context cancellation"
time="2025-10-04 22:12:13" level=info msg="Device event loop stopped due to context cancellation"
time="2025-10-04 22:12:13" level=info msg="Stopped fsnotify device event source"
time="2025-10-04 22:12:13" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:12:13" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:12:13" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:12:13" level=info msg="Hybrid camera monitor stopped"
    camera_asserters_test.go:147: ✅ Monitor stopped successfully
    device_event_source_comprehensive_test.go:195: Stop duration: 476.908µs
    device_event_source_comprehensive_test.go:197: ✅ Performance scenarios validated
--- PASS: TestHybridCameraMonitor_Performance_ReqCAM001_Success (0.10s)
=== RUN   TestSmartDeviceEventSourceSelection
=== PAUSE TestSmartDeviceEventSourceSelection
=== RUN   TestEnvironmentDetectionAccuracy
=== PAUSE TestEnvironmentDetectionAccuracy
=== RUN   TestFsnotifyDeviceEventSource_Basic
=== RUN   TestFsnotifyDeviceEventSource_Basic/creation
time="2025-10-04 22:12:13" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:13" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:13" level=info msg="Created fresh device event source instance with smart selection"
=== RUN   TestFsnotifyDeviceEventSource_Basic/creation_with_nil_logger
time="2025-10-04 22:12:13" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:13" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:13" level=info msg="Created fresh device event source instance with smart selection"
--- PASS: TestFsnotifyDeviceEventSource_Basic (0.00s)
    --- PASS: TestFsnotifyDeviceEventSource_Basic/creation (0.00s)
    --- PASS: TestFsnotifyDeviceEventSource_Basic/creation_with_nil_logger (0.00s)
=== RUN   TestFsnotifyDeviceEventSource_StartStop
time="2025-10-04 22:12:13" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:13" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:13" level=info msg="Created fresh device event source instance with smart selection"
=== RUN   TestFsnotifyDeviceEventSource_StartStop/start_stop_cycle
time="2025-10-04 22:12:13" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:13" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:12:13" level=info msg="Event loop stopped"
time="2025-10-04 22:12:13" level=info msg="Stopped fsnotify device event source"
=== RUN   TestFsnotifyDeviceEventSource_StartStop/double_start
time="2025-10-04 22:12:13" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:13" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:12:13" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:13" level=info msg="Event loop stopped"
time="2025-10-04 22:12:13" level=info msg="Stopped fsnotify device event source"
=== RUN   TestFsnotifyDeviceEventSource_StartStop/start_with_cancelled_context
time="2025-10-04 22:12:13" level=info msg="Device event source Start() called"
=== RUN   TestFsnotifyDeviceEventSource_StartStop/close_without_start
time="2025-10-04 22:12:13" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:13" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:13" level=info msg="Created fresh device event source instance with smart selection"
=== RUN   TestFsnotifyDeviceEventSource_StartStop/multiple_close_calls
time="2025-10-04 22:12:13" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:13" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:13" level=info msg="Created fresh device event source instance with smart selection"
--- PASS: TestFsnotifyDeviceEventSource_StartStop (0.00s)
    --- PASS: TestFsnotifyDeviceEventSource_StartStop/start_stop_cycle (0.00s)
    --- PASS: TestFsnotifyDeviceEventSource_StartStop/double_start (0.00s)
    --- PASS: TestFsnotifyDeviceEventSource_StartStop/start_with_cancelled_context (0.00s)
    --- PASS: TestFsnotifyDeviceEventSource_StartStop/close_without_start (0.00s)
    --- PASS: TestFsnotifyDeviceEventSource_StartStop/multiple_close_calls (0.00s)
=== RUN   TestFsnotifyDeviceEventSource_Events
time="2025-10-04 22:12:13" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:13" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:13" level=info msg="Created fresh device event source instance with smart selection"
=== RUN   TestFsnotifyDeviceEventSource_Events/events_channel_before_start
=== RUN   TestFsnotifyDeviceEventSource_Events/events_channel_after_start
time="2025-10-04 22:12:14" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:14" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:12:14" level=info msg="Event loop stopped"
time="2025-10-04 22:12:14" level=info msg="Stopped fsnotify device event source"
--- PASS: TestFsnotifyDeviceEventSource_Events (0.20s)
    --- PASS: TestFsnotifyDeviceEventSource_Events/events_channel_before_start (0.10s)
    --- PASS: TestFsnotifyDeviceEventSource_Events/events_channel_after_start (0.10s)
=== RUN   TestFsnotifyDeviceEventSource_EventProcessing
time="2025-10-04 22:12:14" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:14" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:14" level=info msg="Created fresh device event source instance with smart selection"
=== RUN   TestFsnotifyDeviceEventSource_EventProcessing/process_event_filtering
time="2025-10-04 22:12:14" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:14" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:12:14" level=info msg="Event loop stopped"
time="2025-10-04 22:12:14" level=info msg="Stopped fsnotify device event source"
--- PASS: TestFsnotifyDeviceEventSource_EventProcessing (0.00s)
    --- PASS: TestFsnotifyDeviceEventSource_EventProcessing/process_event_filtering (0.00s)
=== RUN   TestFsnotifyDeviceEventSource_Concurrency
=== RUN   TestFsnotifyDeviceEventSource_Concurrency/concurrent_start_stop
    device_event_source_test.go:240: Event source not immediately started, waiting for start event
time="2025-10-04 22:12:14" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:14" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:14" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:14" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:14" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:12:14" level=info msg="Device event source Start() called"
    device_event_source_test.go:240: Event source started
time="2025-10-04 22:12:14" level=info msg="Event loop stopped"
time="2025-10-04 22:12:14" level=info msg="Stopped fsnotify device event source"
=== RUN   TestFsnotifyDeviceEventSource_Concurrency/concurrent_events_access
time="2025-10-04 22:12:14" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:14" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:12:14" level=info msg="Event loop stopped"
time="2025-10-04 22:12:14" level=info msg="Stopped fsnotify device event source"
--- PASS: TestFsnotifyDeviceEventSource_Concurrency (0.11s)
    --- PASS: TestFsnotifyDeviceEventSource_Concurrency/concurrent_start_stop (0.01s)
    --- PASS: TestFsnotifyDeviceEventSource_Concurrency/concurrent_events_access (0.10s)
=== RUN   TestFsnotifyDeviceEventSource_ErrorHandling
=== RUN   TestFsnotifyDeviceEventSource_ErrorHandling/watcher_creation_failure
time="2025-10-04 22:12:14" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:14" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:14" level=info msg="Created fresh device event source instance with smart selection"
=== RUN   TestFsnotifyDeviceEventSource_ErrorHandling/start_with_invalid_directory
time="2025-10-04 22:12:14" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:14" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:12:14" level=info msg="Event loop stopped"
time="2025-10-04 22:12:14" level=info msg="Stopped fsnotify device event source"
--- PASS: TestFsnotifyDeviceEventSource_ErrorHandling (0.00s)
    --- PASS: TestFsnotifyDeviceEventSource_ErrorHandling/watcher_creation_failure (0.00s)
    --- PASS: TestFsnotifyDeviceEventSource_ErrorHandling/start_with_invalid_directory (0.00s)
=== RUN   TestUdevDeviceEventSource_Basic
=== RUN   TestUdevDeviceEventSource_Basic/creation
time="2025-10-04 22:12:14" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:14" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:14" level=info msg="Created fresh device event source instance with smart selection"
=== RUN   TestUdevDeviceEventSource_Basic/creation_with_nil_logger
time="2025-10-04 22:12:14" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:14" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:14" level=info msg="Created fresh device event source instance with smart selection"
--- PASS: TestUdevDeviceEventSource_Basic (0.00s)
    --- PASS: TestUdevDeviceEventSource_Basic/creation (0.00s)
    --- PASS: TestUdevDeviceEventSource_Basic/creation_with_nil_logger (0.00s)
=== RUN   TestUdevDeviceEventSource_StartStop
time="2025-10-04 22:12:14" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:14" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:14" level=info msg="Created fresh device event source instance with smart selection"
=== RUN   TestUdevDeviceEventSource_StartStop/start_stop_cycle
time="2025-10-04 22:12:14" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:14" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:12:14" level=info msg="Event loop stopped"
time="2025-10-04 22:12:14" level=info msg="Stopped fsnotify device event source"
=== RUN   TestUdevDeviceEventSource_StartStop/double_start
time="2025-10-04 22:12:14" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:14" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:12:14" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:14" level=info msg="Event loop stopped"
time="2025-10-04 22:12:14" level=info msg="Stopped fsnotify device event source"
=== RUN   TestUdevDeviceEventSource_StartStop/start_with_cancelled_context
time="2025-10-04 22:12:14" level=info msg="Device event source Start() called"
--- PASS: TestUdevDeviceEventSource_StartStop (0.00s)
    --- PASS: TestUdevDeviceEventSource_StartStop/start_stop_cycle (0.00s)
    --- PASS: TestUdevDeviceEventSource_StartStop/double_start (0.00s)
    --- PASS: TestUdevDeviceEventSource_StartStop/start_with_cancelled_context (0.00s)
=== RUN   TestUdevDeviceEventSource_Events
time="2025-10-04 22:12:14" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:14" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:14" level=info msg="Created fresh device event source instance with smart selection"
=== RUN   TestUdevDeviceEventSource_Events/events_channel_before_start
=== RUN   TestUdevDeviceEventSource_Events/events_channel_after_start
time="2025-10-04 22:12:14" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:14" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:12:14" level=info msg="Event loop stopped"
time="2025-10-04 22:12:14" level=info msg="Stopped fsnotify device event source"
--- PASS: TestUdevDeviceEventSource_Events (0.20s)
    --- PASS: TestUdevDeviceEventSource_Events/events_channel_before_start (0.10s)
    --- PASS: TestUdevDeviceEventSource_Events/events_channel_after_start (0.10s)
=== RUN   TestDeviceEventTypes
=== PAUSE TestDeviceEventTypes
=== RUN   TestDeviceEventSource_Interface
=== PAUSE TestDeviceEventSource_Interface
=== RUN   TestDeviceEventSource_Integration
=== RUN   TestDeviceEventSource_Integration/fsnotify_lifecycle
time="2025-10-04 22:12:14" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:14" level=info msg="Started fsnotify device event source"
    device_event_source_test.go:584: Event source already started
time="2025-10-04 22:12:14" level=info msg="Event loop stopped"
time="2025-10-04 22:12:14" level=info msg="Stopped fsnotify device event source"
=== RUN   TestDeviceEventSource_Integration/udev_lifecycle
time="2025-10-04 22:12:14" level=info msg="Started udev device event source"
    device_event_source_test.go:611: Event source already started
time="2025-10-04 22:12:14" level=info msg="Event loop stopped"
time="2025-10-04 22:12:14" level=info msg="Stopped udev device event source"
--- PASS: TestDeviceEventSource_Integration (0.00s)
    --- PASS: TestDeviceEventSource_Integration/fsnotify_lifecycle (0.00s)
    --- PASS: TestDeviceEventSource_Integration/udev_lifecycle (0.00s)
=== RUN   TestDeviceEventSource_ErrorRecovery
=== RUN   TestDeviceEventSource_ErrorRecovery/fsnotify_recovery_after_error
time="2025-10-04 22:12:14" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:14" level=info msg="Started fsnotify device event source"
    device_event_source_test.go:637: Event source already started
time="2025-10-04 22:12:14" level=info msg="Event loop stopped"
time="2025-10-04 22:12:14" level=info msg="Stopped fsnotify device event source"
time="2025-10-04 22:12:14" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:14" level=info msg="Started fsnotify device event source"
    device_event_source_test.go:637: Event source already started
time="2025-10-04 22:12:14" level=info msg="Event loop stopped"
time="2025-10-04 22:12:14" level=info msg="Stopped fsnotify device event source"
time="2025-10-04 22:12:14" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:14" level=info msg="Started fsnotify device event source"
    device_event_source_test.go:637: Event source already started
time="2025-10-04 22:12:14" level=info msg="Event loop stopped"
time="2025-10-04 22:12:14" level=info msg="Stopped fsnotify device event source"
=== RUN   TestDeviceEventSource_ErrorRecovery/udev_recovery_after_error
time="2025-10-04 22:12:14" level=info msg="Started udev device event source"
    device_event_source_test.go:662: Event source already started
time="2025-10-04 22:12:14" level=info msg="Event loop stopped"
time="2025-10-04 22:12:14" level=info msg="Stopped udev device event source"
time="2025-10-04 22:12:14" level=info msg="Started udev device event source"
    device_event_source_test.go:662: Event source already started
time="2025-10-04 22:12:14" level=info msg="Event loop stopped"
time="2025-10-04 22:12:14" level=info msg="Stopped udev device event source"
time="2025-10-04 22:12:14" level=info msg="Started udev device event source"
    device_event_source_test.go:662: Event source already started
time="2025-10-04 22:12:14" level=info msg="Event loop stopped"
time="2025-10-04 22:12:14" level=info msg="Stopped udev device event source"
--- PASS: TestDeviceEventSource_ErrorRecovery (0.00s)
    --- PASS: TestDeviceEventSource_ErrorRecovery/fsnotify_recovery_after_error (0.00s)
    --- PASS: TestDeviceEventSource_ErrorRecovery/udev_recovery_after_error (0.00s)
=== RUN   TestUdevDeviceEventSource_EventsSupported
--- PASS: TestUdevDeviceEventSource_EventsSupported (0.00s)
=== RUN   TestFsnotifyDeviceEventSource_ProcessEventTypes
time="2025-10-04 22:12:14" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:14" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:12:14" level=info msg="Event loop stopped"
time="2025-10-04 22:12:14" level=info msg="Stopped fsnotify device event source"
--- PASS: TestFsnotifyDeviceEventSource_ProcessEventTypes (0.00s)
=== RUN   TestDeviceEventSource_ConstructorEdgeCases
=== RUN   TestDeviceEventSource_ConstructorEdgeCases/fsnotify_with_nil_logger
=== RUN   TestDeviceEventSource_ConstructorEdgeCases/udev_with_nil_logger
--- PASS: TestDeviceEventSource_ConstructorEdgeCases (0.00s)
    --- PASS: TestDeviceEventSource_ConstructorEdgeCases/fsnotify_with_nil_logger (0.00s)
    --- PASS: TestDeviceEventSource_ConstructorEdgeCases/udev_with_nil_logger (0.00s)
=== RUN   TestDeviceEventSource_ErrorPathCoverage
=== RUN   TestDeviceEventSource_ErrorPathCoverage/fsnotify_start_with_cancelled_context
time="2025-10-04 22:12:14" level=info msg="Device event source Start() called"
=== RUN   TestDeviceEventSource_ErrorPathCoverage/udev_start_stop_cycle
time="2025-10-04 22:12:14" level=info msg="Started udev device event source"
time="2025-10-04 22:12:14" level=info msg="Event loop stopped"
time="2025-10-04 22:12:14" level=info msg="Stopped udev device event source"
--- PASS: TestDeviceEventSource_ErrorPathCoverage (0.00s)
    --- PASS: TestDeviceEventSource_ErrorPathCoverage/fsnotify_start_with_cancelled_context (0.00s)
    --- PASS: TestDeviceEventSource_ErrorPathCoverage/udev_start_stop_cycle (0.00s)
=== RUN   TestDeviceEventSource_EnvironmentDetection
=== RUN   TestDeviceEventSource_EnvironmentDetection/container_environment_detection
=== RUN   TestDeviceEventSource_EnvironmentDetection/udev_availability_detection
=== RUN   TestDeviceEventSource_EnvironmentDetection/smart_device_event_source_selection
time="2025-10-04 22:12:14" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:14" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:14" level=info msg="Created fresh device event source instance with smart selection"
--- PASS: TestDeviceEventSource_EnvironmentDetection (0.00s)
    --- PASS: TestDeviceEventSource_EnvironmentDetection/container_environment_detection (0.00s)
    --- PASS: TestDeviceEventSource_EnvironmentDetection/udev_availability_detection (0.00s)
    --- PASS: TestDeviceEventSource_EnvironmentDetection/smart_device_event_source_selection (0.00s)
=== RUN   TestHybridMonitor_WorkerPoolIntegration
time="2025-10-04 22:12:14" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:14" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:14" level=info msg="Created fresh device event source instance with smart selection"
time="2025-10-04 22:12:14" level=info msg="Starting hybrid camera monitor"
time="2025-10-04 22:12:14" level=info msg="Starting device event source"
time="2025-10-04 22:12:14" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:14" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:12:14" level=info msg="Device event source started successfully"
time="2025-10-04 22:12:14" level=info msg="Running in event-first mode with fsnotify support"
time="2025-10-04 22:12:14" level=info msg="Bounded worker pool started"
time="2025-10-04 22:12:14" level=info msg="Spawning monitor loops"
time="2025-10-04 22:12:14" level=info msg="Monitor start completed successfully"
time="2025-10-04 22:12:14" level=info msg="Stopping hybrid camera monitor"
time="2025-10-04 22:12:14" level=info msg="Starting seed discovery"
time="2025-10-04 22:12:14" level=info msg="Event loop stopped"
time="2025-10-04 22:12:14" level=info msg="Error checking device"
time="2025-10-04 22:12:14" level=info msg="Failed to probe device capabilities"
time="2025-10-04 22:12:14" level=warning msg="Device check error occurred"
time="2025-10-04 22:12:14" level=info msg="New V4L2 device discovered"
time="2025-10-04 22:12:14" level=info msg="Seed discovery completed"
time="2025-10-04 22:12:14" level=info msg="Monitor is now ready"
time="2025-10-04 22:12:14" level=info msg="Starting event-first camera monitoring"
time="2025-10-04 22:12:14" level=info msg="Device event loop started"
time="2025-10-04 22:12:14" level=info msg="Device event loop stopped due to context cancellation"
time="2025-10-04 22:12:14" level=info msg="Camera reconcile loop started"
time="2025-10-04 22:12:14" level=info msg="Camera reconcile loop stopped due to context cancellation"
time="2025-10-04 22:12:14" level=info msg="Stopped fsnotify device event source"
time="2025-10-04 22:12:14" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:12:14" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:12:14" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:12:14" level=info msg="Hybrid camera monitor stopped"
--- PASS: TestHybridMonitor_WorkerPoolIntegration (0.00s)
=== RUN   TestHybridMonitor_EventHandlerResourceManagement
time="2025-10-04 22:12:14" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:14" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:14" level=info msg="Created fresh device event source instance with smart selection"
time="2025-10-04 22:12:14" level=info msg="Starting hybrid camera monitor"
time="2025-10-04 22:12:14" level=info msg="Starting device event source"
time="2025-10-04 22:12:14" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:14" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:12:14" level=info msg="Device event source started successfully"
time="2025-10-04 22:12:14" level=info msg="Running in event-first mode with fsnotify support"
time="2025-10-04 22:12:14" level=info msg="Bounded worker pool started"
time="2025-10-04 22:12:14" level=info msg="Spawning monitor loops"
time="2025-10-04 22:12:14" level=info msg="Monitor start completed successfully"
time="2025-10-04 22:12:14" level=info msg="Starting seed discovery"
time="2025-10-04 22:12:14" level=info msg="Error checking device"
time="2025-10-04 22:12:14" level=warning msg="Device check error occurred"
time="2025-10-04 22:12:14" level=info msg="New V4L2 device discovered"
time="2025-10-04 22:12:14" level=info msg="Seed discovery completed"
time="2025-10-04 22:12:14" level=info msg="Monitor is now ready"
time="2025-10-04 22:12:14" level=info msg="Starting event-first camera monitoring"
time="2025-10-04 22:12:14" level=info msg="Camera reconcile loop started"
time="2025-10-04 22:12:14" level=info msg="Device event loop started"
time="2025-10-04 22:12:14" level=info msg="Added camera event handler"
time="2025-10-04 22:12:14" level=info msg="Stopping hybrid camera monitor"
time="2025-10-04 22:12:14" level=info msg="Device event loop stopped due to context cancellation"
time="2025-10-04 22:12:14" level=info msg="Camera reconcile loop stopped due to context cancellation"
time="2025-10-04 22:12:14" level=info msg="Event loop stopped"
time="2025-10-04 22:12:14" level=info msg="Stopped fsnotify device event source"
time="2025-10-04 22:12:14" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:12:14" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:12:14" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:12:14" level=info msg="Hybrid camera monitor stopped"
    hybrid_monitor_resource_test.go:134: ✅ Event handler resource management validated
time="2025-10-04 22:12:14" level=info msg="Stopping hybrid camera monitor"
--- PASS: TestHybridMonitor_EventHandlerResourceManagement (0.12s)
=== RUN   TestHybridMonitor_GracefulShutdownWithWorkerPool
time="2025-10-04 22:12:14" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:14" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:14" level=info msg="Created fresh device event source instance with smart selection"
time="2025-10-04 22:12:14" level=info msg="Starting hybrid camera monitor"
time="2025-10-04 22:12:14" level=info msg="Starting device event source"
time="2025-10-04 22:12:14" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:14" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:12:14" level=info msg="Device event source started successfully"
time="2025-10-04 22:12:14" level=info msg="Running in event-first mode with fsnotify support"
time="2025-10-04 22:12:14" level=info msg="Bounded worker pool started"
time="2025-10-04 22:12:14" level=info msg="Spawning monitor loops"
time="2025-10-04 22:12:14" level=info msg="Monitor start completed successfully"
time="2025-10-04 22:12:14" level=info msg="Starting seed discovery"
time="2025-10-04 22:12:14" level=info msg="Error checking device"
time="2025-10-04 22:12:14" level=warning msg="Device check error occurred"
time="2025-10-04 22:12:14" level=info msg="New V4L2 device discovered"
time="2025-10-04 22:12:14" level=info msg="Seed discovery completed"
time="2025-10-04 22:12:14" level=info msg="Monitor is now ready"
time="2025-10-04 22:12:14" level=info msg="Starting event-first camera monitoring"
time="2025-10-04 22:12:14" level=info msg="Camera reconcile loop started"
time="2025-10-04 22:12:14" level=info msg="Device event loop started"
time="2025-10-04 22:12:15" level=info msg="Event loop stopped"
time="2025-10-04 22:12:15" level=info msg="Device event loop stopped due to context cancellation"
time="2025-10-04 22:12:15" level=info msg="Camera reconcile loop stopped due to context cancellation"
time="2025-10-04 22:12:15" level=info msg="Added camera event handler"
time="2025-10-04 22:12:15" level=info msg="Stopping hybrid camera monitor"
time="2025-10-04 22:12:15" level=info msg="Device event loop stopped due to context cancellation"
time="2025-10-04 22:12:15" level=info msg="Camera reconcile loop stopped due to context cancellation"
time="2025-10-04 22:12:15" level=info msg="Event loop stopped"
time="2025-10-04 22:12:15" level=info msg="Stopped fsnotify device event source"
time="2025-10-04 22:12:15" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:12:15" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:12:15" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:12:15" level=info msg="Hybrid camera monitor stopped"
    hybrid_monitor_resource_test.go:214: ✅ Graceful shutdown completed in 190.852376ms (handler work: 200ms)
--- PASS: TestHybridMonitor_GracefulShutdownWithWorkerPool (1.20s)
=== RUN   TestHybridMonitor_WorkerPoolFailureHandling
time="2025-10-04 22:12:15" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:15" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:15" level=info msg="Created fresh device event source instance with smart selection"
time="2025-10-04 22:12:15" level=info msg="Starting hybrid camera monitor"
time="2025-10-04 22:12:15" level=info msg="Starting device event source"
time="2025-10-04 22:12:15" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:15" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:12:15" level=info msg="Device event source started successfully"
time="2025-10-04 22:12:15" level=info msg="Running in event-first mode with fsnotify support"
time="2025-10-04 22:12:15" level=info msg="Bounded worker pool started"
time="2025-10-04 22:12:15" level=info msg="Spawning monitor loops"
time="2025-10-04 22:12:15" level=info msg="Monitor start completed successfully"
time="2025-10-04 22:12:15" level=info msg="Starting seed discovery"
time="2025-10-04 22:12:15" level=info msg="Error checking device"
time="2025-10-04 22:12:15" level=warning msg="Device check error occurred"
time="2025-10-04 22:12:15" level=info msg="New V4L2 device discovered"
time="2025-10-04 22:12:15" level=info msg="Seed discovery completed"
time="2025-10-04 22:12:15" level=info msg="Monitor is now ready"
time="2025-10-04 22:12:15" level=info msg="Starting event-first camera monitoring"
time="2025-10-04 22:12:15" level=info msg="Camera reconcile loop started"
time="2025-10-04 22:12:15" level=info msg="Device event loop started"
time="2025-10-04 22:12:15" level=info msg="Added camera event handler"
time="2025-10-04 22:12:15" level=error msg="Error in camera event handler"
time="2025-10-04 22:12:15" level=info msg="Stopping hybrid camera monitor"
time="2025-10-04 22:12:15" level=info msg="Device event loop stopped due to context cancellation"
time="2025-10-04 22:12:15" level=info msg="Event loop stopped"
time="2025-10-04 22:12:15" level=info msg="Camera reconcile loop stopped due to context cancellation"
time="2025-10-04 22:12:15" level=info msg="Stopped fsnotify device event source"
time="2025-10-04 22:12:15" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:12:15" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:12:15" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:12:15" level=info msg="Hybrid camera monitor stopped"
    hybrid_monitor_resource_test.go:287: ✅ Worker pool failure handling validated - system remains stable
time="2025-10-04 22:12:15" level=info msg="Stopping hybrid camera monitor"
--- PASS: TestHybridMonitor_WorkerPoolFailureHandling (0.03s)
=== RUN   TestCameraEvent_Constants
=== PAUSE TestCameraEvent_Constants
=== RUN   TestCameraEventData_Structure
=== PAUSE TestCameraEventData_Structure
=== RUN   TestDeviceChecker_RealImplementation
=== RUN   TestDeviceChecker_RealImplementation/real_filesystem_checks
=== RUN   TestDeviceChecker_RealImplementation/camera_device_checks
    interfaces_test.go:72: Found real camera device: /dev/video0
    interfaces_test.go:72: Found real camera device: /dev/video1
    interfaces_test.go:74: No camera at: /dev/video2
--- PASS: TestDeviceChecker_RealImplementation (0.00s)
    --- PASS: TestDeviceChecker_RealImplementation/real_filesystem_checks (0.00s)
    --- PASS: TestDeviceChecker_RealImplementation/camera_device_checks (0.00s)
=== RUN   TestV4L2CommandExecutor_RealImplementation
=== RUN   TestV4L2CommandExecutor_RealImplementation/basic_command_execution
    interfaces_test.go:94: Command execution failed (expected on some systems): v4l2-ctl command failed with exit status 1
=== RUN   TestV4L2CommandExecutor_RealImplementation/camera_device_commands
    interfaces_test.go:107: Testing V4L2 commands on /dev/video0
    interfaces_test.go:115: Could not query /dev/video0: v4l2-ctl error: v4l2-ctl: unrecognized option '--device-info'
    interfaces_test.go:107: Testing V4L2 commands on /dev/video1
    interfaces_test.go:115: Could not query /dev/video1: v4l2-ctl error: v4l2-ctl: unrecognized option '--device-info'
--- PASS: TestV4L2CommandExecutor_RealImplementation (0.01s)
    --- PASS: TestV4L2CommandExecutor_RealImplementation/basic_command_execution (0.00s)
    --- PASS: TestV4L2CommandExecutor_RealImplementation/camera_device_commands (0.01s)
=== RUN   TestDeviceInfoParser_RealImplementation
=== RUN   TestDeviceInfoParser_RealImplementation/parse_device_info
    test_helpers_test.go:104: Found accessible camera device: /dev/video0
    interfaces_test.go:150: Parsed real device: Driver=uvcvideo, Card=USB 2.0 Camera: USB 2.0 Camera
=== RUN   TestDeviceInfoParser_RealImplementation/parse_device_formats
=== RUN   TestDeviceInfoParser_RealImplementation/parse_device_frame_rates
--- PASS: TestDeviceInfoParser_RealImplementation (0.02s)
    --- PASS: TestDeviceInfoParser_RealImplementation/parse_device_info (0.02s)
    --- PASS: TestDeviceInfoParser_RealImplementation/parse_device_formats (0.00s)
    --- PASS: TestDeviceInfoParser_RealImplementation/parse_device_frame_rates (0.00s)
=== RUN   TestEventNotifier_RealImplementation
=== RUN   TestEventNotifier_RealImplementation/notify_camera_connected
=== RUN   TestEventNotifier_RealImplementation/notify_camera_disconnected
=== RUN   TestEventNotifier_RealImplementation/notify_status_change
=== RUN   TestEventNotifier_RealImplementation/notify_capability_detected
=== RUN   TestEventNotifier_RealImplementation/notify_capability_error
--- PASS: TestEventNotifier_RealImplementation (0.00s)
    --- PASS: TestEventNotifier_RealImplementation/notify_camera_connected (0.00s)
    --- PASS: TestEventNotifier_RealImplementation/notify_camera_disconnected (0.00s)
    --- PASS: TestEventNotifier_RealImplementation/notify_status_change (0.00s)
    --- PASS: TestEventNotifier_RealImplementation/notify_capability_detected (0.00s)
    --- PASS: TestEventNotifier_RealImplementation/notify_capability_error (0.00s)
=== RUN   TestCameraMonitor_RealImplementation
=== RUN   TestCameraMonitor_RealImplementation/monitor_creation
=== RUN   TestCameraMonitor_RealImplementation/interface_compliance
    test_helpers_test.go:104: Found accessible camera device: /dev/video0
--- PASS: TestCameraMonitor_RealImplementation (0.02s)
    --- PASS: TestCameraMonitor_RealImplementation/monitor_creation (0.00s)
    --- PASS: TestCameraMonitor_RealImplementation/interface_compliance (0.02s)
=== RUN   TestCameraMonitor_TakeDirectSnapshot
=== RUN   TestCameraMonitor_TakeDirectSnapshot/interface_compliance
time="2025-10-04 22:12:15" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:15" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:15" level=info msg="Created fresh device event source instance with smart selection"
time="2025-10-04 22:12:15" level=info msg="Taking V4L2 direct snapshot"
=== RUN   TestCameraMonitor_TakeDirectSnapshot/direct_snapshot_interface
--- PASS: TestCameraMonitor_TakeDirectSnapshot (0.00s)
    --- PASS: TestCameraMonitor_TakeDirectSnapshot/interface_compliance (0.00s)
    --- PASS: TestCameraMonitor_TakeDirectSnapshot/direct_snapshot_interface (0.00s)
=== RUN   TestMonitorStats_Structure
=== PAUSE TestMonitorStats_Structure
=== RUN   TestCapabilityDetectionResult_Structure
=== PAUSE TestCapabilityDetectionResult_Structure
=== RUN   TestHybridCameraMonitor_AdvancedFunctionality_ReqCAM001_Success_DEPRECATED
    monitor_advanced_functionality_test.go:14: DEPRECATED: This test uses old API. Use refactored version instead.
--- SKIP: TestHybridCameraMonitor_AdvancedFunctionality_ReqCAM001_Success_DEPRECATED (0.00s)
=== RUN   TestHybridCameraMonitor_DeviceCreationAdvanced_ReqCAM001_Success_DEPRECATED
    monitor_advanced_functionality_test.go:20: DEPRECATED: This test uses old API. Use refactored version instead.
--- SKIP: TestHybridCameraMonitor_DeviceCreationAdvanced_ReqCAM001_Success_DEPRECATED (0.00s)
=== RUN   TestHybridCameraMonitor_EventProcessingAdvanced_ReqCAM001_Success_DEPRECATED
    monitor_advanced_functionality_test.go:26: DEPRECATED: This test uses old API. Use refactored version instead.
--- SKIP: TestHybridCameraMonitor_EventProcessingAdvanced_ReqCAM001_Success_DEPRECATED (0.00s)
=== RUN   TestHybridCameraMonitor_EventNotifierAdvanced_ReqCAM001_Success_DEPRECATED
    monitor_advanced_functionality_test.go:32: DEPRECATED: This test uses old API. Use refactored version instead.
--- SKIP: TestHybridCameraMonitor_EventNotifierAdvanced_ReqCAM001_Success_DEPRECATED (0.00s)
=== RUN   TestHybridCameraMonitor_PollingAdvanced_ReqCAM001_Success_DEPRECATED
    monitor_advanced_functionality_test.go:38: DEPRECATED: This test uses old API. Use refactored version instead.
--- SKIP: TestHybridCameraMonitor_PollingAdvanced_ReqCAM001_Success_DEPRECATED (0.00s)
=== RUN   TestHybridCameraMonitor_UtilityFunctionsAdvanced_ReqCAM001_Success_DEPRECATED
    monitor_advanced_functionality_test.go:44: DEPRECATED: This test uses old API. Use refactored version instead.
--- SKIP: TestHybridCameraMonitor_UtilityFunctionsAdvanced_ReqCAM001_Success_DEPRECATED (0.00s)
=== RUN   TestHybridCameraMonitor_ConfigurationAdvanced_ReqCAM001_Success_DEPRECATED
    monitor_advanced_functionality_test.go:50: DEPRECATED: This test uses old API. Use refactored version instead.
--- SKIP: TestHybridCameraMonitor_ConfigurationAdvanced_ReqCAM001_Success_DEPRECATED (0.00s)
=== RUN   Test_MonitorStart_Smoke
time="2025-10-04 22:12:15" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:15" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:15" level=info msg="Created fresh device event source instance with smart selection"
time="2025-10-04 22:12:15" level=info msg="Starting hybrid camera monitor"
time="2025-10-04 22:12:15" level=info msg="Starting device event source"
time="2025-10-04 22:12:15" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:15" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:12:15" level=info msg="Device event source started successfully"
time="2025-10-04 22:12:15" level=info msg="Running in event-first mode with fsnotify support"
time="2025-10-04 22:12:15" level=info msg="Bounded worker pool started"
time="2025-10-04 22:12:15" level=info msg="Spawning monitor loops"
time="2025-10-04 22:12:15" level=info msg="Monitor start completed successfully"
time="2025-10-04 22:12:15" level=info msg="Starting seed discovery"
time="2025-10-04 22:12:15" level=info msg="Error checking device"
time="2025-10-04 22:12:15" level=warning msg="Device check error occurred"
time="2025-10-04 22:12:15" level=info msg="New V4L2 device discovered"
time="2025-10-04 22:12:15" level=info msg="Seed discovery completed"
time="2025-10-04 22:12:15" level=info msg="Monitor is now ready"
time="2025-10-04 22:12:15" level=info msg="Starting event-first camera monitoring"
time="2025-10-04 22:12:15" level=info msg="Camera reconcile loop started"
time="2025-10-04 22:12:15" level=info msg="Device event loop started"
time="2025-10-04 22:12:16" level=info msg="Stopping hybrid camera monitor"
time="2025-10-04 22:12:16" level=info msg="Device event loop stopped due to context cancellation"
time="2025-10-04 22:12:16" level=info msg="Camera reconcile loop stopped due to context cancellation"
time="2025-10-04 22:12:16" level=info msg="Event loop stopped"
time="2025-10-04 22:12:16" level=info msg="Stopped fsnotify device event source"
time="2025-10-04 22:12:16" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:12:16" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:12:16" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:12:16" level=info msg="Hybrid camera monitor stopped"
    monitor_startup_smoke_test.go:79: Monitor startup completed in 277.485µs
--- PASS: Test_MonitorStart_Smoke (0.10s)
=== RUN   Test_MonitorStart_SingleStartInvariant
time="2025-10-04 22:12:16" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:16" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:16" level=info msg="Created fresh device event source instance with smart selection"
time="2025-10-04 22:12:16" level=info msg="Starting hybrid camera monitor"
time="2025-10-04 22:12:16" level=info msg="Starting device event source"
time="2025-10-04 22:12:16" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:16" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:12:16" level=info msg="Device event source started successfully"
time="2025-10-04 22:12:16" level=info msg="Running in event-first mode with fsnotify support"
time="2025-10-04 22:12:16" level=info msg="Bounded worker pool started"
time="2025-10-04 22:12:16" level=info msg="Spawning monitor loops"
time="2025-10-04 22:12:16" level=info msg="Monitor start completed successfully"
time="2025-10-04 22:12:16" level=info msg="Stopping hybrid camera monitor"
time="2025-10-04 22:12:16" level=info msg="Starting seed discovery"
time="2025-10-04 22:12:16" level=info msg="Event loop stopped"
time="2025-10-04 22:12:16" level=info msg="Error checking device"
time="2025-10-04 22:12:16" level=info msg="Failed to probe device capabilities"
time="2025-10-04 22:12:16" level=warning msg="Device check error occurred"
time="2025-10-04 22:12:16" level=info msg="New V4L2 device discovered"
time="2025-10-04 22:12:16" level=info msg="Seed discovery completed"
time="2025-10-04 22:12:16" level=info msg="Monitor is now ready"
time="2025-10-04 22:12:16" level=info msg="Starting event-first camera monitoring"
time="2025-10-04 22:12:16" level=info msg="Device event loop started"
time="2025-10-04 22:12:16" level=info msg="Device event loop stopped due to context cancellation"
time="2025-10-04 22:12:16" level=info msg="Camera reconcile loop started"
time="2025-10-04 22:12:16" level=info msg="Camera reconcile loop stopped due to context cancellation"
time="2025-10-04 22:12:16" level=info msg="Stopped fsnotify device event source"
time="2025-10-04 22:12:16" level=info msg="Stopping bounded worker pool..."
time="2025-10-04 22:12:16" level=info msg="All worker pool tasks completed gracefully"
time="2025-10-04 22:12:16" level=info msg="Bounded worker pool stopped"
time="2025-10-04 22:12:16" level=info msg="Hybrid camera monitor stopped"
--- PASS: Test_MonitorStart_SingleStartInvariant (0.00s)
=== RUN   TestRealV4L2CommandExecutor_ExecuteCommand
=== RUN   TestRealV4L2CommandExecutor_ExecuteCommand/valid_device_command
    test_helpers_test.go:104: Found accessible camera device: /dev/video0
=== RUN   TestRealV4L2CommandExecutor_ExecuteCommand/invalid_device
=== RUN   TestRealV4L2CommandExecutor_ExecuteCommand/invalid_command
    test_helpers_test.go:104: Found accessible camera device: /dev/video0
=== RUN   TestRealV4L2CommandExecutor_ExecuteCommand/multiple_arguments
    test_helpers_test.go:104: Found accessible camera device: /dev/video0
=== RUN   TestRealV4L2CommandExecutor_ExecuteCommand/context_cancellation
    test_helpers_test.go:104: Found accessible camera device: /dev/video0
=== RUN   TestRealV4L2CommandExecutor_ExecuteCommand/context_timeout
    test_helpers_test.go:104: Found accessible camera device: /dev/video0
=== RUN   TestRealV4L2CommandExecutor_ExecuteCommand/device_path_special_characters
=== RUN   TestRealV4L2CommandExecutor_ExecuteCommand/command_special_characters
    test_helpers_test.go:104: Found accessible camera device: /dev/video0
=== RUN   TestRealV4L2CommandExecutor_ExecuteCommand/very_long_device_path
=== RUN   TestRealV4L2CommandExecutor_ExecuteCommand/very_long_command_arguments
    test_helpers_test.go:104: Found accessible camera device: /dev/video0
=== RUN   TestRealV4L2CommandExecutor_ExecuteCommand/empty_device_path
=== RUN   TestRealV4L2CommandExecutor_ExecuteCommand/empty_command_arguments
    test_helpers_test.go:104: Found accessible camera device: /dev/video0
    real_implementations_test.go:221: Empty command arguments handled gracefully: 
=== RUN   TestRealV4L2CommandExecutor_ExecuteCommand/device_path_with_spaces
=== RUN   TestRealV4L2CommandExecutor_ExecuteCommand/command_with_newlines
    test_helpers_test.go:104: Found accessible camera device: /dev/video0
=== RUN   TestRealV4L2CommandExecutor_ExecuteCommand/command_with_tabs
    test_helpers_test.go:104: Found accessible camera device: /dev/video0
    real_implementations_test.go:273: Command with tabs handled gracefully: 
        General/Common options:
          --all              display all information available
          -C, --get-ctrl <ct
=== RUN   TestRealV4L2CommandExecutor_ExecuteCommand/multiple_command_arguments
    test_helpers_test.go:104: Found accessible camera device: /dev/video0
=== RUN   TestRealV4L2CommandExecutor_ExecuteCommand/command_with_quotes
    test_helpers_test.go:104: Found accessible camera device: /dev/video0
    real_implementations_test.go:319: Command with quotes handled gracefully: Driver Info:
        	Driver name      : uvcvideo
        	Card type        : USB 2.0 Camera: USB 2.0 Camera
        	Bus in
=== RUN   TestRealV4L2CommandExecutor_ExecuteCommand/command_with_backslashes
    test_helpers_test.go:104: Found accessible camera device: /dev/video0
--- PASS: TestRealV4L2CommandExecutor_ExecuteCommand (0.21s)
    --- PASS: TestRealV4L2CommandExecutor_ExecuteCommand/valid_device_command (0.02s)
    --- PASS: TestRealV4L2CommandExecutor_ExecuteCommand/invalid_device (0.00s)
    --- PASS: TestRealV4L2CommandExecutor_ExecuteCommand/invalid_command (0.01s)
    --- PASS: TestRealV4L2CommandExecutor_ExecuteCommand/multiple_arguments (0.01s)
    --- PASS: TestRealV4L2CommandExecutor_ExecuteCommand/context_cancellation (0.01s)
    --- PASS: TestRealV4L2CommandExecutor_ExecuteCommand/context_timeout (0.01s)
    --- PASS: TestRealV4L2CommandExecutor_ExecuteCommand/device_path_special_characters (0.00s)
    --- PASS: TestRealV4L2CommandExecutor_ExecuteCommand/command_special_characters (0.01s)
    --- PASS: TestRealV4L2CommandExecutor_ExecuteCommand/very_long_device_path (0.01s)
    --- PASS: TestRealV4L2CommandExecutor_ExecuteCommand/very_long_command_arguments (0.02s)
    --- PASS: TestRealV4L2CommandExecutor_ExecuteCommand/empty_device_path (0.00s)
    --- PASS: TestRealV4L2CommandExecutor_ExecuteCommand/empty_command_arguments (0.02s)
    --- PASS: TestRealV4L2CommandExecutor_ExecuteCommand/device_path_with_spaces (0.00s)
    --- PASS: TestRealV4L2CommandExecutor_ExecuteCommand/command_with_newlines (0.02s)
    --- PASS: TestRealV4L2CommandExecutor_ExecuteCommand/command_with_tabs (0.02s)
    --- PASS: TestRealV4L2CommandExecutor_ExecuteCommand/multiple_command_arguments (0.02s)
    --- PASS: TestRealV4L2CommandExecutor_ExecuteCommand/command_with_quotes (0.02s)
    --- PASS: TestRealV4L2CommandExecutor_ExecuteCommand/command_with_backslashes (0.01s)
=== RUN   TestRealDeviceInfoParser_ParseDeviceInfo
=== RUN   TestRealDeviceInfoParser_ParseDeviceInfo/valid_device_info
=== RUN   TestRealDeviceInfoParser_ParseDeviceInfo/empty_output
=== RUN   TestRealDeviceInfoParser_ParseDeviceInfo/partial_output
=== RUN   TestRealDeviceInfoParser_ParseDeviceInfo/malformed_output
=== RUN   TestRealDeviceInfoParser_ParseDeviceInfo/capabilities_without_names
--- PASS: TestRealDeviceInfoParser_ParseDeviceInfo (0.00s)
    --- PASS: TestRealDeviceInfoParser_ParseDeviceInfo/valid_device_info (0.00s)
    --- PASS: TestRealDeviceInfoParser_ParseDeviceInfo/empty_output (0.00s)
    --- PASS: TestRealDeviceInfoParser_ParseDeviceInfo/partial_output (0.00s)
    --- PASS: TestRealDeviceInfoParser_ParseDeviceInfo/malformed_output (0.00s)
    --- PASS: TestRealDeviceInfoParser_ParseDeviceInfo/capabilities_without_names (0.00s)
=== RUN   TestRealDeviceInfoParser_ParseDeviceFormats
=== RUN   TestRealDeviceInfoParser_ParseDeviceFormats/valid_formats_output
=== RUN   TestRealDeviceInfoParser_ParseDeviceFormats/empty_output
=== RUN   TestRealDeviceInfoParser_ParseDeviceFormats/malformed_output
=== RUN   TestRealDeviceInfoParser_ParseDeviceFormats/single_format
=== RUN   TestRealDeviceInfoParser_ParseDeviceFormats/format_with_multiple_frame_rates
=== RUN   TestRealDeviceInfoParser_ParseDeviceFormats/format_without_size
=== RUN   TestRealDeviceInfoParser_ParseDeviceFormats/format_with_invalid_size
=== RUN   TestRealDeviceInfoParser_ParseDeviceFormats/format_with_malformed_frame_rate
=== RUN   TestRealDeviceInfoParser_ParseDeviceFormats/multiple_formats_mixed_data
=== RUN   TestRealDeviceInfoParser_ParseDeviceFormats/format_with_large_dimensions
=== RUN   TestRealDeviceInfoParser_ParseDeviceFormats/format_with_zero_dimensions
=== RUN   TestRealDeviceInfoParser_ParseDeviceFormats/format_with_negative_frame_rate
=== RUN   TestRealDeviceInfoParser_ParseDeviceFormats/format_with_extreme_frame_rate
=== RUN   TestRealDeviceInfoParser_ParseDeviceFormats/format_with_empty_pixel_format
=== RUN   TestRealDeviceInfoParser_ParseDeviceFormats/format_with_long_pixel_format
=== RUN   TestRealDeviceInfoParser_ParseDeviceFormats/index_pattern_format
=== RUN   TestRealDeviceInfoParser_ParseDeviceFormats/index_pattern_invalid_size
=== RUN   TestRealDeviceInfoParser_ParseDeviceFormats/index_pattern_empty_fps
=== RUN   TestRealDeviceInfoParser_ParseDeviceFormats/test_case_pattern_invalid_size
=== RUN   TestRealDeviceInfoParser_ParseDeviceFormats/format_malformed_interval
=== RUN   TestRealDeviceInfoParser_ParseDeviceFormats/format_interval_no_fps
=== RUN   TestRealDeviceInfoParser_ParseDeviceFormats/format_interval_empty_fps
=== RUN   TestRealDeviceInfoParser_ParseDeviceFormats/format_declaration_no_quotes
=== RUN   TestRealDeviceInfoParser_ParseDeviceFormats/format_existing_dimensions_before_size
--- PASS: TestRealDeviceInfoParser_ParseDeviceFormats (0.00s)
    --- PASS: TestRealDeviceInfoParser_ParseDeviceFormats/valid_formats_output (0.00s)
    --- PASS: TestRealDeviceInfoParser_ParseDeviceFormats/empty_output (0.00s)
    --- PASS: TestRealDeviceInfoParser_ParseDeviceFormats/malformed_output (0.00s)
    --- PASS: TestRealDeviceInfoParser_ParseDeviceFormats/single_format (0.00s)
    --- PASS: TestRealDeviceInfoParser_ParseDeviceFormats/format_with_multiple_frame_rates (0.00s)
    --- PASS: TestRealDeviceInfoParser_ParseDeviceFormats/format_without_size (0.00s)
    --- PASS: TestRealDeviceInfoParser_ParseDeviceFormats/format_with_invalid_size (0.00s)
    --- PASS: TestRealDeviceInfoParser_ParseDeviceFormats/format_with_malformed_frame_rate (0.00s)
    --- PASS: TestRealDeviceInfoParser_ParseDeviceFormats/multiple_formats_mixed_data (0.00s)
    --- PASS: TestRealDeviceInfoParser_ParseDeviceFormats/format_with_large_dimensions (0.00s)
    --- PASS: TestRealDeviceInfoParser_ParseDeviceFormats/format_with_zero_dimensions (0.00s)
    --- PASS: TestRealDeviceInfoParser_ParseDeviceFormats/format_with_negative_frame_rate (0.00s)
    --- PASS: TestRealDeviceInfoParser_ParseDeviceFormats/format_with_extreme_frame_rate (0.00s)
    --- PASS: TestRealDeviceInfoParser_ParseDeviceFormats/format_with_empty_pixel_format (0.00s)
    --- PASS: TestRealDeviceInfoParser_ParseDeviceFormats/format_with_long_pixel_format (0.00s)
    --- PASS: TestRealDeviceInfoParser_ParseDeviceFormats/index_pattern_format (0.00s)
    --- PASS: TestRealDeviceInfoParser_ParseDeviceFormats/index_pattern_invalid_size (0.00s)
    --- PASS: TestRealDeviceInfoParser_ParseDeviceFormats/index_pattern_empty_fps (0.00s)
    --- PASS: TestRealDeviceInfoParser_ParseDeviceFormats/test_case_pattern_invalid_size (0.00s)
    --- PASS: TestRealDeviceInfoParser_ParseDeviceFormats/format_malformed_interval (0.00s)
    --- PASS: TestRealDeviceInfoParser_ParseDeviceFormats/format_interval_no_fps (0.00s)
    --- PASS: TestRealDeviceInfoParser_ParseDeviceFormats/format_interval_empty_fps (0.00s)
    --- PASS: TestRealDeviceInfoParser_ParseDeviceFormats/format_declaration_no_quotes (0.00s)
    --- PASS: TestRealDeviceInfoParser_ParseDeviceFormats/format_existing_dimensions_before_size (0.00s)
=== RUN   TestRealDeviceInfoParser_parseCapabilities
=== PAUSE TestRealDeviceInfoParser_parseCapabilities
=== RUN   TestRealDeviceInfoParser_parseSize
=== PAUSE TestRealDeviceInfoParser_parseSize
=== RUN   TestRealDeviceInfoParser_extractValue
=== PAUSE TestRealDeviceInfoParser_extractValue
=== RUN   TestRealDeviceInfoParser_normalizeFrameRate
=== PAUSE TestRealDeviceInfoParser_normalizeFrameRate
=== RUN   TestCameraDevice
=== PAUSE TestCameraDevice
=== RUN   TestDeviceStatus
=== PAUSE TestDeviceStatus
=== RUN   TestV4L2Capabilities
=== PAUSE TestV4L2Capabilities
=== RUN   TestV4L2Format
=== PAUSE TestV4L2Format
=== RUN   TestDeviceCapabilityState
=== PAUSE TestDeviceCapabilityState
=== CONT  TestSmartDeviceEventSourceSelection
=== RUN   TestSmartDeviceEventSourceSelection/factory_creates_instance
=== CONT  TestRealDeviceInfoParser_extractValue
=== RUN   TestRealDeviceInfoParser_extractValue/valid_key_value
=== CONT  TestDeviceCapabilityState
time="2025-10-04 22:12:16" level=info msg="Detecting optimal device event source"
=== RUN   TestRealDeviceInfoParser_extractValue/line_without_colon
time="2025-10-04 22:12:16" level=info msg="Container environment detected - using fsnotify for device discovery"
=== CONT  TestV4L2Format
time="2025-10-04 22:12:16" level=info msg="Created fresh device event source instance with smart selection"
=== RUN   TestV4L2Format/v4l2_format_creation
=== RUN   TestRealDeviceInfoParser_extractValue/empty_line
=== RUN   TestSmartDeviceEventSourceSelection/environment_detection_functions
=== RUN   TestV4L2Format/v4l2_format_json_marshaling
=== RUN   TestRealDeviceInfoParser_extractValue/value_with_spaces
--- PASS: TestRealDeviceInfoParser_extractValue (0.00s)
    --- PASS: TestRealDeviceInfoParser_extractValue/valid_key_value (0.00s)
    --- PASS: TestRealDeviceInfoParser_extractValue/line_without_colon (0.00s)
    --- PASS: TestRealDeviceInfoParser_extractValue/empty_line (0.00s)
    --- PASS: TestRealDeviceInfoParser_extractValue/value_with_spaces (0.00s)
time="2025-10-04 22:12:16" level=info msg="Detecting optimal device event source"
=== CONT  TestV4L2Capabilities
time="2025-10-04 22:12:16" level=info msg="Container environment detected - using fsnotify for device discovery"
=== RUN   TestV4L2Capabilities/v4l2_capabilities_creation
=== NAME  TestSmartDeviceEventSourceSelection/environment_detection_functions
    device_event_source_smart_test.go:54: Environment detection results: container=true, udev=false, selected=fsnotify
=== RUN   TestV4L2Capabilities/v4l2_capabilities_json_marshaling
=== RUN   TestSmartDeviceEventSourceSelection/smart_selection_logging
=== RUN   TestV4L2Format/v4l2_format_empty_frame_rates
time="2025-10-04 22:12:16" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:16" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:16" level=info msg="Created fresh device event source instance with smart selection"
--- PASS: TestV4L2Format (0.00s)
    --- PASS: TestV4L2Format/v4l2_format_creation (0.00s)
    --- PASS: TestV4L2Format/v4l2_format_json_marshaling (0.00s)
    --- PASS: TestV4L2Format/v4l2_format_empty_frame_rates (0.00s)
=== RUN   TestV4L2Capabilities/v4l2_capabilities_empty_fields
time="2025-10-04 22:12:16" level=info msg="Device event source Start() called"
=== RUN   TestDeviceCapabilityState/device_capability_state_creation
=== CONT  TestCameraDevice
=== RUN   TestCameraDevice/camera_device_creation
time="2025-10-04 22:12:16" level=info msg="Started fsnotify device event source"
--- PASS: TestV4L2Capabilities (0.00s)
    --- PASS: TestV4L2Capabilities/v4l2_capabilities_creation (0.00s)
    --- PASS: TestV4L2Capabilities/v4l2_capabilities_json_marshaling (0.00s)
    --- PASS: TestV4L2Capabilities/v4l2_capabilities_empty_fields (0.00s)
time="2025-10-04 22:12:16" level=info msg="Event loop stopped"
=== RUN   TestDeviceCapabilityState/device_capability_state_json_marshaling
=== CONT  TestDeviceStatus
=== RUN   TestDeviceStatus/device_status_constants
=== RUN   TestDeviceStatus/device_status_json_marshaling
--- PASS: TestDeviceStatus (0.00s)
    --- PASS: TestDeviceStatus/device_status_constants (0.00s)
    --- PASS: TestDeviceStatus/device_status_json_marshaling (0.00s)
=== CONT  TestRealDeviceInfoParser_normalizeFrameRate
=== RUN   TestRealDeviceInfoParser_normalizeFrameRate/valid_frame_rate
=== RUN   TestRealDeviceInfoParser_normalizeFrameRate/frame_rate_with_extra_text
=== RUN   TestDeviceCapabilityState/device_capability_state_without_result
=== RUN   TestRealDeviceInfoParser_normalizeFrameRate/invalid_frame_rate
=== RUN   TestRealDeviceInfoParser_normalizeFrameRate/empty_string
--- PASS: TestDeviceCapabilityState (0.00s)
    --- PASS: TestDeviceCapabilityState/device_capability_state_creation (0.00s)
    --- PASS: TestDeviceCapabilityState/device_capability_state_json_marshaling (0.00s)
    --- PASS: TestDeviceCapabilityState/device_capability_state_without_result (0.00s)
=== CONT  TestCameraEventData_Structure
=== RUN   TestRealDeviceInfoParser_normalizeFrameRate/out_of_range_frame_rate
--- PASS: TestCameraEventData_Structure (0.00s)
=== CONT  TestCapabilityDetectionResult_Structure
--- PASS: TestCapabilityDetectionResult_Structure (0.00s)
=== CONT  TestRealDeviceInfoParser_parseCapabilities
=== RUN   TestRealDeviceInfoParser_normalizeFrameRate/minimum_valid_rate
=== RUN   TestRealDeviceInfoParser_parseCapabilities/valid_capability_line
=== RUN   TestRealDeviceInfoParser_normalizeFrameRate/maximum_valid_rate
=== RUN   TestRealDeviceInfoParser_parseCapabilities/empty_line
--- PASS: TestRealDeviceInfoParser_normalizeFrameRate (0.00s)
    --- PASS: TestRealDeviceInfoParser_normalizeFrameRate/valid_frame_rate (0.00s)
    --- PASS: TestRealDeviceInfoParser_normalizeFrameRate/frame_rate_with_extra_text (0.00s)
    --- PASS: TestRealDeviceInfoParser_normalizeFrameRate/invalid_frame_rate (0.00s)
    --- PASS: TestRealDeviceInfoParser_normalizeFrameRate/empty_string (0.00s)
    --- PASS: TestRealDeviceInfoParser_normalizeFrameRate/out_of_range_frame_rate (0.00s)
    --- PASS: TestRealDeviceInfoParser_normalizeFrameRate/minimum_valid_rate (0.00s)
    --- PASS: TestRealDeviceInfoParser_normalizeFrameRate/maximum_valid_rate (0.00s)
=== RUN   TestCameraDevice/camera_device_json_marshaling
=== RUN   TestRealDeviceInfoParser_parseCapabilities/line_without_colon
=== CONT  TestMonitorStats_Structure
--- PASS: TestMonitorStats_Structure (0.00s)
=== RUN   TestRealDeviceInfoParser_parseCapabilities/line_with_only_hex
time="2025-10-04 22:12:16" level=info msg="Stopped fsnotify device event source"
=== RUN   TestCameraDevice/camera_device_with_error
=== CONT  TestRealDeviceInfoParser_parseSize
=== RUN   TestRealDeviceInfoParser_parseSize/valid_size
--- PASS: TestRealDeviceInfoParser_parseCapabilities (0.00s)
    --- PASS: TestRealDeviceInfoParser_parseCapabilities/valid_capability_line (0.00s)
    --- PASS: TestRealDeviceInfoParser_parseCapabilities/empty_line (0.00s)
    --- PASS: TestRealDeviceInfoParser_parseCapabilities/line_without_colon (0.00s)
    --- PASS: TestRealDeviceInfoParser_parseCapabilities/line_with_only_hex (0.00s)
--- PASS: TestCameraDevice (0.00s)
    --- PASS: TestCameraDevice/camera_device_creation (0.00s)
    --- PASS: TestCameraDevice/camera_device_json_marshaling (0.00s)
    --- PASS: TestCameraDevice/camera_device_with_error (0.00s)
=== CONT  TestDeviceEventTypes
=== RUN   TestDeviceEventTypes/event_type_constants
=== RUN   TestSmartDeviceEventSourceSelection/multiple_instances_isolation
=== RUN   TestDeviceEventTypes/event_type_constants/add_event
=== RUN   TestDeviceEventTypes/event_type_constants/remove_event
time="2025-10-04 22:12:16" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:16" level=info msg="Container environment detected - using fsnotify for device discovery"
=== RUN   TestDeviceEventTypes/event_type_constants/change_event
time="2025-10-04 22:12:16" level=info msg="Created fresh device event source instance with smart selection"
=== RUN   TestDeviceEventTypes/device_event_creation
time="2025-10-04 22:12:16" level=info msg="Detecting optimal device event source"
time="2025-10-04 22:12:16" level=info msg="Container environment detected - using fsnotify for device discovery"
time="2025-10-04 22:12:16" level=info msg="Created fresh device event source instance with smart selection"
=== RUN   TestDeviceEventTypes/device_event_json_marshaling
time="2025-10-04 22:12:16" level=info msg="Device event source Start() called"
time="2025-10-04 22:12:16" level=info msg="Started fsnotify device event source"
--- PASS: TestDeviceEventTypes (0.00s)
    --- PASS: TestDeviceEventTypes/event_type_constants (0.00s)
        --- PASS: TestDeviceEventTypes/event_type_constants/add_event (0.00s)
        --- PASS: TestDeviceEventTypes/event_type_constants/remove_event (0.00s)
        --- PASS: TestDeviceEventTypes/event_type_constants/change_event (0.00s)
    --- PASS: TestDeviceEventTypes/device_event_creation (0.00s)
    --- PASS: TestDeviceEventTypes/device_event_json_marshaling (0.00s)
=== CONT  TestCameraEvent_Constants
time="2025-10-04 22:12:16" level=info msg="Device event source Start() called"
--- PASS: TestCameraEvent_Constants (0.00s)
=== CONT  TestEnvironmentDetectionAccuracy
=== RUN   TestEnvironmentDetectionAccuracy/container_detection
time="2025-10-04 22:12:16" level=info msg="Started fsnotify device event source"
=== CONT  TestDeviceEventSource_Interface
=== NAME  TestEnvironmentDetectionAccuracy/container_detection
    device_event_source_smart_test.go:108: Container detection result: true
=== RUN   TestEnvironmentDetectionAccuracy/udev_detection
time="2025-10-04 22:12:16" level=info msg="Event loop stopped"
    device_event_source_smart_test.go:117: Udev detection result: false
time="2025-10-04 22:12:16" level=info msg="Stopped fsnotify device event source"
=== RUN   TestEnvironmentDetectionAccuracy/selection_logic
=== RUN   TestRealDeviceInfoParser_parseSize/invalid_size_format
time="2025-10-04 22:12:16" level=info msg="Event loop stopped"
time="2025-10-04 22:12:16" level=info msg="Detecting optimal device event source"
=== RUN   TestRealDeviceInfoParser_parseSize/size_with_extra_characters
time="2025-10-04 22:12:16" level=info msg="Container environment detected - using fsnotify for device discovery"
=== NAME  TestEnvironmentDetectionAccuracy/selection_logic
    device_event_source_smart_test.go:136: Selection logic: container=true, udev=false, selected=fsnotify
=== RUN   TestRealDeviceInfoParser_parseSize/empty_string
--- PASS: TestEnvironmentDetectionAccuracy (0.00s)
    --- PASS: TestEnvironmentDetectionAccuracy/container_detection (0.00s)
    --- PASS: TestEnvironmentDetectionAccuracy/udev_detection (0.00s)
    --- PASS: TestEnvironmentDetectionAccuracy/selection_logic (0.00s)
=== RUN   TestDeviceEventSource_Interface/fsnotify_interface_compliance
--- PASS: TestRealDeviceInfoParser_parseSize (0.00s)
    --- PASS: TestRealDeviceInfoParser_parseSize/valid_size (0.00s)
    --- PASS: TestRealDeviceInfoParser_parseSize/invalid_size_format (0.00s)
    --- PASS: TestRealDeviceInfoParser_parseSize/size_with_extra_characters (0.00s)
    --- PASS: TestRealDeviceInfoParser_parseSize/empty_string (0.00s)
time="2025-10-04 22:12:16" level=info msg="Stopped fsnotify device event source"
time="2025-10-04 22:12:16" level=info msg="Device event source Start() called"
--- PASS: TestSmartDeviceEventSourceSelection (0.00s)
    --- PASS: TestSmartDeviceEventSourceSelection/factory_creates_instance (0.00s)
    --- PASS: TestSmartDeviceEventSourceSelection/environment_detection_functions (0.00s)
    --- PASS: TestSmartDeviceEventSourceSelection/smart_selection_logging (0.00s)
    --- PASS: TestSmartDeviceEventSourceSelection/multiple_instances_isolation (0.00s)
time="2025-10-04 22:12:16" level=info msg="Started fsnotify device event source"
time="2025-10-04 22:12:16" level=info msg="Event loop stopped"
time="2025-10-04 22:12:16" level=info msg="Stopped fsnotify device event source"
=== RUN   TestDeviceEventSource_Interface/udev_interface_compliance
time="2025-10-04 22:12:16" level=info msg="Started udev device event source"
time="2025-10-04 22:12:16" level=info msg="Event loop stopped"
time="2025-10-04 22:12:16" level=info msg="Stopped udev device event source"
--- PASS: TestDeviceEventSource_Interface (0.00s)
    --- PASS: TestDeviceEventSource_Interface/fsnotify_interface_compliance (0.00s)
    --- PASS: TestDeviceEventSource_Interface/udev_interface_compliance (0.00s)
FAIL
FAIL	github.com/camerarecorder/mediamtx-camera-service-go/internal/camera	20.931s
=== RUN   TestStoppable_InterfaceCompliance
--- PASS: TestStoppable_InterfaceCompliance (0.00s)
=== RUN   TestStoppable_GracefulShutdown
=== RUN   TestStoppable_GracefulShutdown/successful_shutdown
=== RUN   TestStoppable_GracefulShutdown/shutdown_with_error
=== RUN   TestStoppable_GracefulShutdown/shutdown_with_context_cancellation
=== RUN   TestStoppable_GracefulShutdown/shutdown_with_timeout
=== RUN   TestStoppable_GracefulShutdown/double_stop_handling
--- PASS: TestStoppable_GracefulShutdown (0.05s)
    --- PASS: TestStoppable_GracefulShutdown/successful_shutdown (0.00s)
    --- PASS: TestStoppable_GracefulShutdown/shutdown_with_error (0.00s)
    --- PASS: TestStoppable_GracefulShutdown/shutdown_with_context_cancellation (0.00s)
    --- PASS: TestStoppable_GracefulShutdown/shutdown_with_timeout (0.05s)
    --- PASS: TestStoppable_GracefulShutdown/double_stop_handling (0.00s)
=== RUN   TestStoppable_ConcurrentAccess
=== RUN   TestStoppable_ConcurrentAccess/concurrent_stop_calls
=== RUN   TestStoppable_ConcurrentAccess/concurrent_is_running_checks
--- PASS: TestStoppable_ConcurrentAccess (0.12s)
    --- PASS: TestStoppable_ConcurrentAccess/concurrent_stop_calls (0.01s)
    --- PASS: TestStoppable_ConcurrentAccess/concurrent_is_running_checks (0.11s)
=== RUN   TestStoppable_RealWorldScenarios
=== RUN   TestStoppable_RealWorldScenarios/service_with_cleanup_work
=== RUN   TestStoppable_RealWorldScenarios/service_that_ignores_context
--- PASS: TestStoppable_RealWorldScenarios (0.10s)
    --- PASS: TestStoppable_RealWorldScenarios/service_with_cleanup_work (0.05s)
    --- PASS: TestStoppable_RealWorldScenarios/service_that_ignores_context (0.05s)
=== RUN   TestStopWithTimeout
=== RUN   TestStopWithTimeout/successful_stop_with_timeout
=== RUN   TestStopWithTimeout/stop_with_timeout_error
=== RUN   TestStopWithTimeout/stop_with_timeout_exceeds
--- PASS: TestStopWithTimeout (0.05s)
    --- PASS: TestStopWithTimeout/successful_stop_with_timeout (0.00s)
    --- PASS: TestStopWithTimeout/stop_with_timeout_error (0.00s)
    --- PASS: TestStopWithTimeout/stop_with_timeout_exceeds (0.05s)
PASS
ok  	github.com/camerarecorder/mediamtx-camera-service-go/internal/common	0.332s
=== RUN   TestConfigManager_LoadConfig
=== RUN   TestConfigManager_LoadConfig/Valid_YAML
time="2025-10-04 22:11:56" level=info msg="Loading configuration"
    config_manager_test.go:89: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/config/config_manager_test.go:89
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestConfigManager_LoadConfig/Valid_YAML
        	Messages:   	Should load valid configuration successfully
=== RUN   TestConfigManager_LoadConfig/Invalid_YAML
time="2025-10-04 22:11:56" level=info msg="Loading configuration"
=== RUN   TestConfigManager_LoadConfig/Invalid_Port
time="2025-10-04 22:11:56" level=info msg="Loading configuration"
=== RUN   TestConfigManager_LoadConfig/Missing_Server
time="2025-10-04 22:11:56" level=info msg="Loading configuration"
=== RUN   TestConfigManager_LoadConfig/Empty_Config
time="2025-10-04 22:11:56" level=info msg="Loading configuration"
--- FAIL: TestConfigManager_LoadConfig (0.02s)
    --- FAIL: TestConfigManager_LoadConfig/Valid_YAML (0.01s)
    --- PASS: TestConfigManager_LoadConfig/Invalid_YAML (0.00s)
    --- PASS: TestConfigManager_LoadConfig/Invalid_Port (0.00s)
    --- PASS: TestConfigManager_LoadConfig/Missing_Server (0.00s)
    --- PASS: TestConfigManager_LoadConfig/Empty_Config (0.00s)
=== RUN   TestConfigManager_LoadConfig_MissingFile
time="2025-10-04 22:11:56" level=info msg="Loading configuration"
--- PASS: TestConfigManager_LoadConfig_MissingFile (0.00s)
=== RUN   TestConfigManager_EnvironmentOverrides
time="2025-10-04 22:11:56" level=info msg="Loading configuration"
    config_manager_test.go:125: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/config/config_manager_test.go:125
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestConfigManager_EnvironmentOverrides
        	Messages:   	Should load configuration with environment overrides
--- FAIL: TestConfigManager_EnvironmentOverrides (0.01s)
=== RUN   TestConfigManager_ThreadSafeAccess
time="2025-10-04 22:11:56" level=info msg="Loading configuration"
    config_manager_test.go:142: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/config/config_manager_test.go:142
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestConfigManager_ThreadSafeAccess
--- FAIL: TestConfigManager_ThreadSafeAccess (0.00s)
=== RUN   TestConfigManager_HotReload
time="2025-10-04 22:11:56" level=info msg="Loading configuration"
    config_manager_test.go:177: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/config/config_manager_test.go:177
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestConfigManager_HotReload
        	Messages:   	Should load configuration with hot reload enabled
--- FAIL: TestConfigManager_HotReload (0.01s)
=== RUN   TestConfigManager_UpdateCallbacks
time="2025-10-04 22:11:56" level=info msg="Loading configuration"
    config_manager_test.go:204: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/config/config_manager_test.go:204
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestConfigManager_UpdateCallbacks
--- FAIL: TestConfigManager_UpdateCallbacks (0.00s)
=== RUN   TestConfigManager_LoggingConfigurationUpdates
=== PAUSE TestConfigManager_LoggingConfigurationUpdates
=== RUN   TestConfigManager_SaveConfig
time="2025-10-04 22:11:56" level=info msg="Loading configuration"
    config_manager_test.go:292: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/config/config_manager_test.go:292
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestConfigManager_SaveConfig
--- FAIL: TestConfigManager_SaveConfig (0.00s)
=== RUN   TestConfigManager_ReloadConfiguration
time="2025-10-04 22:11:56" level=info msg="Loading configuration"
    config_manager_test.go:312: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/config/config_manager_test.go:312
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestConfigManager_ReloadConfiguration
        	Messages:   	Should load initial configuration
--- FAIL: TestConfigManager_ReloadConfiguration (0.00s)
=== RUN   TestConfigManager_Stop
time="2025-10-04 22:11:56" level=info msg="Loading configuration"
    config_manager_test.go:349: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/config/config_manager_test.go:349
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestConfigManager_Stop
        	Messages:   	Should load configuration with hot reload
--- FAIL: TestConfigManager_Stop (0.00s)
=== RUN   TestConfigManager_FileWatching
time="2025-10-04 22:11:56" level=info msg="Loading configuration"
    config_manager_test.go:384: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/config/config_manager_test.go:384
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestConfigManager_FileWatching
        	Messages:   	Should load configuration with hot reload
--- FAIL: TestConfigManager_FileWatching (0.00s)
=== RUN   TestConfigManager_ContextAwareShutdown
=== RUN   TestConfigManager_ContextAwareShutdown/graceful_shutdown_with_context
time="2025-10-04 22:11:56" level=info msg="Loading configuration"
    config_manager_test.go:420: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/config/config_manager_test.go:420
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestConfigManager_ContextAwareShutdown/graceful_shutdown_with_context
        	Messages:   	Config should load successfully
time="2025-10-04 22:11:56" level=info msg="Stopping configuration manager"
time="2025-10-04 22:11:56" level=info msg="Configuration manager stopped"
=== RUN   TestConfigManager_ContextAwareShutdown/shutdown_with_cancelled_context
time="2025-10-04 22:11:56" level=info msg="Loading configuration"
    config_manager_test.go:446: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/config/config_manager_test.go:446
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestConfigManager_ContextAwareShutdown/shutdown_with_cancelled_context
        	Messages:   	Config should load successfully
time="2025-10-04 22:11:56" level=info msg="Stopping configuration manager"
time="2025-10-04 22:11:56" level=info msg="Configuration manager stopped"
=== RUN   TestConfigManager_ContextAwareShutdown/shutdown_timeout_handling
time="2025-10-04 22:11:56" level=info msg="Loading configuration"
    config_manager_test.go:475: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/config/config_manager_test.go:475
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestConfigManager_ContextAwareShutdown/shutdown_timeout_handling
        	Messages:   	Config should load successfully
time="2025-10-04 22:11:56" level=info msg="Stopping configuration manager"
time="2025-10-04 22:11:56" level=info msg="Configuration manager stopped"
=== RUN   TestConfigManager_ContextAwareShutdown/double_stop_handling
time="2025-10-04 22:11:56" level=info msg="Loading configuration"
    config_manager_test.go:500: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/config/config_manager_test.go:500
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestConfigManager_ContextAwareShutdown/double_stop_handling
        	Messages:   	Config should load successfully
=== RUN   TestConfigManager_ContextAwareShutdown/stop_without_load
time="2025-10-04 22:11:56" level=info msg="Stopping configuration manager"
time="2025-10-04 22:11:56" level=info msg="Configuration manager stopped"
--- FAIL: TestConfigManager_ContextAwareShutdown (0.02s)
    --- FAIL: TestConfigManager_ContextAwareShutdown/graceful_shutdown_with_context (0.01s)
    --- FAIL: TestConfigManager_ContextAwareShutdown/shutdown_with_cancelled_context (0.00s)
    --- FAIL: TestConfigManager_ContextAwareShutdown/shutdown_timeout_handling (0.01s)
    --- FAIL: TestConfigManager_ContextAwareShutdown/double_stop_handling (0.01s)
    --- PASS: TestConfigManager_ContextAwareShutdown/stop_without_load (0.00s)
=== RUN   TestConfigManager_GetLogger
=== RUN   TestConfigManager_GetLogger/get_logger_returns_valid_logger
=== RUN   TestConfigManager_GetLogger/get_logger_returns_same_instance
=== RUN   TestConfigManager_GetLogger/get_logger_works_without_config_loaded
=== RUN   TestConfigManager_GetLogger/get_logger_works_after_config_loaded
time="2025-10-04 22:11:56" level=info msg="Loading configuration"
    config_manager_test.go:577: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/config/config_manager_test.go:577
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestConfigManager_GetLogger/get_logger_works_after_config_loaded
        	Messages:   	Config should load successfully
--- FAIL: TestConfigManager_GetLogger (0.01s)
    --- PASS: TestConfigManager_GetLogger/get_logger_returns_valid_logger (0.00s)
    --- PASS: TestConfigManager_GetLogger/get_logger_returns_same_instance (0.00s)
    --- PASS: TestConfigManager_GetLogger/get_logger_works_without_config_loaded (0.00s)
    --- FAIL: TestConfigManager_GetLogger/get_logger_works_after_config_loaded (0.01s)
=== RUN   TestConfigManager_ValidateFinalConfiguration_EdgeCases
=== RUN   TestConfigManager_ValidateFinalConfiguration_EdgeCases/server_host_empty
time="2025-10-04 22:11:56" level=info msg="Loading configuration"
=== RUN   TestConfigManager_ValidateFinalConfiguration_EdgeCases/server_host_whitespace_only
time="2025-10-04 22:11:56" level=info msg="Loading configuration"
=== RUN   TestConfigManager_ValidateFinalConfiguration_EdgeCases/server_port_zero
time="2025-10-04 22:11:56" level=info msg="Loading configuration"
=== RUN   TestConfigManager_ValidateFinalConfiguration_EdgeCases/server_port_negative
time="2025-10-04 22:11:56" level=info msg="Loading configuration"
=== RUN   TestConfigManager_ValidateFinalConfiguration_EdgeCases/server_port_exceeds_max
time="2025-10-04 22:11:56" level=info msg="Loading configuration"
=== RUN   TestConfigManager_ValidateFinalConfiguration_EdgeCases/server_port_boundary_min
time="2025-10-04 22:11:56" level=info msg="Loading configuration"
    config_manager_test.go:912: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/config/config_manager_test.go:912
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestConfigManager_ValidateFinalConfiguration_EdgeCases/server_port_boundary_min
        	Messages:   	Should pass when server port is minimum valid value
=== RUN   TestConfigManager_ValidateFinalConfiguration_EdgeCases/server_port_boundary_max
time="2025-10-04 22:11:56" level=info msg="Loading configuration"
    config_manager_test.go:912: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/config/config_manager_test.go:912
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestConfigManager_ValidateFinalConfiguration_EdgeCases/server_port_boundary_max
        	Messages:   	Should pass when server port is maximum valid value
=== RUN   TestConfigManager_ValidateFinalConfiguration_EdgeCases/mediamtx_host_empty
time="2025-10-04 22:11:56" level=info msg="Loading configuration"
    config_manager_test.go:909: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/config/config_manager_test.go:909
        	Error:      	"configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]" does not contain "MediaMTX host cannot be empty or whitespace-only"
        	Test:       	TestConfigManager_ValidateFinalConfiguration_EdgeCases/mediamtx_host_empty
        	Messages:   	Error message should contain expected text
=== RUN   TestConfigManager_ValidateFinalConfiguration_EdgeCases/mediamtx_api_port_zero
time="2025-10-04 22:11:56" level=info msg="Loading configuration"
=== RUN   TestConfigManager_ValidateFinalConfiguration_EdgeCases/mediamtx_config_path_empty
time="2025-10-04 22:11:56" level=info msg="Loading configuration"
    config_manager_test.go:909: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/config/config_manager_test.go:909
        	Error:      	"configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]" does not contain "MediaMTX config path cannot be empty or whitespace-only"
        	Test:       	TestConfigManager_ValidateFinalConfiguration_EdgeCases/mediamtx_config_path_empty
        	Messages:   	Error message should contain expected text
=== RUN   TestConfigManager_ValidateFinalConfiguration_EdgeCases/camera_poll_interval_zero
time="2025-10-04 22:11:56" level=info msg="Loading configuration"
    config_manager_test.go:909: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/config/config_manager_test.go:909
        	Error:      	"configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]" does not contain "camera poll interval must be positive, got 0.000000"
        	Test:       	TestConfigManager_ValidateFinalConfiguration_EdgeCases/camera_poll_interval_zero
        	Messages:   	Error message should contain expected text
=== RUN   TestConfigManager_ValidateFinalConfiguration_EdgeCases/camera_poll_interval_negative
time="2025-10-04 22:11:56" level=info msg="Loading configuration"
    config_manager_test.go:909: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/config/config_manager_test.go:909
        	Error:      	"configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]" does not contain "camera poll interval must be positive, got -1.000000"
        	Test:       	TestConfigManager_ValidateFinalConfiguration_EdgeCases/camera_poll_interval_negative
        	Messages:   	Error message should contain expected text
=== RUN   TestConfigManager_ValidateFinalConfiguration_EdgeCases/camera_capability_max_retries_negative
time="2025-10-04 22:11:56" level=info msg="Loading configuration"
=== RUN   TestConfigManager_ValidateFinalConfiguration_EdgeCases/logging_level_invalid
time="2025-10-04 22:11:56" level=info msg="Loading configuration"
    config_manager_test.go:909: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/config/config_manager_test.go:909
        	Error:      	"configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]" does not contain "logging level must be one of:"
        	Test:       	TestConfigManager_ValidateFinalConfiguration_EdgeCases/logging_level_invalid
        	Messages:   	Error message should contain expected text
=== RUN   TestConfigManager_ValidateFinalConfiguration_EdgeCases/logging_level_case_insensitive
time="2025-10-04 22:11:56" level=info msg="Loading configuration"
    config_manager_test.go:912: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/config/config_manager_test.go:912
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestConfigManager_ValidateFinalConfiguration_EdgeCases/logging_level_case_insensitive
        	Messages:   	Should pass when logging level is uppercase (case insensitive)
=== RUN   TestConfigManager_ValidateFinalConfiguration_EdgeCases/logging_format_empty
time="2025-10-04 22:11:56" level=info msg="Loading configuration"
    config_manager_test.go:909: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/config/config_manager_test.go:909
        	Error:      	"configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]" does not contain "logging format cannot be empty or whitespace-only"
        	Test:       	TestConfigManager_ValidateFinalConfiguration_EdgeCases/logging_format_empty
        	Messages:   	Error message should contain expected text
=== RUN   TestConfigManager_ValidateFinalConfiguration_EdgeCases/logging_file_enabled_no_path
time="2025-10-04 22:11:56" level=info msg="Loading configuration"
=== RUN   TestConfigManager_ValidateFinalConfiguration_EdgeCases/recording_format_empty
time="2025-10-04 22:11:56" level=info msg="Loading configuration"
=== RUN   TestConfigManager_ValidateFinalConfiguration_EdgeCases/recording_segment_duration_negative
time="2025-10-04 22:11:56" level=info msg="Loading configuration"
    config_manager_test.go:909: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/config/config_manager_test.go:909
        	Error:      	"configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]" does not contain "recording segment duration cannot be negative, got -1"
        	Test:       	TestConfigManager_ValidateFinalConfiguration_EdgeCases/recording_segment_duration_negative
        	Messages:   	Error message should contain expected text
=== RUN   TestConfigManager_ValidateFinalConfiguration_EdgeCases/recording_max_size_zero
time="2025-10-04 22:11:56" level=info msg="Loading configuration"
=== RUN   TestConfigManager_ValidateFinalConfiguration_EdgeCases/snapshots_quality_negative
time="2025-10-04 22:11:56" level=info msg="Loading configuration"
    config_manager_test.go:909: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/config/config_manager_test.go:909
        	Error:      	"configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]" does not contain "snapshots quality must be between 0 and 100, got -1"
        	Test:       	TestConfigManager_ValidateFinalConfiguration_EdgeCases/snapshots_quality_negative
        	Messages:   	Error message should contain expected text
=== RUN   TestConfigManager_ValidateFinalConfiguration_EdgeCases/snapshots_quality_exceeds_max
time="2025-10-04 22:11:56" level=info msg="Loading configuration"
    config_manager_test.go:909: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/config/config_manager_test.go:909
        	Error:      	"configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]" does not contain "snapshots quality must be between 0 and 100, got 101"
        	Test:       	TestConfigManager_ValidateFinalConfiguration_EdgeCases/snapshots_quality_exceeds_max
        	Messages:   	Error message should contain expected text
=== RUN   TestConfigManager_ValidateFinalConfiguration_EdgeCases/snapshots_quality_boundary_min
time="2025-10-04 22:11:56" level=info msg="Loading configuration"
    config_manager_test.go:912: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/config/config_manager_test.go:912
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestConfigManager_ValidateFinalConfiguration_EdgeCases/snapshots_quality_boundary_min
        	Messages:   	Should pass when snapshots quality is minimum valid value
=== RUN   TestConfigManager_ValidateFinalConfiguration_EdgeCases/snapshots_quality_boundary_max
time="2025-10-04 22:11:56" level=info msg="Loading configuration"
    config_manager_test.go:912: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/config/config_manager_test.go:912
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestConfigManager_ValidateFinalConfiguration_EdgeCases/snapshots_quality_boundary_max
        	Messages:   	Should pass when snapshots quality is maximum valid value
=== RUN   TestConfigManager_ValidateFinalConfiguration_EdgeCases/snapshots_max_width_zero
time="2025-10-04 22:11:56" level=info msg="Loading configuration"
=== RUN   TestConfigManager_ValidateFinalConfiguration_EdgeCases/snapshots_max_count_zero
time="2025-10-04 22:11:56" level=info msg="Loading configuration"
=== RUN   TestConfigManager_ValidateFinalConfiguration_EdgeCases/storage_warn_percent_negative
time="2025-10-04 22:11:56" level=info msg="Loading configuration"
=== RUN   TestConfigManager_ValidateFinalConfiguration_EdgeCases/storage_warn_percent_exceeds_max
time="2025-10-04 22:11:56" level=info msg="Loading configuration"
=== RUN   TestConfigManager_ValidateFinalConfiguration_EdgeCases/storage_warn_percent_equals_block_percent
time="2025-10-04 22:11:56" level=info msg="Loading configuration"
=== RUN   TestConfigManager_ValidateFinalConfiguration_EdgeCases/storage_warn_percent_greater_than_block_percent
time="2025-10-04 22:11:56" level=info msg="Loading configuration"
=== RUN   TestConfigManager_ValidateFinalConfiguration_EdgeCases/storage_default_path_empty
time="2025-10-04 22:11:56" level=info msg="Loading configuration"
--- FAIL: TestConfigManager_ValidateFinalConfiguration_EdgeCases (0.13s)
    --- PASS: TestConfigManager_ValidateFinalConfiguration_EdgeCases/server_host_empty (0.00s)
    --- PASS: TestConfigManager_ValidateFinalConfiguration_EdgeCases/server_host_whitespace_only (0.00s)
    --- PASS: TestConfigManager_ValidateFinalConfiguration_EdgeCases/server_port_zero (0.00s)
    --- PASS: TestConfigManager_ValidateFinalConfiguration_EdgeCases/server_port_negative (0.00s)
    --- PASS: TestConfigManager_ValidateFinalConfiguration_EdgeCases/server_port_exceeds_max (0.00s)
    --- FAIL: TestConfigManager_ValidateFinalConfiguration_EdgeCases/server_port_boundary_min (0.00s)
    --- FAIL: TestConfigManager_ValidateFinalConfiguration_EdgeCases/server_port_boundary_max (0.00s)
    --- FAIL: TestConfigManager_ValidateFinalConfiguration_EdgeCases/mediamtx_host_empty (0.00s)
    --- PASS: TestConfigManager_ValidateFinalConfiguration_EdgeCases/mediamtx_api_port_zero (0.00s)
    --- FAIL: TestConfigManager_ValidateFinalConfiguration_EdgeCases/mediamtx_config_path_empty (0.00s)
    --- FAIL: TestConfigManager_ValidateFinalConfiguration_EdgeCases/camera_poll_interval_zero (0.00s)
    --- FAIL: TestConfigManager_ValidateFinalConfiguration_EdgeCases/camera_poll_interval_negative (0.01s)
    --- PASS: TestConfigManager_ValidateFinalConfiguration_EdgeCases/camera_capability_max_retries_negative (0.00s)
    --- FAIL: TestConfigManager_ValidateFinalConfiguration_EdgeCases/logging_level_invalid (0.01s)
    --- FAIL: TestConfigManager_ValidateFinalConfiguration_EdgeCases/logging_level_case_insensitive (0.00s)
    --- FAIL: TestConfigManager_ValidateFinalConfiguration_EdgeCases/logging_format_empty (0.00s)
    --- PASS: TestConfigManager_ValidateFinalConfiguration_EdgeCases/logging_file_enabled_no_path (0.00s)
    --- PASS: TestConfigManager_ValidateFinalConfiguration_EdgeCases/recording_format_empty (0.00s)
    --- FAIL: TestConfigManager_ValidateFinalConfiguration_EdgeCases/recording_segment_duration_negative (0.00s)
    --- PASS: TestConfigManager_ValidateFinalConfiguration_EdgeCases/recording_max_size_zero (0.00s)
    --- FAIL: TestConfigManager_ValidateFinalConfiguration_EdgeCases/snapshots_quality_negative (0.01s)
    --- FAIL: TestConfigManager_ValidateFinalConfiguration_EdgeCases/snapshots_quality_exceeds_max (0.00s)
    --- FAIL: TestConfigManager_ValidateFinalConfiguration_EdgeCases/snapshots_quality_boundary_min (0.00s)
    --- FAIL: TestConfigManager_ValidateFinalConfiguration_EdgeCases/snapshots_quality_boundary_max (0.00s)
    --- PASS: TestConfigManager_ValidateFinalConfiguration_EdgeCases/snapshots_max_width_zero (0.00s)
    --- PASS: TestConfigManager_ValidateFinalConfiguration_EdgeCases/snapshots_max_count_zero (0.00s)
    --- PASS: TestConfigManager_ValidateFinalConfiguration_EdgeCases/storage_warn_percent_negative (0.01s)
    --- PASS: TestConfigManager_ValidateFinalConfiguration_EdgeCases/storage_warn_percent_exceeds_max (0.01s)
    --- PASS: TestConfigManager_ValidateFinalConfiguration_EdgeCases/storage_warn_percent_equals_block_percent (0.01s)
    --- PASS: TestConfigManager_ValidateFinalConfiguration_EdgeCases/storage_warn_percent_greater_than_block_percent (0.00s)
    --- PASS: TestConfigManager_ValidateFinalConfiguration_EdgeCases/storage_default_path_empty (0.00s)
=== RUN   TestConfigManager_WatchFileChanges_EnterpriseGrade
=== RUN   TestConfigManager_WatchFileChanges_EnterpriseGrade/file_watching_lifecycle_management
time="2025-10-04 22:11:56" level=info msg="Loading configuration"
    config_manager_test.go:935: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/config/config_manager_test.go:935
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestConfigManager_WatchFileChanges_EnterpriseGrade/file_watching_lifecycle_management
        	Messages:   	Config should load successfully with hot reload enabled
=== RUN   TestConfigManager_WatchFileChanges_EnterpriseGrade/file_modification_detection
time="2025-10-04 22:11:56" level=info msg="Loading configuration"
    config_manager_test.go:954: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/config/config_manager_test.go:954
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestConfigManager_WatchFileChanges_EnterpriseGrade/file_modification_detection
        	Messages:   	Config should load successfully
=== RUN   TestConfigManager_WatchFileChanges_EnterpriseGrade/file_removal_handling
time="2025-10-04 22:11:56" level=info msg="Loading configuration"
    config_manager_test.go:994: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/config/config_manager_test.go:994
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestConfigManager_WatchFileChanges_EnterpriseGrade/file_removal_handling
        	Messages:   	Config should load successfully
=== RUN   TestConfigManager_WatchFileChanges_EnterpriseGrade/multiple_rapid_changes_debouncing
time="2025-10-04 22:11:56" level=info msg="Loading configuration"
    config_manager_test.go:1030: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/config/config_manager_test.go:1030
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestConfigManager_WatchFileChanges_EnterpriseGrade/multiple_rapid_changes_debouncing
        	Messages:   	Config should load successfully
=== RUN   TestConfigManager_WatchFileChanges_EnterpriseGrade/watcher_error_handling
time="2025-10-04 22:11:56" level=info msg="Loading configuration"
    config_manager_test.go:1079: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/config/config_manager_test.go:1079
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestConfigManager_WatchFileChanges_EnterpriseGrade/watcher_error_handling
        	Messages:   	Config should load successfully
=== RUN   TestConfigManager_WatchFileChanges_EnterpriseGrade/concurrent_access_safety
time="2025-10-04 22:11:56" level=info msg="Loading configuration"
    config_manager_test.go:1119: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/config/config_manager_test.go:1119
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestConfigManager_WatchFileChanges_EnterpriseGrade/concurrent_access_safety
        	Messages:   	Config should load successfully
=== RUN   TestConfigManager_WatchFileChanges_EnterpriseGrade/stop_signal_handling
time="2025-10-04 22:11:56" level=info msg="Loading configuration"
    config_manager_test.go:1174: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/config/config_manager_test.go:1174
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestConfigManager_WatchFileChanges_EnterpriseGrade/stop_signal_handling
        	Messages:   	Config should load successfully
--- FAIL: TestConfigManager_WatchFileChanges_EnterpriseGrade (0.03s)
    --- FAIL: TestConfigManager_WatchFileChanges_EnterpriseGrade/file_watching_lifecycle_management (0.01s)
    --- FAIL: TestConfigManager_WatchFileChanges_EnterpriseGrade/file_modification_detection (0.01s)
    --- FAIL: TestConfigManager_WatchFileChanges_EnterpriseGrade/file_removal_handling (0.00s)
    --- FAIL: TestConfigManager_WatchFileChanges_EnterpriseGrade/multiple_rapid_changes_debouncing (0.00s)
    --- FAIL: TestConfigManager_WatchFileChanges_EnterpriseGrade/watcher_error_handling (0.00s)
    --- FAIL: TestConfigManager_WatchFileChanges_EnterpriseGrade/concurrent_access_safety (0.00s)
    --- FAIL: TestConfigManager_WatchFileChanges_EnterpriseGrade/stop_signal_handling (0.00s)
=== RUN   TestConfigManager_StartFileWatching_EnterpriseGrade
=== RUN   TestConfigManager_StartFileWatching_EnterpriseGrade/successful_file_watching_startup
time="2025-10-04 22:11:56" level=info msg="Loading configuration"
    config_manager_test.go:1237: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/config/config_manager_test.go:1237
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestConfigManager_StartFileWatching_EnterpriseGrade/successful_file_watching_startup
        	Messages:   	Config should load successfully with hot reload enabled
=== RUN   TestConfigManager_StartFileWatching_EnterpriseGrade/file_watching_with_nonexistent_directory
time="2025-10-04 22:11:56" level=info msg="Loading configuration"
    config_manager_test.go:1270: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/config/config_manager_test.go:1270
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestConfigManager_StartFileWatching_EnterpriseGrade/file_watching_with_nonexistent_directory
        	Messages:   	Config should load successfully even with custom directory
=== RUN   TestConfigManager_StartFileWatching_EnterpriseGrade/file_watching_with_readonly_directory
    config_manager_test.go:1298: Expected error creating file in readonly directory: open /tmp/TestConfigManager_StartFileWatching_EnterpriseGradefile_watching_with_readonly_directory2346743669/001/readonly/config.yaml: permission denied
=== RUN   TestConfigManager_StartFileWatching_EnterpriseGrade/multiple_start_file_watching_calls
time="2025-10-04 22:11:56" level=info msg="Loading configuration"
    config_manager_test.go:1326: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/config/config_manager_test.go:1326
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestConfigManager_StartFileWatching_EnterpriseGrade/multiple_start_file_watching_calls
        	Messages:   	Config should load successfully
=== RUN   TestConfigManager_StartFileWatching_EnterpriseGrade/file_watching_with_symlink_config
time="2025-10-04 22:11:56" level=info msg="Loading configuration"
    config_manager_test.go:1357: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/config/config_manager_test.go:1357
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestConfigManager_StartFileWatching_EnterpriseGrade/file_watching_with_symlink_config
        	Messages:   	Config should load successfully with symlink
=== RUN   TestConfigManager_StartFileWatching_EnterpriseGrade/file_watching_with_deep_directory_structure
time="2025-10-04 22:11:56" level=info msg="Loading configuration"
    config_manager_test.go:1382: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/config/config_manager_test.go:1382
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestConfigManager_StartFileWatching_EnterpriseGrade/file_watching_with_deep_directory_structure
        	Messages:   	Config should load successfully with deep directory
=== RUN   TestConfigManager_StartFileWatching_EnterpriseGrade/file_watching_with_special_characters_in_path
time="2025-10-04 22:11:56" level=info msg="Loading configuration"
    config_manager_test.go:1407: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/config/config_manager_test.go:1407
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestConfigManager_StartFileWatching_EnterpriseGrade/file_watching_with_special_characters_in_path
        	Messages:   	Config should load successfully with special characters in path
=== RUN   TestConfigManager_StartFileWatching_EnterpriseGrade/file_watching_lifecycle_with_rapid_start_stop
time="2025-10-04 22:11:56" level=info msg="Loading configuration"
    config_manager_test.go:1425: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/config/config_manager_test.go:1425
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestConfigManager_StartFileWatching_EnterpriseGrade/file_watching_lifecycle_with_rapid_start_stop
        	Messages:   	Config should load successfully in cycle 0
--- FAIL: TestConfigManager_StartFileWatching_EnterpriseGrade (0.03s)
    --- FAIL: TestConfigManager_StartFileWatching_EnterpriseGrade/successful_file_watching_startup (0.00s)
    --- FAIL: TestConfigManager_StartFileWatching_EnterpriseGrade/file_watching_with_nonexistent_directory (0.00s)
    --- PASS: TestConfigManager_StartFileWatching_EnterpriseGrade/file_watching_with_readonly_directory (0.00s)
    --- FAIL: TestConfigManager_StartFileWatching_EnterpriseGrade/multiple_start_file_watching_calls (0.00s)
    --- FAIL: TestConfigManager_StartFileWatching_EnterpriseGrade/file_watching_with_symlink_config (0.00s)
    --- FAIL: TestConfigManager_StartFileWatching_EnterpriseGrade/file_watching_with_deep_directory_structure (0.00s)
    --- FAIL: TestConfigManager_StartFileWatching_EnterpriseGrade/file_watching_with_special_characters_in_path (0.00s)
    --- FAIL: TestConfigManager_StartFileWatching_EnterpriseGrade/file_watching_lifecycle_with_rapid_start_stop (0.00s)
=== RUN   TestConfigManager_StartFileWatching_ErrorScenarios
=== RUN   TestConfigManager_StartFileWatching_ErrorScenarios/watcher_creation_failure_simulation
time="2025-10-04 22:11:56" level=info msg="Loading configuration"
    config_manager_test.go:1473: Expected potential error with very long path: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
=== RUN   TestConfigManager_StartFileWatching_ErrorScenarios/directory_watching_failure_scenarios
time="2025-10-04 22:11:56" level=info msg="Loading configuration"
=== RUN   TestConfigManager_StartFileWatching_ErrorScenarios/watcher_cleanup_on_failure
time="2025-10-04 22:11:56" level=info msg="Loading configuration"
    config_manager_test.go:1502: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/config/config_manager_test.go:1502
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestConfigManager_StartFileWatching_ErrorScenarios/watcher_cleanup_on_failure
        	Messages:   	Config should load successfully
--- FAIL: TestConfigManager_StartFileWatching_ErrorScenarios (0.01s)
    --- PASS: TestConfigManager_StartFileWatching_ErrorScenarios/watcher_creation_failure_simulation (0.00s)
    --- PASS: TestConfigManager_StartFileWatching_ErrorScenarios/directory_watching_failure_scenarios (0.00s)
    --- FAIL: TestConfigManager_StartFileWatching_ErrorScenarios/watcher_cleanup_on_failure (0.00s)
=== RUN   TestConfigManager_ReloadConfiguration_ErrorScenarios
=== RUN   TestConfigManager_ReloadConfiguration_ErrorScenarios/reload_with_file_removal
time="2025-10-04 22:11:56" level=info msg="Loading configuration"
    config_manager_test.go:1531: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/config/config_manager_test.go:1531
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestConfigManager_ReloadConfiguration_ErrorScenarios/reload_with_file_removal
        	Messages:   	Config should load successfully
=== RUN   TestConfigManager_ReloadConfiguration_ErrorScenarios/reload_with_invalid_config
time="2025-10-04 22:11:56" level=info msg="Loading configuration"
    config_manager_test.go:1552: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/config/config_manager_test.go:1552
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestConfigManager_ReloadConfiguration_ErrorScenarios/reload_with_invalid_config
        	Messages:   	Config should load successfully
=== RUN   TestConfigManager_ReloadConfiguration_ErrorScenarios/reload_with_permission_denied
time="2025-10-04 22:11:56" level=info msg="Loading configuration"
    config_manager_test.go:1574: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/config/config_manager_test.go:1574
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestConfigManager_ReloadConfiguration_ErrorScenarios/reload_with_permission_denied
        	Messages:   	Config should load successfully
=== RUN   TestConfigManager_ReloadConfiguration_ErrorScenarios/reload_with_corrupted_config
time="2025-10-04 22:11:56" level=info msg="Loading configuration"
    config_manager_test.go:1596: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/config/config_manager_test.go:1596
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestConfigManager_ReloadConfiguration_ErrorScenarios/reload_with_corrupted_config
        	Messages:   	Config should load successfully
--- FAIL: TestConfigManager_ReloadConfiguration_ErrorScenarios (0.02s)
    --- FAIL: TestConfigManager_ReloadConfiguration_ErrorScenarios/reload_with_file_removal (0.00s)
    --- FAIL: TestConfigManager_ReloadConfiguration_ErrorScenarios/reload_with_invalid_config (0.00s)
    --- FAIL: TestConfigManager_ReloadConfiguration_ErrorScenarios/reload_with_permission_denied (0.00s)
    --- FAIL: TestConfigManager_ReloadConfiguration_ErrorScenarios/reload_with_corrupted_config (0.00s)
=== RUN   TestConfigManager_StopFileWatching_EdgeCases
=== RUN   TestConfigManager_StopFileWatching_EdgeCases/stop_file_watching_multiple_times
time="2025-10-04 22:11:56" level=info msg="Loading configuration"
    config_manager_test.go:1628: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/config/config_manager_test.go:1628
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestConfigManager_StopFileWatching_EdgeCases/stop_file_watching_multiple_times
        	Messages:   	Config should load successfully
=== RUN   TestConfigManager_StopFileWatching_EdgeCases/stop_file_watching_with_timeout
time="2025-10-04 22:11:56" level=info msg="Loading configuration"
    config_manager_test.go:1648: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/config/config_manager_test.go:1648
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestConfigManager_StopFileWatching_EdgeCases/stop_file_watching_with_timeout
        	Messages:   	Config should load successfully
=== RUN   TestConfigManager_StopFileWatching_EdgeCases/stop_file_watching_with_cancelled_context
time="2025-10-04 22:11:56" level=info msg="Loading configuration"
    config_manager_test.go:1668: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/config/config_manager_test.go:1668
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestConfigManager_StopFileWatching_EdgeCases/stop_file_watching_with_cancelled_context
        	Messages:   	Config should load successfully
--- FAIL: TestConfigManager_StopFileWatching_EdgeCases (0.01s)
    --- FAIL: TestConfigManager_StopFileWatching_EdgeCases/stop_file_watching_multiple_times (0.00s)
    --- FAIL: TestConfigManager_StopFileWatching_EdgeCases/stop_file_watching_with_timeout (0.00s)
    --- FAIL: TestConfigManager_StopFileWatching_EdgeCases/stop_file_watching_with_cancelled_context (0.00s)
=== RUN   TestConfigManager_ValidateFinalConfiguration_AdvancedEdgeCases
=== RUN   TestConfigManager_ValidateFinalConfiguration_AdvancedEdgeCases/validation_with_nil_config
    config_manager_test.go:1695: Expected panic with nil config: runtime error: invalid memory address or nil pointer dereference
=== RUN   TestConfigManager_ValidateFinalConfiguration_AdvancedEdgeCases/validation_with_empty_struct
time="2025-10-04 22:11:56" level=info msg="Loading configuration"
=== RUN   TestConfigManager_ValidateFinalConfiguration_AdvancedEdgeCases/validation_with_partial_config
time="2025-10-04 22:11:56" level=info msg="Loading configuration"
=== RUN   TestConfigManager_ValidateFinalConfiguration_AdvancedEdgeCases/validation_with_extreme_values
time="2025-10-04 22:11:56" level=info msg="Loading configuration"
    config_manager_test.go:1747: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/config/config_manager_test.go:1747
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestConfigManager_ValidateFinalConfiguration_AdvancedEdgeCases/validation_with_extreme_values
        	Messages:   	Config should load successfully
--- FAIL: TestConfigManager_ValidateFinalConfiguration_AdvancedEdgeCases (0.01s)
    --- PASS: TestConfigManager_ValidateFinalConfiguration_AdvancedEdgeCases/validation_with_nil_config (0.00s)
    --- PASS: TestConfigManager_ValidateFinalConfiguration_AdvancedEdgeCases/validation_with_empty_struct (0.00s)
    --- PASS: TestConfigManager_ValidateFinalConfiguration_AdvancedEdgeCases/validation_with_partial_config (0.00s)
    --- FAIL: TestConfigManager_ValidateFinalConfiguration_AdvancedEdgeCases/validation_with_extreme_values (0.00s)
=== RUN   TestConfigTypes_LoadFromFixtures
=== RUN   TestConfigTypes_LoadFromFixtures/Minimal_Config
time="2025-10-04 22:11:57" level=info msg="Loading configuration"
    config_types_test.go:43: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/config/config_types_test.go:43
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestConfigTypes_LoadFromFixtures/Minimal_Config
        	Messages:   	Should load Minimal Config successfully
--- FAIL: TestConfigTypes_LoadFromFixtures (0.00s)
    --- FAIL: TestConfigTypes_LoadFromFixtures/Minimal_Config (0.00s)
=== RUN   TestValidationError_Error
--- PASS: TestValidationError_Error (0.00s)
=== RUN   TestValidateConfig_ValidConfiguration
time="2025-10-04 22:11:57" level=info msg="Loading configuration"
    config_validation_test.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/config/config_validation_test.go:38
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestValidateConfig_ValidConfiguration
        	Messages:   	Failed to load valid configuration
--- FAIL: TestValidateConfig_ValidConfiguration (0.00s)
=== RUN   TestValidateConfig_InvalidConfigurations
=== RUN   TestValidateConfig_InvalidConfigurations/Invalid_Port
time="2025-10-04 22:11:57" level=info msg="Loading configuration"
=== RUN   TestValidateConfig_InvalidConfigurations/Missing_Server
time="2025-10-04 22:11:57" level=info msg="Loading configuration"
=== RUN   TestValidateConfig_InvalidConfigurations/Empty_Config
time="2025-10-04 22:11:57" level=info msg="Loading configuration"
=== RUN   TestValidateConfig_InvalidConfigurations/Malformed_YAML
time="2025-10-04 22:11:57" level=info msg="Loading configuration"
=== RUN   TestValidateConfig_InvalidConfigurations/Retention_Policy_Negative_Age
time="2025-10-04 22:11:57" level=info msg="Loading configuration"
=== RUN   TestValidateConfig_InvalidConfigurations/Retention_Policy_Excessive_Age
time="2025-10-04 22:11:57" level=info msg="Loading configuration"
=== RUN   TestValidateConfig_InvalidConfigurations/Retention_Policy_Invalid_Type
time="2025-10-04 22:11:57" level=info msg="Loading configuration"
=== RUN   TestValidateConfig_InvalidConfigurations/Camera_Negative_Poll_Interval
time="2025-10-04 22:11:57" level=info msg="Loading configuration"
=== RUN   TestValidateConfig_InvalidConfigurations/Camera_Invalid_Device_Range
time="2025-10-04 22:11:57" level=info msg="Loading configuration"
=== RUN   TestValidateConfig_InvalidConfigurations/MediaMTX_Multiple_Issues
time="2025-10-04 22:11:57" level=info msg="Loading configuration"
=== RUN   TestValidateConfig_InvalidConfigurations/Snapshot_Tiers_Multiple_Issues
time="2025-10-04 22:11:57" level=info msg="Loading configuration"
=== RUN   TestValidateConfig_InvalidConfigurations/Combined_Edge_Cases
time="2025-10-04 22:11:57" level=info msg="Loading configuration"
--- PASS: TestValidateConfig_InvalidConfigurations (0.04s)
    --- PASS: TestValidateConfig_InvalidConfigurations/Invalid_Port (0.00s)
    --- PASS: TestValidateConfig_InvalidConfigurations/Missing_Server (0.00s)
    --- PASS: TestValidateConfig_InvalidConfigurations/Empty_Config (0.00s)
    --- PASS: TestValidateConfig_InvalidConfigurations/Malformed_YAML (0.00s)
    --- PASS: TestValidateConfig_InvalidConfigurations/Retention_Policy_Negative_Age (0.00s)
    --- PASS: TestValidateConfig_InvalidConfigurations/Retention_Policy_Excessive_Age (0.00s)
    --- PASS: TestValidateConfig_InvalidConfigurations/Retention_Policy_Invalid_Type (0.00s)
    --- PASS: TestValidateConfig_InvalidConfigurations/Camera_Negative_Poll_Interval (0.00s)
    --- PASS: TestValidateConfig_InvalidConfigurations/Camera_Invalid_Device_Range (0.00s)
    --- PASS: TestValidateConfig_InvalidConfigurations/MediaMTX_Multiple_Issues (0.00s)
    --- PASS: TestValidateConfig_InvalidConfigurations/Snapshot_Tiers_Multiple_Issues (0.00s)
    --- PASS: TestValidateConfig_InvalidConfigurations/Combined_Edge_Cases (0.00s)
=== RUN   TestValidateConfig_BoundaryValues
time="2025-10-04 22:11:57" level=info msg="Loading configuration"
    config_validation_test.go:155: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/config/config_validation_test.go:155
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestValidateConfig_BoundaryValues
        	Messages:   	Failed to load valid configuration
--- FAIL: TestValidateConfig_BoundaryValues (0.01s)
=== RUN   TestPathValidation
=== RUN   TestPathValidation/valid_existing_path
=== RUN   TestPathValidation/valid_path_with_creation
=== RUN   TestPathValidation/relative_path
=== RUN   TestPathValidation/empty_path
=== RUN   TestPathValidation/simple_traversal
=== RUN   TestPathValidation/backslash_traversal
=== RUN   TestPathValidation/mixed_separators
=== RUN   TestPathValidation/nested_traversal
=== RUN   TestPathValidation/double_traversal
=== RUN   TestPathValidation/encoded_traversal
=== RUN   TestPathValidation/non-existent_path
=== RUN   TestPathValidation/non-existent_with_no_creation
--- PASS: TestPathValidation (0.00s)
    --- PASS: TestPathValidation/valid_existing_path (0.00s)
    --- PASS: TestPathValidation/valid_path_with_creation (0.00s)
    --- PASS: TestPathValidation/relative_path (0.00s)
    --- PASS: TestPathValidation/empty_path (0.00s)
    --- PASS: TestPathValidation/simple_traversal (0.00s)
    --- PASS: TestPathValidation/backslash_traversal (0.00s)
    --- PASS: TestPathValidation/mixed_separators (0.00s)
    --- PASS: TestPathValidation/nested_traversal (0.00s)
    --- PASS: TestPathValidation/double_traversal (0.00s)
    --- PASS: TestPathValidation/encoded_traversal (0.00s)
    --- PASS: TestPathValidation/non-existent_path (0.00s)
    --- PASS: TestPathValidation/non-existent_with_no_creation (0.00s)
=== RUN   TestPathFallback
    path_validation_test.go:87: Expected validation error due to read-only primary path: invalid recordings path: recordings_path is not writable: cannot write to directory: open /tmp/primary/.write_test_717748: permission denied
--- PASS: TestPathFallback (0.00s)
=== RUN   TestValidatePathPattern
=== RUN   TestValidatePathPattern/valid_pattern
=== RUN   TestValidatePathPattern/empty_pattern
=== RUN   TestValidatePathPattern/dangerous_traversal
=== RUN   TestValidatePathPattern/dangerous_backslash
=== RUN   TestValidatePathPattern/dangerous_newline
=== RUN   TestValidatePathPattern/too_long
--- PASS: TestValidatePathPattern (0.00s)
    --- PASS: TestValidatePathPattern/valid_pattern (0.00s)
    --- PASS: TestValidatePathPattern/empty_pattern (0.00s)
    --- PASS: TestValidatePathPattern/dangerous_traversal (0.00s)
    --- PASS: TestValidatePathPattern/dangerous_backslash (0.00s)
    --- PASS: TestValidatePathPattern/dangerous_newline (0.00s)
    --- PASS: TestValidatePathPattern/too_long (0.00s)
=== RUN   TestCheckWritePermission
--- PASS: TestCheckWritePermission (0.00s)
=== RUN   TestCheckDiskSpace
--- PASS: TestCheckDiskSpace (0.00s)
=== RUN   TestPathTraversalDetection
=== RUN   TestPathTraversalDetection/simple_dotdot
=== RUN   TestPathTraversalDetection/multiple_dotdot
=== RUN   TestPathTraversalDetection/backslash_dotdot
=== RUN   TestPathTraversalDetection/mixed_separators
=== RUN   TestPathTraversalDetection/nested_traversal
=== RUN   TestPathTraversalDetection/double_slash
=== RUN   TestPathTraversalDetection/encoded_traversal
=== RUN   TestPathTraversalDetection/traversal_in_middle
=== RUN   TestPathTraversalDetection/traversal_at_end
=== RUN   TestPathTraversalDetection/valid_path
=== RUN   TestPathTraversalDetection/valid_nested
=== RUN   TestPathTraversalDetection/valid_with_dots
=== RUN   TestPathTraversalDetection/valid_with_underscores
=== RUN   TestPathTraversalDetection/valid_with_dashes
=== RUN   TestPathTraversalDetection/valid_with_numbers
--- PASS: TestPathTraversalDetection (0.00s)
    --- PASS: TestPathTraversalDetection/simple_dotdot (0.00s)
    --- PASS: TestPathTraversalDetection/multiple_dotdot (0.00s)
    --- PASS: TestPathTraversalDetection/backslash_dotdot (0.00s)
    --- PASS: TestPathTraversalDetection/mixed_separators (0.00s)
    --- PASS: TestPathTraversalDetection/nested_traversal (0.00s)
    --- PASS: TestPathTraversalDetection/double_slash (0.00s)
    --- PASS: TestPathTraversalDetection/encoded_traversal (0.00s)
    --- PASS: TestPathTraversalDetection/traversal_in_middle (0.00s)
    --- PASS: TestPathTraversalDetection/traversal_at_end (0.00s)
    --- PASS: TestPathTraversalDetection/valid_path (0.00s)
    --- PASS: TestPathTraversalDetection/valid_nested (0.00s)
    --- PASS: TestPathTraversalDetection/valid_with_dots (0.00s)
    --- PASS: TestPathTraversalDetection/valid_with_underscores (0.00s)
    --- PASS: TestPathTraversalDetection/valid_with_dashes (0.00s)
    --- PASS: TestPathTraversalDetection/valid_with_numbers (0.00s)
=== CONT  TestConfigManager_LoggingConfigurationUpdates
time="2025-10-04 22:11:57" level=info msg="Loading configuration"
    config_manager_test.go:230: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/config/config_manager_test.go:230
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestConfigManager_LoggingConfigurationUpdates
--- FAIL: TestConfigManager_LoggingConfigurationUpdates (0.01s)
FAIL
FAIL	github.com/camerarecorder/mediamtx-camera-service-go/internal/config	0.387s
=== RUN   TestAPIConstants
    api_constants_test.go:15: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/constants/api_constants_test.go:15
        	Error:      	Not equal: 
        	            	expected: -32004
        	            	actual  : -32010
        	Test:       	TestAPIConstants
        	Messages:   	Camera not found error code should match API documentation
--- FAIL: TestAPIConstants (0.00s)
=== RUN   TestAPIErrorMessages
--- PASS: TestAPIErrorMessages (0.00s)
=== RUN   TestValidationHelpers
--- PASS: TestValidationHelpers (0.00s)
FAIL
FAIL	github.com/camerarecorder/mediamtx-camera-service-go/internal/constants	0.007s
=== RUN   TestNewHTTPHealthServer
=== RUN   TestNewHTTPHealthServer/valid_configuration
time="2025-10-04 22:11:57" level=info msg="HTTP Health Server initialized"
=== RUN   TestNewHTTPHealthServer/nil_configuration
=== RUN   TestNewHTTPHealthServer/nil_health_API
=== RUN   TestNewHTTPHealthServer/nil_logger
=== RUN   TestNewHTTPHealthServer/invalid_timeout
--- PASS: TestNewHTTPHealthServer (0.00s)
    --- PASS: TestNewHTTPHealthServer/valid_configuration (0.00s)
    --- PASS: TestNewHTTPHealthServer/nil_configuration (0.00s)
    --- PASS: TestNewHTTPHealthServer/nil_health_API (0.00s)
    --- PASS: TestNewHTTPHealthServer/nil_logger (0.00s)
    --- PASS: TestNewHTTPHealthServer/invalid_timeout (0.00s)
=== RUN   TestHTTPHealthServer_handleBasicHealth
=== RUN   TestHTTPHealthServer_handleBasicHealth/successful_health_check
time="2025-10-04 22:11:57" level=info msg="HTTP Health Server initialized"
=== RUN   TestHTTPHealthServer_handleBasicHealth/health_API_error
time="2025-10-04 22:11:57" level=info msg="HTTP Health Server initialized"
time="2025-10-04 22:11:57" level=error msg="Failed to get health status"
--- PASS: TestHTTPHealthServer_handleBasicHealth (0.00s)
    --- PASS: TestHTTPHealthServer_handleBasicHealth/successful_health_check (0.00s)
    --- PASS: TestHTTPHealthServer_handleBasicHealth/health_API_error (0.00s)
=== RUN   TestHTTPHealthServer_handleDetailedHealth
=== RUN   TestHTTPHealthServer_handleDetailedHealth/successful_detailed_health_check
time="2025-10-04 22:11:57" level=info msg="HTTP Health Server initialized"
=== RUN   TestHTTPHealthServer_handleDetailedHealth/detailed_health_API_error
time="2025-10-04 22:11:57" level=info msg="HTTP Health Server initialized"
time="2025-10-04 22:11:57" level=error msg="Failed to get detailed health status"
--- PASS: TestHTTPHealthServer_handleDetailedHealth (0.00s)
    --- PASS: TestHTTPHealthServer_handleDetailedHealth/successful_detailed_health_check (0.00s)
    --- PASS: TestHTTPHealthServer_handleDetailedHealth/detailed_health_API_error (0.00s)
=== RUN   TestHTTPHealthServer_handleReadiness
=== RUN   TestHTTPHealthServer_handleReadiness/system_ready
time="2025-10-04 22:11:57" level=info msg="HTTP Health Server initialized"
=== RUN   TestHTTPHealthServer_handleReadiness/system_not_ready
time="2025-10-04 22:11:57" level=info msg="HTTP Health Server initialized"
=== RUN   TestHTTPHealthServer_handleReadiness/readiness_API_error
time="2025-10-04 22:11:57" level=info msg="HTTP Health Server initialized"
time="2025-10-04 22:11:57" level=error msg="Failed to check readiness"
--- PASS: TestHTTPHealthServer_handleReadiness (0.00s)
    --- PASS: TestHTTPHealthServer_handleReadiness/system_ready (0.00s)
    --- PASS: TestHTTPHealthServer_handleReadiness/system_not_ready (0.00s)
    --- PASS: TestHTTPHealthServer_handleReadiness/readiness_API_error (0.00s)
=== RUN   TestHTTPHealthServer_handleLiveness
=== RUN   TestHTTPHealthServer_handleLiveness/system_alive
time="2025-10-04 22:11:57" level=info msg="HTTP Health Server initialized"
=== RUN   TestHTTPHealthServer_handleLiveness/system_not_alive
time="2025-10-04 22:11:57" level=info msg="HTTP Health Server initialized"
=== RUN   TestHTTPHealthServer_handleLiveness/liveness_API_error
time="2025-10-04 22:11:57" level=info msg="HTTP Health Server initialized"
time="2025-10-04 22:11:57" level=error msg="Failed to check liveness"
--- PASS: TestHTTPHealthServer_handleLiveness (0.00s)
    --- PASS: TestHTTPHealthServer_handleLiveness/system_alive (0.00s)
    --- PASS: TestHTTPHealthServer_handleLiveness/system_not_alive (0.00s)
    --- PASS: TestHTTPHealthServer_handleLiveness/liveness_API_error (0.00s)
=== RUN   TestHTTPHealthServer_GetServerInfo
time="2025-10-04 22:11:57" level=info msg="HTTP Health Server initialized"
--- PASS: TestHTTPHealthServer_GetServerInfo (0.00s)
=== RUN   TestHTTPHealthServer_Stop
time="2025-10-04 22:11:57" level=info msg="HTTP Health Server initialized"
--- PASS: TestHTTPHealthServer_Stop (0.00s)
=== RUN   TestHTTPHealthServer_Stop_Disabled
time="2025-10-04 22:11:57" level=info msg="HTTP Health Server initialized"
--- PASS: TestHTTPHealthServer_Stop_Disabled (0.00s)
PASS
ok  	github.com/camerarecorder/mediamtx-camera-service-go/internal/health	0.013s
=== RUN   TestAPIErrorHandling_400Scenarios
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestAPIErrorHandling_400Scenarios (0.01s)
=== RUN   TestPathStateTransitions_Recording
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestPathStateTransitions_Recording (0.00s)
=== RUN   TestConcurrentRecordingOperations
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestConcurrentRecordingOperations (0.00s)
=== RUN   TestMediaMTXRecovery_Restart
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestMediaMTXRecovery_Restart (0.00s)
=== RUN   TestNewCircuitBreaker_ReqMTX007
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestNewCircuitBreaker_ReqMTX007 (0.01s)
=== RUN   TestCircuitBreaker_Call_Success_ReqMTX007
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestCircuitBreaker_Call_Success_ReqMTX007 (0.01s)
=== RUN   TestCircuitBreaker_Call_Failure_ReqMTX007
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestCircuitBreaker_Call_Failure_ReqMTX007 (0.00s)
=== RUN   TestCircuitBreaker_Open_ReqMTX007
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestCircuitBreaker_Open_ReqMTX007 (0.00s)
=== RUN   TestCircuitBreaker_HalfOpen_ReqMTX007
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestCircuitBreaker_HalfOpen_ReqMTX007 (0.00s)
=== RUN   TestCircuitBreaker_HalfOpen_Failure_ReqMTX007
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestCircuitBreaker_HalfOpen_Failure_ReqMTX007 (0.00s)
=== RUN   TestCircuitBreaker_Reset_ReqMTX007
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestCircuitBreaker_Reset_ReqMTX007 (0.01s)
=== RUN   TestCircuitBreaker_ContextCancellation_ReqMTX007
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestCircuitBreaker_ContextCancellation_ReqMTX007 (0.00s)
=== RUN   TestCircuitBreakerError_ReqMTX007
--- PASS: TestCircuitBreakerError_ReqMTX007 (0.00s)
=== RUN   TestClient_New_ReqMTX001_Success
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestClient_New_ReqMTX001_Success (0.00s)
=== RUN   TestClient_Get_ReqMTX001_Success
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestClient_Get_ReqMTX001_Success (0.00s)
=== RUN   TestClient_Post_ReqMTX001_Success
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestClient_Post_ReqMTX001_Success (0.00s)
=== RUN   TestClient_Put_ReqMTX001_Success
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestClient_Put_ReqMTX001_Success (0.01s)
=== RUN   TestClient_Delete_ReqMTX001_Success
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestClient_Delete_ReqMTX001_Success (0.01s)
=== RUN   TestClient_GetHealth_ReqMTX004_Success
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestClient_GetHealth_ReqMTX004_Success (0.01s)
=== RUN   TestClient_Get_ReqMTX007_ErrorHandling
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestClient_Get_ReqMTX007_ErrorHandling (0.01s)
=== RUN   TestClient_Get_ReqMTX001_APICompliance
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestClient_Get_ReqMTX001_APICompliance (0.01s)
=== RUN   TestClient_Put_ReqMTX001_PathConfiguration
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestClient_Put_ReqMTX001_PathConfiguration (0.01s)
=== RUN   TestClient_ParsePathListResponse_ReqMTX001_Success
--- PASS: TestClient_ParsePathListResponse_ReqMTX001_Success (0.00s)
=== RUN   TestClient_ParseHealthResponse_ReqMTX001_Success
--- PASS: TestClient_ParseHealthResponse_ReqMTX001_Success (0.00s)
=== RUN   TestClient_Get_ReqMTX001_Concurrent
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestClient_Get_ReqMTX001_Concurrent (0.01s)
=== RUN   TestClient_Close_ReqMTX001_Success
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestClient_Close_ReqMTX001_Success (0.00s)
=== RUN   TestController_GetConfig_ReqMTX003
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestController_GetConfig_ReqMTX003 (0.00s)
=== RUN   TestController_UpdateConfig_ReqMTX003
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestController_UpdateConfig_ReqMTX003 (0.01s)
=== RUN   TestController_UpdateConfig_InvalidConfig_ReqMTX004
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestController_UpdateConfig_InvalidConfig_ReqMTX004 (0.01s)
=== RUN   TestController_GetConfig_NotRunning_ReqMTX004
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestController_GetConfig_NotRunning_ReqMTX004 (0.01s)
=== RUN   TestController_UpdateConfig_NotRunning_ReqMTX004
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestController_UpdateConfig_NotRunning_ReqMTX004 (0.01s)
=== RUN   TestConfigIntegration_GetVersionInfo
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestConfigIntegration_GetVersionInfo (0.01s)
=== RUN   TestConfigIntegration_GetRecordingConfig_ReqMTX001_Success_Refactored
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestConfigIntegration_GetRecordingConfig_ReqMTX001_Success_Refactored (0.01s)
=== RUN   TestConfigIntegration_GetSnapshotConfig_ReqMTX001_Success_Refactored
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestConfigIntegration_GetSnapshotConfig_ReqMTX001_Success_Refactored (0.01s)
=== RUN   TestConfigIntegration_GetFFmpegConfig_ReqMTX001_Success_Refactored
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestConfigIntegration_GetFFmpegConfig_ReqMTX001_Success_Refactored (0.01s)
=== RUN   TestConfigIntegration_GetCameraConfig_ReqMTX001_Success_Refactored
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestConfigIntegration_GetCameraConfig_ReqMTX001_Success_Refactored (0.00s)
=== RUN   TestConfigIntegration_GetPerformanceConfig_ReqMTX001_Success_Refactored
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestConfigIntegration_GetPerformanceConfig_ReqMTX001_Success_Refactored (0.00s)
=== RUN   TestController_GetConfig_ReqMTX001_Success_Refactored
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestController_GetConfig_ReqMTX001_Success_Refactored (0.00s)
=== RUN   TestController_GetHealth_ReqMTX004_Success_Refactored
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestController_GetHealth_ReqMTX004_Success_Refactored (0.00s)
=== RUN   TestController_GetMetrics_ReqMTX004_Success_Refactored
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestController_GetMetrics_ReqMTX004_Success_Refactored (0.00s)
=== RUN   TestController_GetSystemMetrics_ReqMTX004_Success_Refactored
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestController_GetSystemMetrics_ReqMTX004_Success_Refactored (0.01s)
=== RUN   TestController_GetHealth_ReqMTX001_Concurrent_Refactored
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestController_GetHealth_ReqMTX001_Concurrent_Refactored (0.00s)
=== RUN   TestController_GetHealth_ReqMTX004_Monitoring_Refactored
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestController_GetHealth_ReqMTX004_Monitoring_Refactored (0.00s)
=== RUN   TestController_GetHealth_ReqMTX004_Monitoring_Extended_Refactored
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestController_GetHealth_ReqMTX004_Monitoring_Extended_Refactored (0.00s)
=== RUN   TestController_GetHealth_ReqMTX004_ServerDown_Error
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestController_GetHealth_ReqMTX004_ServerDown_Error (0.00s)
=== RUN   TestController_GetHealth_ReqMTX004_Timeout_Error
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestController_GetHealth_ReqMTX004_Timeout_Error (0.01s)
=== RUN   TestController_GetMetrics_ReqMTX004_ServerDown_Error
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestController_GetMetrics_ReqMTX004_ServerDown_Error (0.01s)
=== RUN   TestController_GetSystemMetrics_ReqMTX004_Timeout_Error
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestController_GetSystemMetrics_ReqMTX004_Timeout_Error (0.01s)
=== RUN   TestController_StartRecording_ReqMTX002_Success_Refactored
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestController_StartRecording_ReqMTX002_Success_Refactored (0.00s)
=== RUN   TestController_StopRecording_ReqMTX002_Success_Refactored
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestController_StopRecording_ReqMTX002_Success_Refactored (0.00s)
=== RUN   TestController_StartRecording_ReqMTX002_Advanced_Refactored
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestController_StartRecording_ReqMTX002_Advanced_Refactored (0.00s)
=== RUN   TestController_StartRecording_ReqMTX002_Stream_Refactored
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestController_StartRecording_ReqMTX002_Stream_Refactored (0.01s)
=== RUN   TestController_StartRecording_ReqMTX002_InvalidCamera_Error
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestController_StartRecording_ReqMTX002_InvalidCamera_Error (0.01s)
=== RUN   TestController_StartRecording_ReqMTX002_EmptyCamera_Error
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestController_StartRecording_ReqMTX002_EmptyCamera_Error (0.01s)
=== RUN   TestController_StartRecording_ReqMTX002_AlreadyRecording_Error
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestController_StartRecording_ReqMTX002_AlreadyRecording_Error (0.01s)
=== RUN   TestController_StopRecording_ReqMTX002_NotRecording_Error
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestController_StopRecording_ReqMTX002_NotRecording_Error (0.01s)
=== RUN   TestController_StopRecording_ReqMTX002_InvalidCamera_Error
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestController_StopRecording_ReqMTX002_InvalidCamera_Error (0.01s)
=== RUN   TestController_TakeSnapshot_ReqMTX002_Success_Refactored
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestController_TakeSnapshot_ReqMTX002_Success_Refactored (0.00s)
=== RUN   TestController_ListSnapshots_ReqMTX002_Success_Refactored
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestController_ListSnapshots_ReqMTX002_Success_Refactored (0.01s)
=== RUN   TestController_TakeSnapshot_ReqMTX002_Advanced_Refactored
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestController_TakeSnapshot_ReqMTX002_Advanced_Refactored (0.01s)
=== RUN   TestController_TakeSnapshot_ReqMTX002_Concurrent_Refactored
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestController_TakeSnapshot_ReqMTX002_Concurrent_Refactored (0.00s)
=== RUN   TestController_TakeSnapshot_ReqMTX002_ErrorHandling_Refactored
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestController_TakeSnapshot_ReqMTX002_ErrorHandling_Refactored (0.01s)
=== RUN   TestController_TakeSnapshot_ReqMTX002_InvalidCamera_Error
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestController_TakeSnapshot_ReqMTX002_InvalidCamera_Error (0.01s)
=== RUN   TestController_TakeSnapshot_ReqMTX002_EmptyCamera_Error
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestController_TakeSnapshot_ReqMTX002_EmptyCamera_Error (0.00s)
=== RUN   TestController_TakeSnapshot_ReqMTX002_InvalidFormat_Error
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestController_TakeSnapshot_ReqMTX002_InvalidFormat_Error (0.00s)
=== RUN   TestController_TakeSnapshot_ReqMTX002_InvalidQuality_Error
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestController_TakeSnapshot_ReqMTX002_InvalidQuality_Error (0.00s)
=== RUN   TestController_TakeSnapshot_ReqMTX002_NilOptions_Error
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestController_TakeSnapshot_ReqMTX002_NilOptions_Error (0.01s)
=== RUN   TestController_ListSnapshots_ReqMTX002_InvalidPagination_Error
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestController_ListSnapshots_ReqMTX002_InvalidPagination_Error (0.01s)
=== RUN   TestController_ListSnapshots_ReqMTX002_InvalidOffset_Error
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestController_ListSnapshots_ReqMTX002_InvalidOffset_Error (0.01s)
=== RUN   TestController_GetPaths_ReqMTX003_Success_Refactored
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestController_GetPaths_ReqMTX003_Success_Refactored (0.01s)
=== RUN   TestController_GetStreams_ReqMTX002_Success_Refactored
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestController_GetStreams_ReqMTX002_Success_Refactored (0.01s)
=== RUN   TestController_GetStream_ReqMTX002_Success_Refactored
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestController_GetStream_ReqMTX002_Success_Refactored (0.00s)
=== RUN   TestController_CreateStream_ReqMTX002_StreamManagement_Refactored
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestController_CreateStream_ReqMTX002_StreamManagement_Refactored (0.00s)
=== RUN   TestController_DeleteStream_ReqMTX002_Success_Refactored
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestController_DeleteStream_ReqMTX002_Success_Refactored (0.00s)
=== RUN   TestController_GetStream_ReqMTX004_RTSPOperations_Refactored
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestController_GetStream_ReqMTX004_RTSPOperations_Refactored (0.00s)
=== RUN   TestController_GetPaths_ReqMTX003_Management_Refactored
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestController_GetPaths_ReqMTX003_Management_Refactored (0.00s)
=== RUN   TestController_StartRecording_ReqMTX002_Stream_Integration_Refactored
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestController_StartRecording_ReqMTX002_Stream_Integration_Refactored (0.00s)
=== RUN   TestNewErrorMetricsCollector_ReqMTX008
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestNewErrorMetricsCollector_ReqMTX008 (0.00s)
=== RUN   TestErrorMetricsCollector_RecordError_ReqMTX008
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestErrorMetricsCollector_RecordError_ReqMTX008 (0.00s)
=== RUN   TestErrorMetricsCollector_RecordRecoveryAttempt_ReqMTX008
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestErrorMetricsCollector_RecordRecoveryAttempt_ReqMTX008 (0.00s)
=== RUN   TestErrorMetricsCollector_GetMetrics_ReqMTX008
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestErrorMetricsCollector_GetMetrics_ReqMTX008 (0.00s)
=== RUN   TestErrorMetricsCollector_GetUptime_ReqMTX008
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestErrorMetricsCollector_GetUptime_ReqMTX008 (0.01s)
=== RUN   TestErrorMetricsCollector_Reset_ReqMTX008
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestErrorMetricsCollector_Reset_ReqMTX008 (0.01s)
=== RUN   TestNewErrorAlerter_ReqMTX008
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestNewErrorAlerter_ReqMTX008 (0.01s)
=== RUN   TestErrorAlerter_CheckThresholds_ReqMTX008
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestErrorAlerter_CheckThresholds_ReqMTX008 (0.00s)
=== RUN   TestErrorAlerter_GetAlertStatus_ReqMTX008
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestErrorAlerter_GetAlertStatus_ReqMTX008 (0.00s)
=== RUN   TestErrorAlerter_RateLimit_ReqMTX008
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestErrorAlerter_RateLimit_ReqMTX008 (0.00s)
=== RUN   TestErrorAlertThresholds_ReqMTX008
--- PASS: TestErrorAlertThresholds_ReqMTX008 (0.00s)
=== RUN   TestErrorMetrics_ReqMTX008
--- PASS: TestErrorMetrics_ReqMTX008 (0.00s)
=== RUN   TestNewErrorRecoveryManager_ReqMTX007
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestNewErrorRecoveryManager_ReqMTX007 (0.00s)
=== RUN   TestErrorRecoveryManager_RegisterStrategy_ReqMTX007
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestErrorRecoveryManager_RegisterStrategy_ReqMTX007 (0.00s)
=== RUN   TestErrorRecoveryManager_HandleError_NoRecovery_ReqMTX007
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestErrorRecoveryManager_HandleError_NoRecovery_ReqMTX007 (0.00s)
=== RUN   TestErrorRecoveryManager_HandleError_NoApplicableStrategy_ReqMTX007
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestErrorRecoveryManager_HandleError_NoApplicableStrategy_ReqMTX007 (0.00s)
=== RUN   TestErrorRecoveryManager_HandleError_SuccessfulRecovery_ReqMTX007
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestErrorRecoveryManager_HandleError_SuccessfulRecovery_ReqMTX007 (0.00s)
=== RUN   TestErrorRecoveryManager_HandleError_FailedRecovery_ReqMTX007
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestErrorRecoveryManager_HandleError_FailedRecovery_ReqMTX007 (0.00s)
=== RUN   TestErrorRecoveryManager_HandleError_MultipleStrategies_ReqMTX007
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestErrorRecoveryManager_HandleError_MultipleStrategies_ReqMTX007 (0.00s)
=== RUN   TestErrorRecoveryManager_HandleError_RecoveryInProgress_ReqMTX007
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestErrorRecoveryManager_HandleError_RecoveryInProgress_ReqMTX007 (0.00s)
=== RUN   TestErrorRecoveryManager_GetMetrics_ReqMTX008
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestErrorRecoveryManager_GetMetrics_ReqMTX008 (0.00s)
=== RUN   TestNewMediaMTXError_ReqMTX007
--- PASS: TestNewMediaMTXError_ReqMTX007 (0.00s)
=== RUN   TestNewMediaMTXErrorWithOp_ReqMTX007
--- PASS: TestNewMediaMTXErrorWithOp_ReqMTX007 (0.00s)
=== RUN   TestNewMediaMTXErrorFromHTTP_ReqMTX007
=== RUN   TestNewMediaMTXErrorFromHTTP_ReqMTX007/Unauthorized
=== RUN   TestNewMediaMTXErrorFromHTTP_ReqMTX007/Forbidden
=== RUN   TestNewMediaMTXErrorFromHTTP_ReqMTX007/Not_Found
=== RUN   TestNewMediaMTXErrorFromHTTP_ReqMTX007/Conflict
=== RUN   TestNewMediaMTXErrorFromHTTP_ReqMTX007/Internal_Server_Error
=== RUN   TestNewMediaMTXErrorFromHTTP_ReqMTX007/Bad_Gateway
=== RUN   TestNewMediaMTXErrorFromHTTP_ReqMTX007/Service_Unavailable
=== RUN   TestNewMediaMTXErrorFromHTTP_ReqMTX007/Gateway_Timeout
=== RUN   TestNewMediaMTXErrorFromHTTP_ReqMTX007/#00
--- PASS: TestNewMediaMTXErrorFromHTTP_ReqMTX007 (0.00s)
    --- PASS: TestNewMediaMTXErrorFromHTTP_ReqMTX007/Unauthorized (0.00s)
    --- PASS: TestNewMediaMTXErrorFromHTTP_ReqMTX007/Forbidden (0.00s)
    --- PASS: TestNewMediaMTXErrorFromHTTP_ReqMTX007/Not_Found (0.00s)
    --- PASS: TestNewMediaMTXErrorFromHTTP_ReqMTX007/Conflict (0.00s)
    --- PASS: TestNewMediaMTXErrorFromHTTP_ReqMTX007/Internal_Server_Error (0.00s)
    --- PASS: TestNewMediaMTXErrorFromHTTP_ReqMTX007/Bad_Gateway (0.00s)
    --- PASS: TestNewMediaMTXErrorFromHTTP_ReqMTX007/Service_Unavailable (0.00s)
    --- PASS: TestNewMediaMTXErrorFromHTTP_ReqMTX007/Gateway_Timeout (0.00s)
    --- PASS: TestNewMediaMTXErrorFromHTTP_ReqMTX007/#00 (0.00s)
=== RUN   TestNewPathError_ReqMTX007
--- PASS: TestNewPathError_ReqMTX007 (0.00s)
=== RUN   TestError_Error_ReqMTX007
=== RUN   TestError_Error_ReqMTX007/MediaMTX_error:_Not_Found_(code:_404)
=== RUN   TestError_Error_ReqMTX007/MediaMTX_error_[CreatePath]:_Server_Error_(code:_500)
=== RUN   TestError_Error_ReqMTX007/path_path123:_Create:_Failed_to_create
--- PASS: TestError_Error_ReqMTX007 (0.00s)
    --- PASS: TestError_Error_ReqMTX007/MediaMTX_error:_Not_Found_(code:_404) (0.00s)
    --- PASS: TestError_Error_ReqMTX007/MediaMTX_error_[CreatePath]:_Server_Error_(code:_500) (0.00s)
    --- PASS: TestError_Error_ReqMTX007/path_path123:_Create:_Failed_to_create (0.00s)
=== RUN   TestError_Unwrap_ReqMTX007
--- PASS: TestError_Unwrap_ReqMTX007 (0.00s)
=== RUN   TestError_Is_ReqMTX007
--- PASS: TestError_Is_ReqMTX007 (0.00s)
=== RUN   TestError_As_ReqMTX007
--- PASS: TestError_As_ReqMTX007 (0.00s)
=== RUN   TestError_Validation_ReqMTX007
=== RUN   TestError_Validation_ReqMTX007/Valid_MediaMTX_Error
=== RUN   TestError_Validation_ReqMTX007/Valid_Path_Error
--- PASS: TestError_Validation_ReqMTX007 (0.00s)
    --- PASS: TestError_Validation_ReqMTX007/Valid_MediaMTX_Error (0.00s)
    --- PASS: TestError_Validation_ReqMTX007/Valid_Path_Error (0.00s)
=== RUN   TestNewFFmpegManager_ReqMTX001
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestNewFFmpegManager_ReqMTX001 (0.00s)
=== RUN   TestFFmpegManager_SnapshotOnly_ReqMTX002
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestFFmpegManager_SnapshotOnly_ReqMTX002 (0.01s)
=== RUN   TestFFmpegManager_StartProcess_ReqMTX002
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestFFmpegManager_StartProcess_ReqMTX002 (0.00s)
=== RUN   TestFFmpegManager_StopProcess_ReqMTX002
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestFFmpegManager_StopProcess_ReqMTX002 (0.00s)
=== RUN   TestFFmpegManager_IsProcessRunning_ReqMTX002
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestFFmpegManager_IsProcessRunning_ReqMTX002 (0.00s)
=== RUN   TestFFmpegManager_BuildCommand_ReqMTX002
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestFFmpegManager_BuildCommand_ReqMTX002 (0.00s)
=== RUN   TestFFmpegManager_ErrorHandling_ReqMTX007
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestFFmpegManager_ErrorHandling_ReqMTX007 (0.00s)
=== RUN   TestFFmpegManager_ConcurrentAccess_ReqMTX001
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestFFmpegManager_ConcurrentAccess_ReqMTX001 (0.00s)
=== RUN   TestFFmpegManager_PerformanceMetrics_ReqMTX002
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestFFmpegManager_PerformanceMetrics_ReqMTX002 (0.00s)
=== RUN   TestNewHealthMonitor_ReqMTX004_Refactored
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestNewHealthMonitor_ReqMTX004_Refactored (0.00s)
=== RUN   TestHealthMonitor_StartStop_ReqMTX004_Refactored
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestHealthMonitor_StartStop_ReqMTX004_Refactored (0.00s)
=== RUN   TestHealthMonitor_GetStatus_ReqMTX004_Refactored
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestHealthMonitor_GetStatus_ReqMTX004_Refactored (0.00s)
=== RUN   TestHealthMonitor_GetMetrics_ReqMTX004_Refactored
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestHealthMonitor_GetMetrics_ReqMTX004_Refactored (0.00s)
=== RUN   TestHealthMonitor_RecordSuccess_ReqMTX004_Refactored
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestHealthMonitor_RecordSuccess_ReqMTX004_Refactored (0.00s)
=== RUN   TestHealthMonitor_RecordFailure_ReqMTX004_Refactored
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestHealthMonitor_RecordFailure_ReqMTX004_Refactored (0.00s)
=== RUN   TestHealthMonitor_Configuration_ReqMTX004_Refactored
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestHealthMonitor_Configuration_ReqMTX004_Refactored (0.00s)
=== RUN   TestHealthMonitor_DebounceMechanism_ReqMTX004_Refactored
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestHealthMonitor_DebounceMechanism_ReqMTX004_Refactored (0.00s)
=== RUN   TestHealthMonitor_AtomicOperations_ReqMTX004_Refactored
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestHealthMonitor_AtomicOperations_ReqMTX004_Refactored (0.00s)
=== RUN   TestHealthMonitor_StatusTransitions_ReqMTX004_Refactored
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestHealthMonitor_StatusTransitions_ReqMTX004_Refactored (0.00s)
=== RUN   TestHealthMonitor_GetHealthAPI_ReqMTX004_Refactored
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestHealthMonitor_GetHealthAPI_ReqMTX004_Refactored (0.00s)
=== RUN   TestHealthMonitor_GetHealthAPI_APICompliance_ReqAPI001_Refactored
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestHealthMonitor_GetHealthAPI_APICompliance_ReqAPI001_Refactored (0.00s)
=== RUN   TestHealthMonitor_GetHealthAPI_ErrorScenarios_ReqMTX004_Refactored
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestHealthMonitor_GetHealthAPI_ErrorScenarios_ReqMTX004_Refactored (0.00s)
=== RUN   TestNewHealthNotificationManager_ReqMTX004
--- PASS: TestNewHealthNotificationManager_ReqMTX004 (0.00s)
=== RUN   TestHealthNotificationManager_CheckStorageThresholds_ReqMTX004
time="2025-10-04 22:12:02" level=info msg="Attempting compare-and-swap"
time="2025-10-04 22:12:02" level=info msg="Health notification approved - state change detected"
time="2025-10-04 22:12:02" level=warning msg="Storage threshold exceeded"
--- PASS: TestHealthNotificationManager_CheckStorageThresholds_ReqMTX004 (0.00s)
=== RUN   TestHealthNotificationManager_CheckPerformanceThresholds_ReqMTX004
time="2025-10-04 22:12:02" level=info msg="Checking performance thresholds"
time="2025-10-04 22:12:02" level=info msg="Memory usage threshold exceeded"
time="2025-10-04 22:12:02" level=info msg="Attempting compare-and-swap"
time="2025-10-04 22:12:02" level=info msg="Health notification approved - state change detected"
time="2025-10-04 22:12:02" level=warning msg="Performance threshold exceeded"
--- PASS: TestHealthNotificationManager_CheckPerformanceThresholds_ReqMTX004 (0.00s)
=== RUN   TestHealthNotificationManager_DebounceMechanism_ReqMTX004
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestHealthNotificationManager_DebounceMechanism_ReqMTX004 (0.00s)
=== RUN   TestHealthNotificationManager_AtomicOperations_ReqMTX004
time="2025-10-04 22:12:02" level=info msg="Attempting compare-and-swap"
time="2025-10-04 22:12:02" level=info msg="Attempting compare-and-swap"
time="2025-10-04 22:12:02" level=info msg="Notification suppressed - status changed by another goroutine"
time="2025-10-04 22:12:02" level=info msg="Health notification approved - state change detected"
time="2025-10-04 22:12:02" level=info msg="Notification suppressed due to debounce period"
time="2025-10-04 22:12:02" level=info msg="Attempting compare-and-swap"
time="2025-10-04 22:12:02" level=info msg="Notification suppressed - status changed by another goroutine"
time="2025-10-04 22:12:02" level=info msg="Notification suppressed due to debounce period"
time="2025-10-04 22:12:02" level=info msg="Notification suppressed due to debounce period"
time="2025-10-04 22:12:02" level=info msg="Attempting compare-and-swap"
time="2025-10-04 22:12:02" level=info msg="Notification suppressed - status changed by another goroutine"
time="2025-10-04 22:12:02" level=info msg="Attempting compare-and-swap"
time="2025-10-04 22:12:02" level=info msg="Notification suppressed - status changed by another goroutine"
time="2025-10-04 22:12:02" level=info msg="Notification suppressed due to debounce period"
time="2025-10-04 22:12:02" level=warning msg="Storage threshold exceeded"
time="2025-10-04 22:12:02" level=info msg="Notification suppressed due to debounce period"
--- PASS: TestHealthNotificationManager_AtomicOperations_ReqMTX004 (0.00s)
=== RUN   TestHealthNotificationManager_ThresholdValidation_ReqMTX004
=== RUN   TestHealthNotificationManager_ThresholdValidation_ReqMTX004/high_memory_usage
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
=== RUN   TestHealthNotificationManager_ThresholdValidation_ReqMTX004/high_error_rate
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
=== RUN   TestHealthNotificationManager_ThresholdValidation_ReqMTX004/high_response_time
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
=== RUN   TestHealthNotificationManager_ThresholdValidation_ReqMTX004/high_connections
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
=== RUN   TestHealthNotificationManager_ThresholdValidation_ReqMTX004/high_goroutines
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
=== RUN   TestHealthNotificationManager_ThresholdValidation_ReqMTX004/all_normal
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestHealthNotificationManager_ThresholdValidation_ReqMTX004 (0.04s)
    --- FAIL: TestHealthNotificationManager_ThresholdValidation_ReqMTX004/high_memory_usage (0.01s)
    --- FAIL: TestHealthNotificationManager_ThresholdValidation_ReqMTX004/high_error_rate (0.00s)
    --- FAIL: TestHealthNotificationManager_ThresholdValidation_ReqMTX004/high_response_time (0.01s)
    --- FAIL: TestHealthNotificationManager_ThresholdValidation_ReqMTX004/high_connections (0.01s)
    --- FAIL: TestHealthNotificationManager_ThresholdValidation_ReqMTX004/high_goroutines (0.01s)
    --- FAIL: TestHealthNotificationManager_ThresholdValidation_ReqMTX004/all_normal (0.01s)
=== RUN   TestHealthNotificationManager_StorageInfoInterface_ReqMTX004
--- PASS: TestHealthNotificationManager_StorageInfoInterface_ReqMTX004 (0.00s)
=== RUN   TestJSONParsingErrors_DangerousBugs
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestJSONParsingErrors_DangerousBugs (0.01s)
=== RUN   TestJSONParsingPanicProtection_DangerousBugs
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestJSONParsingPanicProtection_DangerousBugs (0.01s)
=== RUN   TestJSONParsingFunctions_DangerousBugs
=== RUN   TestJSONParsingFunctions_DangerousBugs/determineStatus_Function_Bug
    test_json_malformation_test.go:158: determineStatus function works correctly
=== RUN   TestJSONParsingFunctions_DangerousBugs/parseMetricsResponse_Function_Bug
    test_json_malformation_test.go:179: parseMetricsResponse function works correctly
=== RUN   TestJSONParsingFunctions_DangerousBugs/marshalCreateStreamRequest_Function_Bug
    test_json_malformation_test.go:193: marshalCreateStreamRequest function works correctly
=== RUN   TestJSONParsingFunctions_DangerousBugs/marshalUpdatePathRequest_Function_Bug
    test_json_malformation_test.go:209: json.Marshal function works correctly
=== RUN   TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage
=== RUN   TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/path_list_comprehensive
=== RUN   TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/path_list_comprehensive/empty_json
=== RUN   TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/path_list_comprehensive/null_json
=== RUN   TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/path_list_comprehensive/malformed_json
=== RUN   TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/path_list_comprehensive/incomplete_json
=== RUN   TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/path_list_comprehensive/unexpected_json_structure
=== RUN   TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/path_list_comprehensive/json_with_missing_required_fields
=== RUN   TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/path_list_comprehensive/json_with_extra_fields
    test_json_malformation_test.go:241: Scenario json_with_extra_fields handled (error: MediaMTX error [parse_path_list]: missing required field: pageCount (code: 0))
=== RUN   TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/path_list_comprehensive/json_with_unicode_issues
    test_json_malformation_test.go:241: Scenario json_with_unicode_issues handled (error: MediaMTX error [parse_path_list]: missing required field: pageCount (code: 0))
=== RUN   TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/path_list_comprehensive/json_with_very_large_strings
    test_json_malformation_test.go:241: Scenario json_with_very_large_strings handled (error: MediaMTX error [parse_path_list]: missing required field: pageCount (code: 0))
=== RUN   TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/path_list_comprehensive/json_with_special_characters
    test_json_malformation_test.go:241: Scenario json_with_special_characters handled (error: MediaMTX error [parse_path_list]: missing required field: pageCount (code: 0))
=== RUN   TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/path_list_comprehensive/unexpected_json_structure#01
=== RUN   TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/path_list_comprehensive/json_with_invalid_types
=== RUN   TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/path_list_comprehensive/json_with_missing_required_fields#01
=== RUN   TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/path_list_comprehensive/json_with_extra_fields#01
    test_json_malformation_test.go:241: Scenario json_with_extra_fields handled (error: <nil>)
=== RUN   TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/stream_comprehensive
=== RUN   TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/stream_comprehensive/empty_json
=== RUN   TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/stream_comprehensive/null_json
=== RUN   TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/stream_comprehensive/malformed_json
=== RUN   TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/stream_comprehensive/incomplete_json
=== RUN   TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/stream_comprehensive/unexpected_json_structure
=== RUN   TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/stream_comprehensive/json_with_missing_required_fields
=== RUN   TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/stream_comprehensive/json_with_extra_fields
    test_json_malformation_test.go:241: Scenario json_with_extra_fields handled (error: MediaMTX error [parse_stream]: missing required field (code: 0))
=== RUN   TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/stream_comprehensive/json_with_unicode_issues
    test_json_malformation_test.go:241: Scenario json_with_unicode_issues handled (error: MediaMTX error [parse_stream]: missing required field (code: 0))
=== RUN   TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/stream_comprehensive/json_with_very_large_strings
    test_json_malformation_test.go:241: Scenario json_with_very_large_strings handled (error: MediaMTX error [parse_stream]: missing required field (code: 0))
=== RUN   TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/stream_comprehensive/json_with_special_characters
    test_json_malformation_test.go:241: Scenario json_with_special_characters handled (error: MediaMTX error [parse_stream]: missing required field (code: 0))
=== RUN   TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/stream_comprehensive/unexpected_json_structure#01
=== RUN   TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/stream_comprehensive/json_with_invalid_types
=== RUN   TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/stream_comprehensive/json_with_missing_required_fields#01
=== RUN   TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/stream_comprehensive/json_with_extra_fields#01
    test_json_malformation_test.go:241: Scenario json_with_extra_fields handled (error: <nil>)
=== RUN   TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/paths_comprehensive
=== RUN   TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/paths_comprehensive/empty_json
=== RUN   TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/paths_comprehensive/null_json
=== RUN   TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/paths_comprehensive/malformed_json
=== RUN   TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/paths_comprehensive/incomplete_json
=== RUN   TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/paths_comprehensive/unexpected_json_structure
=== RUN   TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/paths_comprehensive/json_with_missing_required_fields
=== RUN   TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/paths_comprehensive/json_with_extra_fields
    test_json_malformation_test.go:241: Scenario json_with_extra_fields handled (error: MediaMTX error [parse_path_conf_list]: missing required field: pageCount (code: 0))
=== RUN   TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/paths_comprehensive/json_with_unicode_issues
    test_json_malformation_test.go:241: Scenario json_with_unicode_issues handled (error: MediaMTX error [parse_path_conf_list]: missing required field: pageCount (code: 0))
=== RUN   TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/paths_comprehensive/json_with_very_large_strings
    test_json_malformation_test.go:241: Scenario json_with_very_large_strings handled (error: MediaMTX error [parse_path_conf_list]: missing required field: pageCount (code: 0))
=== RUN   TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/paths_comprehensive/json_with_special_characters
    test_json_malformation_test.go:241: Scenario json_with_special_characters handled (error: MediaMTX error [parse_path_conf_list]: missing required field: pageCount (code: 0))
=== RUN   TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/paths_comprehensive/unexpected_json_structure#01
=== RUN   TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/paths_comprehensive/json_with_invalid_types
=== RUN   TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/paths_comprehensive/json_with_missing_required_fields#01
=== RUN   TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/paths_comprehensive/json_with_extra_fields#01
    test_json_malformation_test.go:241: Scenario json_with_extra_fields handled (error: <nil>)
=== RUN   TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/health_comprehensive
=== RUN   TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/health_comprehensive/empty_json
=== RUN   TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/health_comprehensive/null_json
=== RUN   TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/health_comprehensive/malformed_json
=== RUN   TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/health_comprehensive/incomplete_json
=== RUN   TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/health_comprehensive/unexpected_json_structure
=== RUN   TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/health_comprehensive/json_with_missing_required_fields
=== RUN   TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/health_comprehensive/json_with_extra_fields
    test_json_malformation_test.go:241: Scenario json_with_extra_fields handled (error: MediaMTX error [parse_health]: missing required field (code: 0))
=== RUN   TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/health_comprehensive/json_with_unicode_issues
    test_json_malformation_test.go:241: Scenario json_with_unicode_issues handled (error: MediaMTX error [parse_health]: missing required field (code: 0))
=== RUN   TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/health_comprehensive/json_with_very_large_strings
    test_json_malformation_test.go:241: Scenario json_with_very_large_strings handled (error: MediaMTX error [parse_health]: missing required field (code: 0))
=== RUN   TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/health_comprehensive/json_with_special_characters
    test_json_malformation_test.go:241: Scenario json_with_special_characters handled (error: MediaMTX error [parse_health]: missing required field (code: 0))
=== RUN   TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/health_comprehensive/unexpected_json_structure#01
=== RUN   TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/health_comprehensive/json_with_invalid_types
=== RUN   TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/health_comprehensive/json_with_missing_required_fields#01
=== RUN   TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/health_comprehensive/json_with_extra_fields#01
    test_json_malformation_test.go:241: Scenario json_with_extra_fields handled (error: <nil>)
--- PASS: TestJSONParsingFunctions_DangerousBugs (0.05s)
    --- PASS: TestJSONParsingFunctions_DangerousBugs/determineStatus_Function_Bug (0.00s)
    --- PASS: TestJSONParsingFunctions_DangerousBugs/parseMetricsResponse_Function_Bug (0.00s)
    --- PASS: TestJSONParsingFunctions_DangerousBugs/marshalCreateStreamRequest_Function_Bug (0.00s)
    --- PASS: TestJSONParsingFunctions_DangerousBugs/marshalUpdatePathRequest_Function_Bug (0.00s)
    --- PASS: TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage (0.04s)
        --- PASS: TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/path_list_comprehensive (0.01s)
            --- PASS: TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/path_list_comprehensive/empty_json (0.00s)
            --- PASS: TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/path_list_comprehensive/null_json (0.00s)
            --- PASS: TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/path_list_comprehensive/malformed_json (0.00s)
            --- PASS: TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/path_list_comprehensive/incomplete_json (0.00s)
            --- PASS: TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/path_list_comprehensive/unexpected_json_structure (0.00s)
            --- PASS: TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/path_list_comprehensive/json_with_missing_required_fields (0.00s)
            --- PASS: TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/path_list_comprehensive/json_with_extra_fields (0.00s)
            --- PASS: TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/path_list_comprehensive/json_with_unicode_issues (0.00s)
            --- PASS: TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/path_list_comprehensive/json_with_very_large_strings (0.01s)
            --- PASS: TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/path_list_comprehensive/json_with_special_characters (0.00s)
            --- PASS: TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/path_list_comprehensive/unexpected_json_structure#01 (0.00s)
            --- PASS: TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/path_list_comprehensive/json_with_invalid_types (0.00s)
            --- PASS: TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/path_list_comprehensive/json_with_missing_required_fields#01 (0.00s)
            --- PASS: TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/path_list_comprehensive/json_with_extra_fields#01 (0.00s)
        --- PASS: TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/stream_comprehensive (0.01s)
            --- PASS: TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/stream_comprehensive/empty_json (0.00s)
            --- PASS: TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/stream_comprehensive/null_json (0.00s)
            --- PASS: TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/stream_comprehensive/malformed_json (0.00s)
            --- PASS: TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/stream_comprehensive/incomplete_json (0.00s)
            --- PASS: TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/stream_comprehensive/unexpected_json_structure (0.00s)
            --- PASS: TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/stream_comprehensive/json_with_missing_required_fields (0.00s)
            --- PASS: TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/stream_comprehensive/json_with_extra_fields (0.00s)
            --- PASS: TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/stream_comprehensive/json_with_unicode_issues (0.00s)
            --- PASS: TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/stream_comprehensive/json_with_very_large_strings (0.01s)
            --- PASS: TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/stream_comprehensive/json_with_special_characters (0.00s)
            --- PASS: TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/stream_comprehensive/unexpected_json_structure#01 (0.00s)
            --- PASS: TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/stream_comprehensive/json_with_invalid_types (0.00s)
            --- PASS: TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/stream_comprehensive/json_with_missing_required_fields#01 (0.00s)
            --- PASS: TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/stream_comprehensive/json_with_extra_fields#01 (0.00s)
        --- PASS: TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/paths_comprehensive (0.01s)
            --- PASS: TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/paths_comprehensive/empty_json (0.00s)
            --- PASS: TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/paths_comprehensive/null_json (0.00s)
            --- PASS: TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/paths_comprehensive/malformed_json (0.00s)
            --- PASS: TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/paths_comprehensive/incomplete_json (0.00s)
            --- PASS: TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/paths_comprehensive/unexpected_json_structure (0.00s)
            --- PASS: TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/paths_comprehensive/json_with_missing_required_fields (0.00s)
            --- PASS: TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/paths_comprehensive/json_with_extra_fields (0.00s)
            --- PASS: TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/paths_comprehensive/json_with_unicode_issues (0.00s)
            --- PASS: TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/paths_comprehensive/json_with_very_large_strings (0.01s)
            --- PASS: TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/paths_comprehensive/json_with_special_characters (0.00s)
            --- PASS: TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/paths_comprehensive/unexpected_json_structure#01 (0.00s)
            --- PASS: TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/paths_comprehensive/json_with_invalid_types (0.00s)
            --- PASS: TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/paths_comprehensive/json_with_missing_required_fields#01 (0.00s)
            --- PASS: TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/paths_comprehensive/json_with_extra_fields#01 (0.00s)
        --- PASS: TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/health_comprehensive (0.01s)
            --- PASS: TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/health_comprehensive/empty_json (0.00s)
            --- PASS: TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/health_comprehensive/null_json (0.00s)
            --- PASS: TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/health_comprehensive/malformed_json (0.00s)
            --- PASS: TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/health_comprehensive/incomplete_json (0.00s)
            --- PASS: TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/health_comprehensive/unexpected_json_structure (0.00s)
            --- PASS: TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/health_comprehensive/json_with_missing_required_fields (0.00s)
            --- PASS: TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/health_comprehensive/json_with_extra_fields (0.00s)
            --- PASS: TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/health_comprehensive/json_with_unicode_issues (0.00s)
            --- PASS: TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/health_comprehensive/json_with_very_large_strings (0.01s)
            --- PASS: TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/health_comprehensive/json_with_special_characters (0.00s)
            --- PASS: TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/health_comprehensive/unexpected_json_structure#01 (0.00s)
            --- PASS: TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/health_comprehensive/json_with_invalid_types (0.00s)
            --- PASS: TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/health_comprehensive/json_with_missing_required_fields#01 (0.00s)
            --- PASS: TestJSONParsingFunctions_DangerousBugs/comprehensive_parsing_coverage/health_comprehensive/json_with_extra_fields#01 (0.00s)
=== RUN   TestJSONParsingEdgeCases_DangerousBugs
=== RUN   TestJSONParsingEdgeCases_DangerousBugs/JSON_Parsing_Edge_Cases
=== RUN   TestJSONParsingEdgeCases_DangerousBugs/JSON_Parsing_Edge_Cases/very_large_json
    test_json_malformation_test.go:286: Testing edge case: very_large_json - should handle gracefully
    test_json_malformation_test.go:302: Edge case very_large_json handled without panic (errors: MediaMTX error [parse_path_list]: missing required field: pageCount (code: 0), MediaMTX error [parse_stream]: missing required field (code: 0), MediaMTX error [parse_health]: missing required field (code: 0), MediaMTX error [parse_path_conf_list]: missing required field: pageCount (code: 0))
=== RUN   TestJSONParsingEdgeCases_DangerousBugs/JSON_Parsing_Edge_Cases/json_with_null_bytes
    test_json_malformation_test.go:286: Testing edge case: json_with_null_bytes - should handle gracefully
    test_json_malformation_test.go:302: Edge case json_with_null_bytes handled without panic (errors: MediaMTX error [parse_path_list]: invalid JSON response: invalid character 'x' in string escape code (code: 0), MediaMTX error [parse_stream]: failed to parse stream response (code: 0), MediaMTX error [parse_health]: failed to parse health response (code: 0), MediaMTX error [parse_path_conf_list]: invalid JSON response: invalid character 'x' in string escape code (code: 0))
=== RUN   TestJSONParsingEdgeCases_DangerousBugs/JSON_Parsing_Edge_Cases/json_with_unicode_issues
    test_json_malformation_test.go:286: Testing edge case: json_with_unicode_issues - should handle gracefully
    test_json_malformation_test.go:302: Edge case json_with_unicode_issues handled without panic (errors: MediaMTX error [parse_path_list]: missing required field: pageCount (code: 0), MediaMTX error [parse_stream]: missing required field (code: 0), MediaMTX error [parse_health]: missing required field (code: 0), MediaMTX error [parse_path_conf_list]: missing required field: pageCount (code: 0))
=== RUN   TestJSONParsingEdgeCases_DangerousBugs/JSON_Parsing_Edge_Cases/json_with_deep_nesting
    test_json_malformation_test.go:286: Testing edge case: json_with_deep_nesting - should handle gracefully
    test_json_malformation_test.go:302: Edge case json_with_deep_nesting handled without panic (errors: MediaMTX error [parse_path_list]: invalid JSON response: unexpected end of JSON input (code: 0), MediaMTX error [parse_stream]: failed to parse stream response (code: 0), MediaMTX error [parse_health]: failed to parse health response (code: 0), MediaMTX error [parse_path_conf_list]: invalid JSON response: unexpected end of JSON input (code: 0))
=== RUN   TestJSONParsingEdgeCases_DangerousBugs/registry_edge_cases
=== RUN   TestJSONParsingEdgeCases_DangerousBugs/registry_edge_cases/path_list_edge_cases
=== RUN   TestJSONParsingEdgeCases_DangerousBugs/registry_edge_cases/path_list_edge_cases/json_with_unicode_issues
    test_json_malformation_test.go:349: Edge case json_with_unicode_issues handled without panic (error: MediaMTX error [parse_path_list]: missing required field: pageCount (code: 0))
=== RUN   TestJSONParsingEdgeCases_DangerousBugs/registry_edge_cases/path_list_edge_cases/json_with_very_large_strings
    test_json_malformation_test.go:349: Edge case json_with_very_large_strings handled without panic (error: MediaMTX error [parse_path_list]: missing required field: pageCount (code: 0))
=== RUN   TestJSONParsingEdgeCases_DangerousBugs/registry_edge_cases/path_list_edge_cases/json_with_special_characters
    test_json_malformation_test.go:349: Edge case json_with_special_characters handled without panic (error: MediaMTX error [parse_path_list]: missing required field: pageCount (code: 0))
=== RUN   TestJSONParsingEdgeCases_DangerousBugs/registry_edge_cases/stream_edge_cases
=== RUN   TestJSONParsingEdgeCases_DangerousBugs/registry_edge_cases/stream_edge_cases/json_with_unicode_issues
    test_json_malformation_test.go:349: Edge case json_with_unicode_issues handled without panic (error: MediaMTX error [parse_stream]: missing required field (code: 0))
=== RUN   TestJSONParsingEdgeCases_DangerousBugs/registry_edge_cases/stream_edge_cases/json_with_very_large_strings
    test_json_malformation_test.go:349: Edge case json_with_very_large_strings handled without panic (error: MediaMTX error [parse_stream]: missing required field (code: 0))
=== RUN   TestJSONParsingEdgeCases_DangerousBugs/registry_edge_cases/stream_edge_cases/json_with_special_characters
    test_json_malformation_test.go:349: Edge case json_with_special_characters handled without panic (error: MediaMTX error [parse_stream]: missing required field (code: 0))
=== RUN   TestJSONParsingEdgeCases_DangerousBugs/registry_edge_cases/paths_edge_cases
=== RUN   TestJSONParsingEdgeCases_DangerousBugs/registry_edge_cases/paths_edge_cases/json_with_unicode_issues
    test_json_malformation_test.go:349: Edge case json_with_unicode_issues handled without panic (error: MediaMTX error [parse_path_conf_list]: missing required field: pageCount (code: 0))
=== RUN   TestJSONParsingEdgeCases_DangerousBugs/registry_edge_cases/paths_edge_cases/json_with_very_large_strings
    test_json_malformation_test.go:349: Edge case json_with_very_large_strings handled without panic (error: MediaMTX error [parse_path_conf_list]: missing required field: pageCount (code: 0))
=== RUN   TestJSONParsingEdgeCases_DangerousBugs/registry_edge_cases/paths_edge_cases/json_with_special_characters
    test_json_malformation_test.go:349: Edge case json_with_special_characters handled without panic (error: MediaMTX error [parse_path_conf_list]: missing required field: pageCount (code: 0))
=== RUN   TestJSONParsingEdgeCases_DangerousBugs/registry_edge_cases/health_edge_cases
=== RUN   TestJSONParsingEdgeCases_DangerousBugs/registry_edge_cases/health_edge_cases/json_with_unicode_issues
    test_json_malformation_test.go:349: Edge case json_with_unicode_issues handled without panic (error: MediaMTX error [parse_health]: missing required field (code: 0))
=== RUN   TestJSONParsingEdgeCases_DangerousBugs/registry_edge_cases/health_edge_cases/json_with_very_large_strings
    test_json_malformation_test.go:349: Edge case json_with_very_large_strings handled without panic (error: MediaMTX error [parse_health]: missing required field (code: 0))
=== RUN   TestJSONParsingEdgeCases_DangerousBugs/registry_edge_cases/health_edge_cases/json_with_special_characters
    test_json_malformation_test.go:349: Edge case json_with_special_characters handled without panic (error: MediaMTX error [parse_health]: missing required field (code: 0))
--- PASS: TestJSONParsingEdgeCases_DangerousBugs (0.09s)
    --- PASS: TestJSONParsingEdgeCases_DangerousBugs/JSON_Parsing_Edge_Cases (0.04s)
        --- PASS: TestJSONParsingEdgeCases_DangerousBugs/JSON_Parsing_Edge_Cases/very_large_json (0.04s)
        --- PASS: TestJSONParsingEdgeCases_DangerousBugs/JSON_Parsing_Edge_Cases/json_with_null_bytes (0.00s)
        --- PASS: TestJSONParsingEdgeCases_DangerousBugs/JSON_Parsing_Edge_Cases/json_with_unicode_issues (0.00s)
        --- PASS: TestJSONParsingEdgeCases_DangerousBugs/JSON_Parsing_Edge_Cases/json_with_deep_nesting (0.00s)
    --- PASS: TestJSONParsingEdgeCases_DangerousBugs/registry_edge_cases (0.04s)
        --- PASS: TestJSONParsingEdgeCases_DangerousBugs/registry_edge_cases/path_list_edge_cases (0.01s)
            --- PASS: TestJSONParsingEdgeCases_DangerousBugs/registry_edge_cases/path_list_edge_cases/json_with_unicode_issues (0.00s)
            --- PASS: TestJSONParsingEdgeCases_DangerousBugs/registry_edge_cases/path_list_edge_cases/json_with_very_large_strings (0.01s)
            --- PASS: TestJSONParsingEdgeCases_DangerousBugs/registry_edge_cases/path_list_edge_cases/json_with_special_characters (0.00s)
        --- PASS: TestJSONParsingEdgeCases_DangerousBugs/registry_edge_cases/stream_edge_cases (0.01s)
            --- PASS: TestJSONParsingEdgeCases_DangerousBugs/registry_edge_cases/stream_edge_cases/json_with_unicode_issues (0.00s)
            --- PASS: TestJSONParsingEdgeCases_DangerousBugs/registry_edge_cases/stream_edge_cases/json_with_very_large_strings (0.01s)
            --- PASS: TestJSONParsingEdgeCases_DangerousBugs/registry_edge_cases/stream_edge_cases/json_with_special_characters (0.00s)
        --- PASS: TestJSONParsingEdgeCases_DangerousBugs/registry_edge_cases/paths_edge_cases (0.01s)
            --- PASS: TestJSONParsingEdgeCases_DangerousBugs/registry_edge_cases/paths_edge_cases/json_with_unicode_issues (0.00s)
            --- PASS: TestJSONParsingEdgeCases_DangerousBugs/registry_edge_cases/paths_edge_cases/json_with_very_large_strings (0.01s)
            --- PASS: TestJSONParsingEdgeCases_DangerousBugs/registry_edge_cases/paths_edge_cases/json_with_special_characters (0.00s)
        --- PASS: TestJSONParsingEdgeCases_DangerousBugs/registry_edge_cases/health_edge_cases (0.01s)
            --- PASS: TestJSONParsingEdgeCases_DangerousBugs/registry_edge_cases/health_edge_cases/json_with_unicode_issues (0.00s)
            --- PASS: TestJSONParsingEdgeCases_DangerousBugs/registry_edge_cases/health_edge_cases/json_with_very_large_strings (0.01s)
            --- PASS: TestJSONParsingEdgeCases_DangerousBugs/registry_edge_cases/health_edge_cases/json_with_special_characters (0.00s)
=== RUN   TestPathManager_RealServer_ReqMTX001
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestPathManager_RealServer_ReqMTX001 (0.00s)
=== RUN   TestPathManager_StreamManagement_ReqMTX002
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestPathManager_StreamManagement_ReqMTX002 (0.01s)
=== RUN   TestPathManager_ConfigIntegration_ReqMTX003
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestPathManager_ConfigIntegration_ReqMTX003 (0.01s)
=== RUN   TestPathManager_HealthMonitoring_ReqMTX004
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestPathManager_HealthMonitoring_ReqMTX004 (0.01s)
=== RUN   TestPathManager_RealMediaMTXServer
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestPathManager_RealMediaMTXServer (0.01s)
=== RUN   TestNewPathManager_ReqMTX001
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestNewPathManager_ReqMTX001 (0.01s)
=== RUN   TestPathManager_CreatePath_ReqMTX003
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestPathManager_CreatePath_ReqMTX003 (0.01s)
=== RUN   TestPathManager_DeletePath_ReqMTX003
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestPathManager_DeletePath_ReqMTX003 (0.01s)
=== RUN   TestPathManager_GetPath_ReqMTX003
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestPathManager_GetPath_ReqMTX003 (0.00s)
=== RUN   TestPathManager_ListPaths_ReqMTX003
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestPathManager_ListPaths_ReqMTX003 (0.00s)
=== RUN   TestPathManager_ValidatePath_ReqMTX003
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestPathManager_ValidatePath_ReqMTX003 (0.00s)
=== RUN   TestPathManager_ErrorHandling_ReqMTX001
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestPathManager_ErrorHandling_ReqMTX001 (0.00s)
=== RUN   TestPathFallback
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestPathFallback (0.00s)
=== RUN   TestPathValidatorCaching
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestPathValidatorCaching (0.00s)
=== RUN   TestPathValidatorErrorHandling
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestPathValidatorErrorHandling (0.00s)
=== RUN   TestPathValidatorSinglePathValidation
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestPathValidatorSinglePathValidation (0.00s)
=== RUN   TestNewRecordingManager_ReqMTX001_Refactored
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestNewRecordingManager_ReqMTX001_Refactored (0.00s)
=== RUN   TestRecordingManager_CompleteLifecycle_ReqMTX002_Refactored
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestRecordingManager_CompleteLifecycle_ReqMTX002_Refactored (0.00s)
=== RUN   TestRecordingManager_StopRecording_ReqMTX002_Refactored
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestRecordingManager_StopRecording_ReqMTX002_Refactored (0.01s)
=== RUN   TestRecordingManager_GetRecordingsListAPI_ReqMTX002_Refactored
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestRecordingManager_GetRecordingsListAPI_ReqMTX002_Refactored (0.01s)
=== RUN   TestRecordingManager_StartRecordingCreatesPath_ReqMTX003_Refactored
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestRecordingManager_StartRecordingCreatesPath_ReqMTX003_Refactored (0.00s)
=== RUN   TestRecordingManager_APISchemaCompliance_ReqMTX001_Refactored
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestRecordingManager_APISchemaCompliance_ReqMTX001_Refactored (0.01s)
=== RUN   TestRecordingManager_APIErrorHandling_ReqMTX004_Refactored
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestRecordingManager_APIErrorHandling_ReqMTX004_Refactored (0.01s)
=== RUN   TestRecordingManager_ErrorHandling_ReqMTX007_Refactored
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestRecordingManager_ErrorHandling_ReqMTX007_Refactored (0.01s)
=== RUN   TestRecordingManager_ConcurrentAccess_ReqMTX001_Refactored
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestRecordingManager_ConcurrentAccess_ReqMTX001_Refactored (0.01s)
=== RUN   TestRecordingManager_StartRecordingWithSegments_ReqMTX002_Refactored
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestRecordingManager_StartRecordingWithSegments_ReqMTX002_Refactored (0.01s)
=== RUN   TestRecordingManager_MultiTierRecording_ReqMTX002_Refactored
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestRecordingManager_MultiTierRecording_ReqMTX002_Refactored (0.01s)
=== RUN   TestRecordingManager_ProgressiveReadinessCompliance_ReqMTX001_Refactored
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestRecordingManager_ProgressiveReadinessCompliance_ReqMTX001_Refactored (0.01s)
=== RUN   TestErrorContext_ReqMTX007
--- PASS: TestErrorContext_ReqMTX007 (0.00s)
=== RUN   TestErrorSeverity_ReqMTX007
--- PASS: TestErrorSeverity_ReqMTX007 (0.00s)
=== RUN   TestRecoveryStrategy_Interface_ReqMTX007
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestRecoveryStrategy_Interface_ReqMTX007 (0.01s)
=== RUN   TestStreamRecoveryStrategy_Interface_ReqMTX007
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestStreamRecoveryStrategy_Interface_ReqMTX007 (0.00s)
=== RUN   TestRecordingRecoveryStrategy_CanRecover_ReqMTX007
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestRecordingRecoveryStrategy_CanRecover_ReqMTX007 (0.00s)
=== RUN   TestStreamRecoveryStrategy_CanRecover_ReqMTX007
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestStreamRecoveryStrategy_CanRecover_ReqMTX007 (0.00s)
=== RUN   TestRecordingRecoveryStrategy_Recover_NoCameraID_ReqMTX007
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestRecordingRecoveryStrategy_Recover_NoCameraID_ReqMTX007 (0.00s)
=== RUN   TestStreamRecoveryStrategy_Recover_NoCameraID_ReqMTX007
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestStreamRecoveryStrategy_Recover_NoCameraID_ReqMTX007 (0.00s)
=== RUN   TestNewRTSPConnectionManager_ReqMTX001_Refactored
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestNewRTSPConnectionManager_ReqMTX001_Refactored (0.01s)
=== RUN   TestRTSPConnectionManager_ListConnections_ReqMTX002_Refactored
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestRTSPConnectionManager_ListConnections_ReqMTX002_Refactored (0.00s)
=== RUN   TestRTSPConnectionManager_ListSessions_ReqMTX002_Refactored
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestRTSPConnectionManager_ListSessions_ReqMTX002_Refactored (0.00s)
=== RUN   TestRTSPConnectionManager_GetConnectionHealth_ReqMTX004_Refactored
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestRTSPConnectionManager_GetConnectionHealth_ReqMTX004_Refactored (0.00s)
=== RUN   TestRTSPConnectionManager_GetConnectionMetrics_ReqMTX004_Refactored
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestRTSPConnectionManager_GetConnectionMetrics_ReqMTX004_Refactored (0.01s)
=== RUN   TestRTSPConnectionManager_Configuration_ReqMTX003_Refactored
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestRTSPConnectionManager_Configuration_ReqMTX003_Refactored (0.01s)
=== RUN   TestRTSPConnectionManager_ErrorHandling_ReqMTX004_Refactored
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestRTSPConnectionManager_ErrorHandling_ReqMTX004_Refactored (0.00s)
=== RUN   TestRTSPConnectionManager_Performance_ReqMTX002_Refactored
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestRTSPConnectionManager_Performance_ReqMTX002_Refactored (0.00s)
=== RUN   TestRTSPConnectionManager_RealMediaMTXServer_Refactored
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestRTSPConnectionManager_RealMediaMTXServer_Refactored (0.00s)
=== RUN   TestRTSPConnectionManager_ConfigurationScenarios_Refactored
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestRTSPConnectionManager_ConfigurationScenarios_Refactored (0.00s)
=== RUN   TestRTSPConnectionManager_ErrorScenarios_Refactored
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestRTSPConnectionManager_ErrorScenarios_Refactored (0.01s)
=== RUN   TestRTSPConnectionManager_ConcurrentAccess_Refactored
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestRTSPConnectionManager_ConcurrentAccess_Refactored (0.01s)
=== RUN   TestRTSPConnectionManager_StressTest_Refactored
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestRTSPConnectionManager_StressTest_Refactored (0.01s)
=== RUN   TestRTSPConnectionManager_IntegrationWithController_Refactored
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestRTSPConnectionManager_IntegrationWithController_Refactored (0.01s)
=== RUN   TestRTSPConnectionManager_InputValidation_Refactored
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestRTSPConnectionManager_InputValidation_Refactored (0.00s)
=== RUN   TestRTSPConnectionManager_ErrorScenarios_DangerousBugs_Refactored
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestRTSPConnectionManager_ErrorScenarios_DangerousBugs_Refactored (0.01s)
=== RUN   TestRTSPKeepaliveReader_NewRTSPKeepaliveReader
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestRTSPKeepaliveReader_NewRTSPKeepaliveReader (0.00s)
=== RUN   TestRTSPKeepaliveReader_StartKeepalive
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestRTSPKeepaliveReader_StartKeepalive (0.00s)
=== RUN   TestRTSPKeepaliveReader_StopKeepalive
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestRTSPKeepaliveReader_StopKeepalive (0.00s)
=== RUN   TestRTSPKeepaliveReader_StopAll
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestRTSPKeepaliveReader_StopAll (0.00s)
=== RUN   TestRTSPKeepaliveReader_IsActive
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestRTSPKeepaliveReader_IsActive (0.01s)
=== RUN   TestRTSPKeepaliveReader_GetActiveCount
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestRTSPKeepaliveReader_GetActiveCount (0.00s)
=== RUN   TestRTSPKeepaliveReader_EnvironmentVariables
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestRTSPKeepaliveReader_EnvironmentVariables (0.00s)
=== RUN   TestRTSPKeepaliveReader_ConcurrentOperations
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestRTSPKeepaliveReader_ConcurrentOperations (0.00s)
=== RUN   TestSnapshotManager_New_ReqMTX001_Success_Refactored
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestSnapshotManager_New_ReqMTX001_Success_Refactored (0.01s)
=== RUN   TestSnapshotManager_TakeSnapshot_ReqMTX002_DataCreation_Refactored
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestSnapshotManager_TakeSnapshot_ReqMTX002_DataCreation_Refactored (0.01s)
=== RUN   TestSnapshotManager_GetSnapshotsList_ReqMTX002_Success_Refactored
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestSnapshotManager_GetSnapshotsList_ReqMTX002_Success_Refactored (0.01s)
=== RUN   TestSnapshotManager_GetSnapshotInfo_ReqMTX002_Success_Refactored
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestSnapshotManager_GetSnapshotInfo_ReqMTX002_Success_Refactored (0.01s)
=== RUN   TestSnapshotManager_DeleteSnapshotFile_ReqMTX002_Success_Refactored
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestSnapshotManager_DeleteSnapshotFile_ReqMTX002_Success_Refactored (0.01s)
=== RUN   TestSnapshotManager_GetSnapshotSettings_ReqMTX001_Success_Refactored
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestSnapshotManager_GetSnapshotSettings_ReqMTX001_Success_Refactored (0.01s)
=== RUN   TestSnapshotManager_CleanupOldSnapshots_ReqMTX002_Success_Refactored
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestSnapshotManager_CleanupOldSnapshots_ReqMTX002_Success_Refactored (0.01s)
=== RUN   TestSnapshotManager_TakeSnapshot_ReqMTX004_ErrorHandling_Refactored
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestSnapshotManager_TakeSnapshot_ReqMTX004_ErrorHandling_Refactored (0.00s)
=== RUN   TestSnapshotManager_TakeSnapshot_ReqMTX001_Concurrent_Refactored
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestSnapshotManager_TakeSnapshot_ReqMTX001_Concurrent_Refactored (0.00s)
=== RUN   TestSnapshotManager_TakeSnapshot_ReqMTX002_Tier0_V4L2Direct_RealHardware_Refactored
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestSnapshotManager_TakeSnapshot_ReqMTX002_Tier0_V4L2Direct_RealHardware_Refactored (0.01s)
=== RUN   TestSnapshotManager_TakeSnapshot_ReqMTX002_MultiTier_Integration_Refactored
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestSnapshotManager_TakeSnapshot_ReqMTX002_MultiTier_Integration_Refactored (0.01s)
=== RUN   TestController_GetStreams_Management_ReqMTX002
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestController_GetStreams_Management_ReqMTX002 (0.01s)
=== RUN   TestController_GetStream_Management_ReqMTX002
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestController_GetStream_Management_ReqMTX002 (0.01s)
=== RUN   TestController_CreateStream_Management_ReqMTX002
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestController_CreateStream_Management_ReqMTX002 (0.01s)
=== RUN   TestController_DeleteStream_Management_ReqMTX002
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestController_DeleteStream_Management_ReqMTX002 (0.01s)
=== RUN   TestController_StreamManagement_ErrorHandling_ReqMTX004
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestController_StreamManagement_ErrorHandling_ReqMTX004 (0.01s)
=== RUN   TestController_StreamManagement_NotRunning_ReqMTX004
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestController_StreamManagement_NotRunning_ReqMTX004 (0.01s)
=== RUN   TestController_StreamManagement_Concurrent_ReqMTX002
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestController_StreamManagement_Concurrent_ReqMTX002 (0.00s)
=== RUN   TestStreamManager_PanicRecovery
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestStreamManager_PanicRecovery (0.00s)
=== RUN   TestStreamManager_ErrorHandling
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestStreamManager_ErrorHandling (0.00s)
=== RUN   TestStreamManager_StreamLifecycle_ErrorHandling
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestStreamManager_StreamLifecycle_ErrorHandling (0.01s)
=== RUN   TestStreamManager_ErrorHandlingRobustness
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestStreamManager_ErrorHandlingRobustness (0.01s)
=== RUN   TestStreamManager_ErrorHandling_RealCamera
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestStreamManager_ErrorHandling_RealCamera (0.01s)
=== RUN   TestNewStreamManager_ReqMTX001
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestNewStreamManager_ReqMTX001 (0.00s)
=== RUN   TestStreamManager_CreateStream_ReqMTX002
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestStreamManager_CreateStream_ReqMTX002 (0.00s)
=== RUN   TestStreamManager_DeleteStream_ReqMTX002
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestStreamManager_DeleteStream_ReqMTX002 (0.01s)
=== RUN   TestStreamManager_StartStream_ReqMTX002
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestStreamManager_StartStream_ReqMTX002 (0.01s)
=== RUN   TestStreamManager_GetStreamStatus_ReqMTX002
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestStreamManager_GetStreamStatus_ReqMTX002 (0.00s)
=== RUN   TestStreamManager_ListStreamsAPI_ReqMTX002
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestStreamManager_ListStreamsAPI_ReqMTX002 (0.00s)
=== RUN   TestStreamManager_GetStreamURL_ReqMTX002
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestStreamManager_GetStreamURL_ReqMTX002 (0.00s)
=== RUN   TestStreamManager_GetStream_ReqMTX002
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestStreamManager_GetStream_ReqMTX002 (0.00s)
=== RUN   TestStreamManager_ListStreams_ReqMTX002
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestStreamManager_ListStreams_ReqMTX002 (0.00s)
=== RUN   TestStreamManager_StartRecordingStream_ReqMTX002
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestStreamManager_StartRecordingStream_ReqMTX002 (0.00s)
=== RUN   TestStreamManager_StartStream_Viewing_ReqMTX002
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestStreamManager_StartStream_Viewing_ReqMTX002 (0.00s)
=== RUN   TestStreamManager_StartStream_Snapshot_ReqMTX002
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestStreamManager_StartStream_Snapshot_ReqMTX002 (0.00s)
=== RUN   TestStreamManager_ErrorHandling_ReqMTX001
time="2025-10-04 22:12:02" level=info msg="Loading configuration"
    test_helpers.go:1098: Failed to load config from fixture config_valid_complete.yaml: configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
--- FAIL: TestStreamManager_ErrorHandling_ReqMTX001 (0.00s)
=== RUN   TestNewSystemMetricsManager_ReqMTX004
    test_system_metrics_manager_test.go:33: TODO: Enable tests - SystemMetricsManager is fully implemented
--- SKIP: TestNewSystemMetricsManager_ReqMTX004 (0.00s)
=== RUN   TestSystemMetricsManager_GetStorageInfoAPI_ReqMTX004
    test_system_metrics_manager_test.go:82: Storage Info Test Results:
    test_system_metrics_manager_test.go:83:   Total Space: 1709817856 bytes (1.59 GB)
    test_system_metrics_manager_test.go:84:   Used Space: 273743872 bytes (0.25 GB)
    test_system_metrics_manager_test.go:85:   Available Space: 1436073984 bytes (1.34 GB)
    test_system_metrics_manager_test.go:86:   Usage Percentage: 16.01%
    test_system_metrics_manager_test.go:87:   Low Space Warning: false
    test_system_metrics_manager_test.go:88:   Recordings Size: 0 bytes
    test_system_metrics_manager_test.go:89:   Snapshots Size: 784827 bytes
--- PASS: TestSystemMetricsManager_GetStorageInfoAPI_ReqMTX004 (0.00s)
=== RUN   TestSystemMetricsManager_GetSystemMetricsAPI_ReqMTX004
    test_system_metrics_manager_test.go:95: TODO: Enable tests - GetSystemMetricsAPI is fully implemented
--- SKIP: TestSystemMetricsManager_GetSystemMetricsAPI_ReqMTX004 (0.00s)
=== RUN   TestSystemMetricsManager_GetCleanupOldFilesAPI_ReqMTX004
    test_system_metrics_manager_test.go:101: TODO: Implement GetCleanupOldFilesAPI method in SystemMetricsManager
--- SKIP: TestSystemMetricsManager_GetCleanupOldFilesAPI_ReqMTX004 (0.00s)
=== RUN   TestSystemMetricsManager_ErrorHandling_ReqMTX007
    test_system_metrics_manager_test.go:107: TODO: Enable tests - SystemMetricsManager error handling is implemented
--- SKIP: TestSystemMetricsManager_ErrorHandling_ReqMTX007 (0.00s)
=== RUN   TestSystemMetricsManager_StorageThresholds_ReqMTX004
    test_system_metrics_manager_test.go:113: TODO: Enable tests - Storage monitoring is implemented
--- SKIP: TestSystemMetricsManager_StorageThresholds_ReqMTX004 (0.00s)
=== RUN   TestSystemMetricsManager_PerformanceMetrics_ReqMTX004
    test_system_metrics_manager_test.go:119: TODO: Enable tests - Performance metrics collection is implemented
--- SKIP: TestSystemMetricsManager_PerformanceMetrics_ReqMTX004 (0.00s)
=== RUN   TestSystemMetricsManager_ContextAwareShutdown_ReqMTX007
    test_system_metrics_manager_test.go:125: TODO: Enable tests - Context handling is implemented
--- SKIP: TestSystemMetricsManager_ContextAwareShutdown_ReqMTX007 (0.00s)
FAIL
FAIL	github.com/camerarecorder/mediamtx-camera-service-go/internal/mediamtx	1.302s
=== RUN   TestNewAPIKeyManager
=== RUN   TestNewAPIKeyManager/valid_configuration
time="2025-10-04 22:12:01" level=info msg="API Key Manager initialized"
=== RUN   TestNewAPIKeyManager/nil_configuration
=== RUN   TestNewAPIKeyManager/nil_logger
--- PASS: TestNewAPIKeyManager (0.00s)
    --- PASS: TestNewAPIKeyManager/valid_configuration (0.00s)
    --- PASS: TestNewAPIKeyManager/nil_configuration (0.00s)
    --- PASS: TestNewAPIKeyManager/nil_logger (0.00s)
=== RUN   TestAPIKeyManager_GenerateKey
time="2025-10-04 22:12:01" level=info msg="API Key Manager initialized"
=== RUN   TestAPIKeyManager_GenerateKey/valid_admin_key
time="2025-10-04 22:12:01" level=info msg="API key generated successfully"
=== RUN   TestAPIKeyManager_GenerateKey/valid_operator_key
time="2025-10-04 22:12:01" level=info msg="API key generated successfully"
=== RUN   TestAPIKeyManager_GenerateKey/valid_viewer_key
time="2025-10-04 22:12:01" level=info msg="API key generated successfully"
=== RUN   TestAPIKeyManager_GenerateKey/empty_role
--- PASS: TestAPIKeyManager_GenerateKey (0.00s)
    --- PASS: TestAPIKeyManager_GenerateKey/valid_admin_key (0.00s)
    --- PASS: TestAPIKeyManager_GenerateKey/valid_operator_key (0.00s)
    --- PASS: TestAPIKeyManager_GenerateKey/valid_viewer_key (0.00s)
    --- PASS: TestAPIKeyManager_GenerateKey/empty_role (0.00s)
=== RUN   TestAPIKeyManager_ValidateKey
time="2025-10-04 22:12:01" level=info msg="API Key Manager initialized"
time="2025-10-04 22:12:01" level=info msg="API key generated successfully"
=== RUN   TestAPIKeyManager_ValidateKey/valid_key
=== RUN   TestAPIKeyManager_ValidateKey/invalid_key
=== RUN   TestAPIKeyManager_ValidateKey/empty_key
--- PASS: TestAPIKeyManager_ValidateKey (0.00s)
    --- PASS: TestAPIKeyManager_ValidateKey/valid_key (0.00s)
    --- PASS: TestAPIKeyManager_ValidateKey/invalid_key (0.00s)
    --- PASS: TestAPIKeyManager_ValidateKey/empty_key (0.00s)
=== RUN   TestAPIKeyManager_RevokeKey
time="2025-10-04 22:12:01" level=info msg="API Key Manager initialized"
time="2025-10-04 22:12:01" level=info msg="API key generated successfully"
=== RUN   TestAPIKeyManager_RevokeKey/valid_key_ID
time="2025-10-04 22:12:01" level=info msg="API key revoked successfully"
=== RUN   TestAPIKeyManager_RevokeKey/invalid_key_ID
=== RUN   TestAPIKeyManager_RevokeKey/empty_key_ID
--- PASS: TestAPIKeyManager_RevokeKey (0.00s)
    --- PASS: TestAPIKeyManager_RevokeKey/valid_key_ID (0.00s)
    --- PASS: TestAPIKeyManager_RevokeKey/invalid_key_ID (0.00s)
    --- PASS: TestAPIKeyManager_RevokeKey/empty_key_ID (0.00s)
=== RUN   TestAPIKeyManager_ListKeys
time="2025-10-04 22:12:01" level=info msg="API Key Manager initialized"
time="2025-10-04 22:12:01" level=info msg="API key generated successfully"
time="2025-10-04 22:12:01" level=info msg="API key generated successfully"
time="2025-10-04 22:12:01" level=info msg="API key generated successfully"
=== RUN   TestAPIKeyManager_ListKeys/all_keys
=== RUN   TestAPIKeyManager_ListKeys/admin_keys_only
=== RUN   TestAPIKeyManager_ListKeys/operator_keys_only
=== RUN   TestAPIKeyManager_ListKeys/viewer_keys_only
=== RUN   TestAPIKeyManager_ListKeys/non-existent_role
--- PASS: TestAPIKeyManager_ListKeys (0.00s)
    --- PASS: TestAPIKeyManager_ListKeys/all_keys (0.00s)
    --- PASS: TestAPIKeyManager_ListKeys/admin_keys_only (0.00s)
    --- PASS: TestAPIKeyManager_ListKeys/operator_keys_only (0.00s)
    --- PASS: TestAPIKeyManager_ListKeys/viewer_keys_only (0.00s)
    --- PASS: TestAPIKeyManager_ListKeys/non-existent_role (0.00s)
=== RUN   TestAPIKeyManager_RotateKeys
time="2025-10-04 22:12:01" level=info msg="API Key Manager initialized"
time="2025-10-04 22:12:01" level=info msg="API key generated successfully"
time="2025-10-04 22:12:01" level=info msg="API key generated successfully"
=== RUN   TestAPIKeyManager_RotateKeys/rotate_admin_keys
time="2025-10-04 22:12:01" level=info msg="API key generated successfully"
time="2025-10-04 22:12:01" level=info msg="API key rotated successfully"
time="2025-10-04 22:12:01" level=info msg="API key generated successfully"
time="2025-10-04 22:12:01" level=info msg="API key rotated successfully"
=== RUN   TestAPIKeyManager_RotateKeys/rotate_non-existent_role
--- PASS: TestAPIKeyManager_RotateKeys (0.00s)
    --- PASS: TestAPIKeyManager_RotateKeys/rotate_admin_keys (0.00s)
    --- PASS: TestAPIKeyManager_RotateKeys/rotate_non-existent_role (0.00s)
=== RUN   TestAPIKeyManager_CleanupExpiredKeys
time="2025-10-04 22:12:01" level=info msg="API Key Manager initialized"
time="2025-10-04 22:12:01" level=info msg="API key generated successfully"
time="2025-10-04 22:12:01" level=info msg="API key generated successfully"
time="2025-10-04 22:12:01" level=info msg="Expired API keys cleaned up"
--- PASS: TestAPIKeyManager_CleanupExpiredKeys (0.00s)
=== RUN   TestAPIKeyManager_GetStats
time="2025-10-04 22:12:01" level=info msg="API Key Manager initialized"
time="2025-10-04 22:12:01" level=info msg="API key generated successfully"
time="2025-10-04 22:12:01" level=info msg="API key generated successfully"
time="2025-10-04 22:12:01" level=info msg="API key revoked successfully"
--- PASS: TestAPIKeyManager_GetStats (0.00s)
=== RUN   TestAPIKeyManager_MaxKeysPerRole
time="2025-10-04 22:12:01" level=info msg="API Key Manager initialized"
time="2025-10-04 22:12:01" level=info msg="API key generated successfully"
time="2025-10-04 22:12:01" level=info msg="API key generated successfully"
time="2025-10-04 22:12:01" level=info msg="API key revoked successfully"
time="2025-10-04 22:12:01" level=info msg="API key generated successfully"
--- PASS: TestAPIKeyManager_MaxKeysPerRole (0.00s)
=== RUN   TestAPIKeyManager_UsageTracking
time="2025-10-04 22:12:01" level=info msg="API Key Manager initialized"
time="2025-10-04 22:12:01" level=info msg="API key generated successfully"
--- PASS: TestAPIKeyManager_UsageTracking (0.00s)
=== RUN   TestNewInputValidator
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:50
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:43
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:35
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestNewInputValidator
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestNewInputValidator (0.00s)
=== RUN   TestValidationResult_NewValidationResult
--- PASS: TestValidationResult_NewValidationResult (0.00s)
=== RUN   TestValidationResult_AddError
--- PASS: TestValidationResult_AddError (0.00s)
=== RUN   TestValidationResult_AddWarning
--- PASS: TestValidationResult_AddWarning (0.00s)
=== RUN   TestValidationResult_HasErrors
--- PASS: TestValidationResult_HasErrors (0.00s)
=== RUN   TestValidationResult_GetErrorMessages
--- PASS: TestValidationResult_GetErrorMessages (0.00s)
=== RUN   TestInputValidator_ValidateCameraID
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:50
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:43
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:35
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestInputValidator_ValidateCameraID
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestInputValidator_ValidateCameraID (0.00s)
=== RUN   TestInputValidator_ValidateDuration
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:50
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:43
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:35
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestInputValidator_ValidateDuration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestInputValidator_ValidateDuration (0.00s)
=== RUN   TestInputValidator_ValidateResolution
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:50
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:43
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:35
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestInputValidator_ValidateResolution
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestInputValidator_ValidateResolution (0.01s)
=== RUN   TestInputValidator_ValidateFPS
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:50
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:43
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:35
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestInputValidator_ValidateFPS
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestInputValidator_ValidateFPS (0.01s)
=== RUN   TestInputValidator_ValidateQuality
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:50
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:43
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:35
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestInputValidator_ValidateQuality
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestInputValidator_ValidateQuality (0.01s)
=== RUN   TestInputValidator_ValidatePriority
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:50
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:43
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:35
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestInputValidator_ValidatePriority
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestInputValidator_ValidatePriority (0.01s)
=== RUN   TestInputValidator_ValidateRetentionDays
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:50
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:43
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:35
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestInputValidator_ValidateRetentionDays
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestInputValidator_ValidateRetentionDays (0.00s)
=== RUN   TestInputValidator_ValidateUseCase
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:50
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:43
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:35
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestInputValidator_ValidateUseCase
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestInputValidator_ValidateUseCase (0.00s)
=== RUN   TestInputValidator_ValidateAutoCleanup
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:50
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:43
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:35
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestInputValidator_ValidateAutoCleanup
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestInputValidator_ValidateAutoCleanup (0.01s)
=== RUN   TestInputValidator_SanitizeString
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:50
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:43
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:35
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestInputValidator_SanitizeString
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestInputValidator_SanitizeString (0.00s)
=== RUN   TestInputValidator_SanitizeMap
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:50
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:43
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:35
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestInputValidator_SanitizeMap
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestInputValidator_SanitizeMap (0.00s)
=== RUN   TestInputValidator_ValidateRecordingOptions
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:50
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:43
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:35
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestInputValidator_ValidateRecordingOptions
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestInputValidator_ValidateRecordingOptions (0.00s)
=== RUN   TestInputValidator_ValidateLimit
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:50
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:43
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:35
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestInputValidator_ValidateLimit
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestInputValidator_ValidateLimit (0.00s)
=== RUN   TestInputValidator_ValidateDevicePath
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:50
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:43
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:35
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestInputValidator_ValidateDevicePath
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestInputValidator_ValidateDevicePath (0.00s)
=== RUN   TestInputValidator_ValidateFilename
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:50
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:43
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:35
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestInputValidator_ValidateFilename
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestInputValidator_ValidateFilename (0.01s)
=== RUN   TestInputValidator_ValidateIntegerRange
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:50
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:43
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:35
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestInputValidator_ValidateIntegerRange
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestInputValidator_ValidateIntegerRange (0.01s)
=== RUN   TestInputValidator_ValidatePositiveInteger
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:50
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:43
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:35
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestInputValidator_ValidatePositiveInteger
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestInputValidator_ValidatePositiveInteger (0.01s)
=== RUN   TestInputValidator_ValidateNonNegativeInteger
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:50
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:43
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:35
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestInputValidator_ValidateNonNegativeInteger
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestInputValidator_ValidateNonNegativeInteger (0.01s)
=== RUN   TestInputValidator_ValidateStringParameter
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:50
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:43
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:35
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestInputValidator_ValidateStringParameter
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestInputValidator_ValidateStringParameter (0.01s)
=== RUN   TestInputValidator_ValidateOptionalString
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:50
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:43
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:35
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestInputValidator_ValidateOptionalString
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestInputValidator_ValidateOptionalString (0.01s)
=== RUN   TestInputValidator_ValidateBooleanParameter
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:50
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:43
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:35
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestInputValidator_ValidateBooleanParameter
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestInputValidator_ValidateBooleanParameter (0.00s)
=== RUN   TestInputValidator_ValidatePaginationParams
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:50
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:43
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:35
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestInputValidator_ValidatePaginationParams
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestInputValidator_ValidatePaginationParams (0.00s)
=== RUN   TestInputValidator_ValidateCommonRecordingParams
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:50
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:43
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:35
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestInputValidator_ValidateCommonRecordingParams
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestInputValidator_ValidateCommonRecordingParams (0.01s)
=== RUN   TestInputValidator_ValidateOffset_Complete
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:50
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:43
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:35
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestInputValidator_ValidateOffset_Complete
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestInputValidator_ValidateOffset_Complete (0.01s)
=== RUN   TestInputValidator_ValidateAutoCleanup_EdgeCases
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:50
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:43
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:35
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestInputValidator_ValidateAutoCleanup_EdgeCases
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestInputValidator_ValidateAutoCleanup_EdgeCases (0.01s)
=== RUN   TestJWTHandler_TokenGeneration
=== PAUSE TestJWTHandler_TokenGeneration
=== RUN   TestJWTHandler_CheckRateLimit
=== RUN   TestJWTHandler_CheckRateLimit/Within_limit
=== PAUSE TestJWTHandler_CheckRateLimit/Within_limit
=== RUN   TestJWTHandler_CheckRateLimit/At_limit
=== PAUSE TestJWTHandler_CheckRateLimit/At_limit
=== RUN   TestJWTHandler_CheckRateLimit/Over_limit
=== PAUSE TestJWTHandler_CheckRateLimit/Over_limit
=== RUN   TestJWTHandler_CheckRateLimit/Multiple_clients
=== PAUSE TestJWTHandler_CheckRateLimit/Multiple_clients
=== CONT  TestJWTHandler_CheckRateLimit/Within_limit
=== CONT  TestJWTHandler_CheckRateLimit/Over_limit
=== CONT  TestJWTHandler_CheckRateLimit/Multiple_clients
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
=== CONT  TestJWTHandler_CheckRateLimit/At_limit
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
=== NAME  TestJWTHandler_CheckRateLimit/Within_limit
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:50
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:43
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:35
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestJWTHandler_CheckRateLimit/Within_limit
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
=== NAME  TestJWTHandler_CheckRateLimit/At_limit
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:50
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:43
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:35
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestJWTHandler_CheckRateLimit/At_limit
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
=== NAME  TestJWTHandler_CheckRateLimit/Over_limit
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:50
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:43
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:35
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestJWTHandler_CheckRateLimit/Over_limit
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
=== NAME  TestJWTHandler_CheckRateLimit/Multiple_clients
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:50
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:43
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:35
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestJWTHandler_CheckRateLimit/Multiple_clients
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestJWTHandler_CheckRateLimit (0.00s)
    --- FAIL: TestJWTHandler_CheckRateLimit/Within_limit (0.01s)
    --- FAIL: TestJWTHandler_CheckRateLimit/At_limit (0.01s)
    --- FAIL: TestJWTHandler_CheckRateLimit/Over_limit (0.01s)
    --- FAIL: TestJWTHandler_CheckRateLimit/Multiple_clients (0.01s)
=== RUN   TestJWTHandler_RecordRequest
=== PAUSE TestJWTHandler_RecordRequest
=== RUN   TestJWTHandler_GetClientRateInfo
=== PAUSE TestJWTHandler_GetClientRateInfo
=== RUN   TestJWTHandler_SetRateLimit
=== PAUSE TestJWTHandler_SetRateLimit
=== RUN   TestJWTHandler_CleanupExpiredClients
=== PAUSE TestJWTHandler_CleanupExpiredClients
=== RUN   TestJWTHandler_IsTokenExpired
=== PAUSE TestJWTHandler_IsTokenExpired
=== RUN   TestJWTHandler_GetSecretKey
=== PAUSE TestJWTHandler_GetSecretKey
=== RUN   TestJWTHandler_GetAlgorithm
=== PAUSE TestJWTHandler_GetAlgorithm
=== RUN   TestJWTHandler_TokenValidation
=== PAUSE TestJWTHandler_TokenValidation
=== RUN   TestJWTHandler_ExpiryHandling
=== PAUSE TestJWTHandler_ExpiryHandling
=== RUN   TestJWTHandler_ClaimsValidation
=== PAUSE TestJWTHandler_ClaimsValidation
=== RUN   TestJWTHandler_ErrorHandling
=== PAUSE TestJWTHandler_ErrorHandling
=== RUN   TestJWTHandler_TokenValidation_ErrorPaths
=== PAUSE TestJWTHandler_TokenValidation_ErrorPaths
=== RUN   TestNewAuthMiddleware
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:50
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:43
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:35
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestNewAuthMiddleware
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestNewAuthMiddleware (0.01s)
=== RUN   TestAuthMiddleware_RequireAuth_Authenticated
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:50
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:43
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:35
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestAuthMiddleware_RequireAuth_Authenticated
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestAuthMiddleware_RequireAuth_Authenticated (0.01s)
=== RUN   TestAuthMiddleware_RequireAuth_NotAuthenticated
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:50
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:43
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:35
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestAuthMiddleware_RequireAuth_NotAuthenticated
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestAuthMiddleware_RequireAuth_NotAuthenticated (0.00s)
=== RUN   TestNewRBACMiddleware
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:50
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:43
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:35
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestNewRBACMiddleware
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestNewRBACMiddleware (0.00s)
=== RUN   TestRBACMiddleware_RequireRole_SufficientRole
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:50
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:43
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:35
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestRBACMiddleware_RequireRole_SufficientRole
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestRBACMiddleware_RequireRole_SufficientRole (0.00s)
=== RUN   TestRBACMiddleware_RequireRole_InsufficientRole
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:50
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:43
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:35
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestRBACMiddleware_RequireRole_InsufficientRole
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestRBACMiddleware_RequireRole_InsufficientRole (0.00s)
=== RUN   TestSecurityMiddleware_Integration
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:50
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:43
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:35
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestSecurityMiddleware_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestSecurityMiddleware_Integration (0.00s)
=== RUN   TestSecurityMiddleware_EdgeCases
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:50
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:43
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:35
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestSecurityMiddleware_EdgeCases
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestSecurityMiddleware_EdgeCases (0.01s)
=== RUN   TestNewSecureMethodRegistry
=== PAUSE TestNewSecureMethodRegistry
=== RUN   TestSecureMethodRegistry_RegisterMethod
=== PAUSE TestSecureMethodRegistry_RegisterMethod
=== RUN   TestSecureMethodRegistry_GetMethod
=== PAUSE TestSecureMethodRegistry_GetMethod
=== RUN   TestSecureMethodRegistry_GetAllMethods
=== PAUSE TestSecureMethodRegistry_GetAllMethods
=== RUN   TestSecureMethodRegistry_GetMethodSecurityInfo
=== PAUSE TestSecureMethodRegistry_GetMethodSecurityInfo
=== RUN   TestDefaultRateLimitConfig
=== PAUSE TestDefaultRateLimitConfig
=== RUN   TestNewEnhancedRateLimiter
=== PAUSE TestNewEnhancedRateLimiter
=== RUN   TestEnhancedRateLimiter_SetMethodRateLimit
=== PAUSE TestEnhancedRateLimiter_SetMethodRateLimit
=== RUN   TestEnhancedRateLimiter_CheckLimit
=== PAUSE TestEnhancedRateLimiter_CheckLimit
=== RUN   TestEnhancedRateLimiter_ResetClientLimits
=== PAUSE TestEnhancedRateLimiter_ResetClientLimits
=== RUN   TestEnhancedRateLimiter_GetClientStats
=== PAUSE TestEnhancedRateLimiter_GetClientStats
=== RUN   TestEnhancedRateLimiter_GetMethodStats
=== PAUSE TestEnhancedRateLimiter_GetMethodStats
=== RUN   TestEnhancedRateLimiter_GetGlobalStats
=== PAUSE TestEnhancedRateLimiter_GetGlobalStats
=== RUN   TestEnhancedRateLimiter_CleanupOldClients
=== PAUSE TestEnhancedRateLimiter_CleanupOldClients
=== RUN   TestEnhancedRateLimiter_StartCleanupRoutine
=== PAUSE TestEnhancedRateLimiter_StartCleanupRoutine
=== RUN   TestPermissionChecker_RoleHierarchy
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:50
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:43
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:35
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestPermissionChecker_RoleHierarchy
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestPermissionChecker_RoleHierarchy (0.00s)
=== RUN   TestPermissionChecker_MethodPermissions
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:50
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:43
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:35
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestPermissionChecker_MethodPermissions
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestPermissionChecker_MethodPermissions (0.00s)
=== RUN   TestPermissionChecker_EdgeCases
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:50
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:43
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:35
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestPermissionChecker_EdgeCases
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestPermissionChecker_EdgeCases (0.00s)
=== RUN   TestPermissionChecker_AdditionalEdgeCases
=== RUN   TestPermissionChecker_AdditionalEdgeCases/get_required_role_with_whitespace
time="2025-10-04 22:12:01" level=info msg="Permission checker initialized"
=== RUN   TestPermissionChecker_AdditionalEdgeCases/add_method_permission_with_whitespace
time="2025-10-04 22:12:01" level=info msg="Permission checker initialized"
=== RUN   TestPermissionChecker_AdditionalEdgeCases/remove_method_permission_with_whitespace
time="2025-10-04 22:12:01" level=info msg="Permission checker initialized"
=== RUN   TestPermissionChecker_AdditionalEdgeCases/add_method_permission_with_invalid_role
time="2025-10-04 22:12:01" level=info msg="Permission checker initialized"
--- PASS: TestPermissionChecker_AdditionalEdgeCases (0.00s)
    --- PASS: TestPermissionChecker_AdditionalEdgeCases/get_required_role_with_whitespace (0.00s)
    --- PASS: TestPermissionChecker_AdditionalEdgeCases/add_method_permission_with_whitespace (0.00s)
    --- PASS: TestPermissionChecker_AdditionalEdgeCases/remove_method_permission_with_whitespace (0.00s)
    --- PASS: TestPermissionChecker_AdditionalEdgeCases/add_method_permission_with_invalid_role (0.00s)
=== RUN   TestPermissionChecker_GetPermissionsForRole
=== PAUSE TestPermissionChecker_GetPermissionsForRole
=== RUN   TestRole_String
=== PAUSE TestRole_String
=== RUN   TestSessionManager_SessionLifecycle
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:50
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:43
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:35
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestSessionManager_SessionLifecycle
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestSessionManager_SessionLifecycle (0.00s)
=== RUN   TestSessionManager_Concurrency
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:50
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:43
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:35
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestSessionManager_Concurrency
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestSessionManager_Concurrency (0.01s)
=== RUN   TestSessionManager_ExpiryHandling
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:50
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:43
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:35
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestSessionManager_ExpiryHandling
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestSessionManager_ExpiryHandling (0.01s)
=== RUN   TestSessionManager_EdgeCases
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:50
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:43
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:35
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestSessionManager_EdgeCases
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestSessionManager_EdgeCases (0.01s)
=== RUN   TestSessionManager_AdditionalEdgeCases
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:50
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:43
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:35
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestSessionManager_AdditionalEdgeCases
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestSessionManager_AdditionalEdgeCases (0.00s)
=== RUN   TestSessionManager_ContextAwareShutdown
=== RUN   TestSessionManager_ContextAwareShutdown/graceful_shutdown_with_context
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:50
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:43
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:35
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestSessionManager_ContextAwareShutdown/graceful_shutdown_with_context
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
=== RUN   TestSessionManager_ContextAwareShutdown/shutdown_with_cancelled_context
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:50
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:43
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:35
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestSessionManager_ContextAwareShutdown/shutdown_with_cancelled_context
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
=== RUN   TestSessionManager_ContextAwareShutdown/shutdown_timeout_handling
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:50
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:43
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:35
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestSessionManager_ContextAwareShutdown/shutdown_timeout_handling
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
=== RUN   TestSessionManager_ContextAwareShutdown/double_stop_handling
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:50
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:43
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:35
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestSessionManager_ContextAwareShutdown/double_stop_handling
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestSessionManager_ContextAwareShutdown (0.02s)
    --- FAIL: TestSessionManager_ContextAwareShutdown/graceful_shutdown_with_context (0.00s)
    --- FAIL: TestSessionManager_ContextAwareShutdown/shutdown_with_cancelled_context (0.00s)
    --- FAIL: TestSessionManager_ContextAwareShutdown/shutdown_timeout_handling (0.01s)
    --- FAIL: TestSessionManager_ContextAwareShutdown/double_stop_handling (0.01s)
=== RUN   TestRoleBasics
--- PASS: TestRoleBasics (0.00s)
=== RUN   TestPermissionCheckerBasics
time="2025-10-04 22:12:01" level=info msg="Permission checker initialized"
--- PASS: TestPermissionCheckerBasics (0.00s)
=== RUN   TestSessionManagerBasics
time="2025-10-04 22:12:01" level=info msg="Session manager initialized with custom configuration"
time="2025-10-04 22:12:01" level=info msg="Session created successfully"
time="2025-10-04 22:12:01" level=info msg="Session manager stopped"
--- PASS: TestSessionManagerBasics (0.00s)
=== RUN   TestInputValidatorBasics
--- PASS: TestInputValidatorBasics (0.00s)
=== CONT  TestJWTHandler_TokenGeneration
=== CONT  TestSecureMethodRegistry_GetMethod
=== CONT  TestJWTHandler_TokenValidation
time="2025-10-04 22:12:01" level=info msg="Method registered with security enforcement"
--- PASS: TestSecureMethodRegistry_GetMethod (0.00s)
=== CONT  TestRole_String
=== RUN   TestRole_String/viewer
=== RUN   TestRole_String/operator
=== RUN   TestRole_String/admin
=== RUN   TestRole_String/unknown
--- PASS: TestRole_String (0.00s)
    --- PASS: TestRole_String/viewer (0.00s)
    --- PASS: TestRole_String/operator (0.00s)
    --- PASS: TestRole_String/admin (0.00s)
    --- PASS: TestRole_String/unknown (0.00s)
=== CONT  TestPermissionChecker_GetPermissionsForRole
time="2025-10-04 22:12:01" level=info msg="Permission checker initialized"
=== RUN   TestPermissionChecker_GetPermissionsForRole/admin_permissions
=== RUN   TestPermissionChecker_GetPermissionsForRole/operator_permissions
=== RUN   TestPermissionChecker_GetPermissionsForRole/viewer_permissions
=== RUN   TestPermissionChecker_GetPermissionsForRole/invalid_role
=== RUN   TestPermissionChecker_GetPermissionsForRole/empty_role
=== RUN   TestPermissionChecker_GetPermissionsForRole/uppercase_role
=== RUN   TestPermissionChecker_GetPermissionsForRole/numeric_role
=== RUN   TestPermissionChecker_GetPermissionsForRole/special_chars_role
--- PASS: TestPermissionChecker_GetPermissionsForRole (0.00s)
    --- PASS: TestPermissionChecker_GetPermissionsForRole/admin_permissions (0.00s)
    --- PASS: TestPermissionChecker_GetPermissionsForRole/operator_permissions (0.00s)
    --- PASS: TestPermissionChecker_GetPermissionsForRole/viewer_permissions (0.00s)
    --- PASS: TestPermissionChecker_GetPermissionsForRole/invalid_role (0.00s)
    --- PASS: TestPermissionChecker_GetPermissionsForRole/empty_role (0.00s)
    --- PASS: TestPermissionChecker_GetPermissionsForRole/uppercase_role (0.00s)
    --- PASS: TestPermissionChecker_GetPermissionsForRole/numeric_role (0.00s)
    --- PASS: TestPermissionChecker_GetPermissionsForRole/special_chars_role (0.00s)
=== CONT  TestEnhancedRateLimiter_StartCleanupRoutine
=== CONT  TestEnhancedRateLimiter_CleanupOldClients
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
time="2025-10-04 22:12:01" level=info msg="Old client rate limit entries cleaned up"
--- PASS: TestEnhancedRateLimiter_CleanupOldClients (0.00s)
=== CONT  TestEnhancedRateLimiter_GetGlobalStats
--- PASS: TestEnhancedRateLimiter_GetGlobalStats (0.00s)
=== CONT  TestEnhancedRateLimiter_GetMethodStats
time="2025-10-04 22:12:01" level=info msg="Method rate limit configured"
--- PASS: TestEnhancedRateLimiter_GetMethodStats (0.00s)
=== CONT  TestEnhancedRateLimiter_GetClientStats
--- PASS: TestEnhancedRateLimiter_GetClientStats (0.00s)
=== CONT  TestEnhancedRateLimiter_ResetClientLimits
time="2025-10-04 22:12:01" level=info msg="Client rate limits reset"
--- PASS: TestEnhancedRateLimiter_ResetClientLimits (0.00s)
=== CONT  TestEnhancedRateLimiter_CheckLimit
=== RUN   TestEnhancedRateLimiter_CheckLimit/successful_requests
=== RUN   TestEnhancedRateLimiter_CheckLimit/blocked_client
time="2025-10-04 22:12:01" level=warning msg="Client blocked due to rate limit violations"
=== RUN   TestEnhancedRateLimiter_CheckLimit/client_unblock_after_duration
=== RUN   TestEnhancedRateLimiter_CheckLimit/new_client_creation
=== RUN   TestEnhancedRateLimiter_CheckLimit/method_specific_rate_limit
time="2025-10-04 22:12:01" level=info msg="Configuration-based rate limit applied"
time="2025-10-04 22:12:01" level=info msg="Method rate limit configured"
=== RUN   TestEnhancedRateLimiter_CheckLimit/client_rate_limit_per_minute
--- PASS: TestEnhancedRateLimiter_StartCleanupRoutine (0.01s)
time="2025-10-04 22:12:01" level=warning msg="Client rate limit exceeded"
=== RUN   TestEnhancedRateLimiter_CheckLimit/client_blocking_excessive_requests
time="2025-10-04 22:12:01" level=warning msg="Client rate limit exceeded"
time="2025-10-04 22:12:01" level=warning msg="Client blocked due to excessive requests"
--- PASS: TestEnhancedRateLimiter_CheckLimit (0.00s)
    --- PASS: TestEnhancedRateLimiter_CheckLimit/successful_requests (0.00s)
    --- PASS: TestEnhancedRateLimiter_CheckLimit/blocked_client (0.00s)
    --- PASS: TestEnhancedRateLimiter_CheckLimit/client_unblock_after_duration (0.00s)
    --- PASS: TestEnhancedRateLimiter_CheckLimit/new_client_creation (0.00s)
    --- PASS: TestEnhancedRateLimiter_CheckLimit/method_specific_rate_limit (0.00s)
    --- PASS: TestEnhancedRateLimiter_CheckLimit/client_rate_limit_per_minute (0.00s)
    --- PASS: TestEnhancedRateLimiter_CheckLimit/client_blocking_excessive_requests (0.00s)
=== CONT  TestNewEnhancedRateLimiter
=== RUN   TestNewEnhancedRateLimiter/Nil_config
=== RUN   TestNewEnhancedRateLimiter/Valid_config
time="2025-10-04 22:12:01" level=info msg="Configuration-based rate limit applied"
--- PASS: TestNewEnhancedRateLimiter (0.00s)
    --- PASS: TestNewEnhancedRateLimiter/Nil_config (0.00s)
    --- PASS: TestNewEnhancedRateLimiter/Valid_config (0.00s)
=== CONT  TestDefaultRateLimitConfig
--- PASS: TestDefaultRateLimitConfig (0.00s)
=== CONT  TestSecureMethodRegistry_GetMethodSecurityInfo
time="2025-10-04 22:12:01" level=info msg="Method registered with security enforcement"
--- PASS: TestSecureMethodRegistry_GetMethodSecurityInfo (0.00s)
=== CONT  TestSecureMethodRegistry_GetAllMethods
time="2025-10-04 22:12:01" level=info msg="Method registered with security enforcement"
time="2025-10-04 22:12:01" level=info msg="Method registered with security enforcement"
--- PASS: TestSecureMethodRegistry_GetAllMethods (0.00s)
=== CONT  TestJWTHandler_TokenValidation_ErrorPaths
=== NAME  TestJWTHandler_TokenValidation
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:50
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:43
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:35
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestJWTHandler_TokenValidation
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestJWTHandler_TokenValidation (0.01s)
=== CONT  TestSecureMethodRegistry_RegisterMethod
time="2025-10-04 22:12:01" level=info msg="Method registered with security enforcement"
time="2025-10-04 22:12:01" level=info msg="Method registered with security enforcement"
--- PASS: TestSecureMethodRegistry_RegisterMethod (0.00s)
=== CONT  TestNewSecureMethodRegistry
--- PASS: TestNewSecureMethodRegistry (0.00s)
=== CONT  TestJWTHandler_CleanupExpiredClients
=== CONT  TestEnhancedRateLimiter_SetMethodRateLimit
time="2025-10-04 22:12:01" level=info msg="Method rate limit configured"
--- PASS: TestEnhancedRateLimiter_SetMethodRateLimit (0.00s)
=== CONT  TestJWTHandler_GetAlgorithm
=== NAME  TestJWTHandler_TokenGeneration
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:50
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:43
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:35
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestJWTHandler_TokenGeneration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestJWTHandler_TokenGeneration (0.01s)
=== CONT  TestJWTHandler_GetSecretKey
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:50
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:43
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:35
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestJWTHandler_GetSecretKey
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestJWTHandler_GetSecretKey (0.01s)
=== CONT  TestJWTHandler_IsTokenExpired
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
=== NAME  TestJWTHandler_TokenValidation_ErrorPaths
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:50
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:43
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:35
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestJWTHandler_TokenValidation_ErrorPaths
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestJWTHandler_TokenValidation_ErrorPaths (0.01s)
=== CONT  TestJWTHandler_GetClientRateInfo
=== NAME  TestJWTHandler_CleanupExpiredClients
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:50
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:43
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:35
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestJWTHandler_CleanupExpiredClients
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestJWTHandler_CleanupExpiredClients (0.01s)
=== CONT  TestJWTHandler_SetRateLimit
=== NAME  TestJWTHandler_GetAlgorithm
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:50
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:43
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:35
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestJWTHandler_GetAlgorithm
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestJWTHandler_GetAlgorithm (0.02s)
=== CONT  TestJWTHandler_RecordRequest
time="2025-10-04 22:12:01" level=info msg="Loading configuration"
=== NAME  TestJWTHandler_IsTokenExpired
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:50
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:43
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:35
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestJWTHandler_IsTokenExpired
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestJWTHandler_IsTokenExpired (0.01s)
=== CONT  TestJWTHandler_ClaimsValidation
time="2025-10-04 22:12:01" level=info msg="JWT handler initialized with rate limiting"
--- PASS: TestJWTHandler_ClaimsValidation (0.00s)
=== CONT  TestJWTHandler_ErrorHandling
time="2025-10-04 22:12:01" level=info msg="JWT handler initialized with rate limiting"
time="2025-10-04 22:12:01" level=info msg="JWT handler initialized with rate limiting"
--- PASS: TestJWTHandler_ErrorHandling (0.00s)
=== CONT  TestJWTHandler_ExpiryHandling
time="2025-10-04 22:12:01" level=info msg="JWT handler initialized with rate limiting"
=== NAME  TestJWTHandler_GetClientRateInfo
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:50
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:43
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:35
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestJWTHandler_GetClientRateInfo
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestJWTHandler_GetClientRateInfo (0.01s)
--- PASS: TestJWTHandler_ExpiryHandling (0.00s)
=== NAME  TestJWTHandler_RecordRequest
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:50
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:43
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:35
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestJWTHandler_RecordRequest
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestJWTHandler_RecordRequest (0.01s)
=== NAME  TestJWTHandler_SetRateLimit
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:50
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:43
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/security/test_helpers.go:35
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestJWTHandler_SetRateLimit
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestJWTHandler_SetRateLimit (0.01s)
FAIL
FAIL	github.com/camerarecorder/mediamtx-camera-service-go/internal/security	0.318s
?   	github.com/camerarecorder/mediamtx-camera-service-go/internal/testutils	[no test files]
=== RUN   TestWebSocket_ProgressiveReadiness_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/integration_test.go:37
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestWebSocket_ProgressiveReadiness_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestWebSocket_ProgressiveReadiness_Integration (0.01s)
=== RUN   TestWebSocket_Authentication_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/integration_test.go:49
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestWebSocket_Authentication_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestWebSocket_Authentication_Integration (0.01s)
=== RUN   TestWebSocket_CameraManagement_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/integration_test.go:61
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestWebSocket_CameraManagement_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestWebSocket_CameraManagement_Integration (0.01s)
=== RUN   TestWebSocket_Recording_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/integration_test.go:73
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestWebSocket_Recording_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestWebSocket_Recording_Integration (0.01s)
=== RUN   TestWebSocket_Snapshot_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/integration_test.go:85
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestWebSocket_Snapshot_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestWebSocket_Snapshot_Integration (0.01s)
=== RUN   TestWebSocket_ErrorRecovery_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/integration_test.go:97
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestWebSocket_ErrorRecovery_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestWebSocket_ErrorRecovery_Integration (0.01s)
=== RUN   TestWebSocket_Performance_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/integration_test.go:109
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestWebSocket_Performance_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestWebSocket_Performance_Integration (0.01s)
=== RUN   TestWebSocket_CompleteWorkflow_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/integration_test.go:121
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestWebSocket_CompleteWorkflow_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestWebSocket_CompleteWorkflow_Integration (0.00s)
=== RUN   TestWebSocket_ConcurrentClients_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/integration_test.go:133
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestWebSocket_ConcurrentClients_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestWebSocket_ConcurrentClients_Integration (0.01s)
=== RUN   TestWebSocket_SessionManagement_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/integration_test.go:191
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestWebSocket_SessionManagement_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestWebSocket_SessionManagement_Integration (0.01s)
=== RUN   TestWebSocket_OpenRPCCompliance_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/integration_test.go:226
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestWebSocket_OpenRPCCompliance_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestWebSocket_OpenRPCCompliance_Integration (0.01s)
=== RUN   TestWebSocket_ProgressiveReadiness_Performance
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/integration_test.go:267
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestWebSocket_ProgressiveReadiness_Performance
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestWebSocket_ProgressiveReadiness_Performance (0.01s)
=== RUN   TestAPICompliance_AllMethods
    test_api_compliance_progressive_test.go:27: Testing API compliance for all 37 methods with existing test infrastructure, timeout: 30s
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_api_compliance_progressive_test.go:30
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestAPICompliance_AllMethods
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestAPICompliance_AllMethods (0.01s)
=== RUN   TestWebSocket_CameraManagement_Complete_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_camera_management_integration_test.go:25
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestWebSocket_CameraManagement_Complete_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestWebSocket_CameraManagement_Complete_Integration (0.01s)
=== RUN   TestWebSocket_CameraDiscovery_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_camera_management_integration_test.go:39
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestWebSocket_CameraDiscovery_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestWebSocket_CameraDiscovery_Integration (0.01s)
=== RUN   TestWebSocket_CameraStatus_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_camera_management_integration_test.go:69
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestWebSocket_CameraStatus_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestWebSocket_CameraStatus_Integration (0.01s)
=== RUN   TestWebSocket_CameraCapabilities_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_camera_management_integration_test.go:100
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestWebSocket_CameraCapabilities_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestWebSocket_CameraCapabilities_Integration (0.01s)
=== RUN   TestWebSocket_DeviceMapping_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_camera_management_integration_test.go:131
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestWebSocket_DeviceMapping_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestWebSocket_DeviceMapping_Integration (0.01s)
=== RUN   TestWebSocket_CameraManagement_Performance
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_camera_management_integration_test.go:166
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestWebSocket_CameraManagement_Performance
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestWebSocket_CameraManagement_Performance (0.01s)
=== RUN   TestWebSocket_CameraManagement_ErrorHandling
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_camera_management_integration_test.go:198
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestWebSocket_CameraManagement_ErrorHandling
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestWebSocket_CameraManagement_ErrorHandling (0.01s)
=== RUN   TestProgressiveReadiness_ImmediateConnection_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_core_integration_test.go:45
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestProgressiveReadiness_ImmediateConnection_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestProgressiveReadiness_ImmediateConnection_Integration (0.01s)
=== RUN   TestProgressiveReadiness_Performance_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_core_integration_test.go:58
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestProgressiveReadiness_Performance_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestProgressiveReadiness_Performance_Integration (0.01s)
=== RUN   TestProgressiveReadiness_ConcurrentConnections_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_core_integration_test.go:79
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestProgressiveReadiness_ConcurrentConnections_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestProgressiveReadiness_ConcurrentConnections_Integration (0.01s)
=== RUN   TestAuthentication_ValidToken_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_core_integration_test.go:129
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestAuthentication_ValidToken_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestAuthentication_ValidToken_Integration (0.01s)
=== RUN   TestAuthentication_InvalidToken_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_core_integration_test.go:158
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestAuthentication_InvalidToken_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestAuthentication_InvalidToken_Integration (0.01s)
=== RUN   TestAuthentication_ExpiredToken_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_core_integration_test.go:179
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestAuthentication_ExpiredToken_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestAuthentication_ExpiredToken_Integration (0.01s)
=== RUN   TestAuthentication_NoToken_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_core_integration_test.go:201
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestAuthentication_NoToken_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestAuthentication_NoToken_Integration (0.00s)
=== RUN   TestPing_Unauthenticated_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_core_integration_test.go:227
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestPing_Unauthenticated_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestPing_Unauthenticated_Integration (0.00s)
=== RUN   TestPing_Authenticated_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_core_integration_test.go:247
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestPing_Authenticated_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestPing_Authenticated_Integration (0.00s)
=== RUN   TestConnection_Reconnection_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_core_integration_test.go:274
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestConnection_Reconnection_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestConnection_Reconnection_Integration (0.00s)
=== RUN   TestJSONRPC_ProtocolCompliance_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_core_integration_test.go:312
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestJSONRPC_ProtocolCompliance_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestJSONRPC_ProtocolCompliance_Integration (0.00s)
=== RUN   TestJSONRPC_ErrorHandling_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_core_integration_test.go:333
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestJSONRPC_ErrorHandling_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestJSONRPC_ErrorHandling_Integration (0.01s)
=== RUN   TestPerformance_BasicOperations_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_core_integration_test.go:360
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestPerformance_BasicOperations_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestPerformance_BasicOperations_Integration (0.01s)
=== RUN   TestPerformance_ConcurrentOperations_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_core_integration_test.go:384
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestPerformance_ConcurrentOperations_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestPerformance_ConcurrentOperations_Integration (0.01s)
=== RUN   TestEventIntegration_SystemEvents_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_core_integration_test.go:432
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestEventIntegration_SystemEvents_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestEventIntegration_SystemEvents_Integration (0.01s)
=== RUN   TestServerManagement_Metrics_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_core_integration_test.go:461
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestServerManagement_Metrics_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestServerManagement_Metrics_Integration (0.01s)
=== RUN   TestServerManagement_EventBroadcasting_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_core_integration_test.go:491
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestServerManagement_EventBroadcasting_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestServerManagement_EventBroadcasting_Integration (0.01s)
=== RUN   TestServerManagement_ErrorHandling_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_core_integration_test.go:517
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestServerManagement_ErrorHandling_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestServerManagement_ErrorHandling_Integration (0.01s)
=== RUN   TestHealthEndpoints_HTTP_Integration
=== RUN   TestHealthEndpoints_HTTP_Integration/BasicHealth
    test_core_integration_test.go:557: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_core_integration_test.go:557
        	Error:      	Not equal: 
        	            	expected: "HEALTHY"
        	            	actual  : "healthy"
        	            	
        	            	Diff:
        	            	--- Expected
        	            	+++ Actual
        	            	@@ -1 +1 @@
        	            	-HEALTHY
        	            	+healthy
        	Test:       	TestHealthEndpoints_HTTP_Integration/BasicHealth
        	Messages:   	System should be healthy
=== RUN   TestHealthEndpoints_HTTP_Integration/DetailedHealth
    test_core_integration_test.go:575: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_core_integration_test.go:575
        	Error:      	Not equal: 
        	            	expected: "HEALTHY"
        	            	actual  : "healthy"
        	            	
        	            	Diff:
        	            	--- Expected
        	            	+++ Actual
        	            	@@ -1 +1 @@
        	            	-HEALTHY
        	            	+healthy
        	Test:       	TestHealthEndpoints_HTTP_Integration/DetailedHealth
        	Messages:   	System should be healthy
=== RUN   TestHealthEndpoints_HTTP_Integration/ReadinessProbe
    test_core_integration_test.go:596: ✅ Health Endpoints: Readiness probe working
=== RUN   TestHealthEndpoints_HTTP_Integration/LivenessProbe
    test_core_integration_test.go:612: ✅ Health Endpoints: Liveness probe working
=== NAME  TestHealthEndpoints_HTTP_Integration
    test_core_integration_test.go:615: ✅ Health Endpoints: All HTTP health endpoints tested successfully
--- FAIL: TestHealthEndpoints_HTTP_Integration (0.01s)
    --- FAIL: TestHealthEndpoints_HTTP_Integration/BasicHealth (0.00s)
    --- FAIL: TestHealthEndpoints_HTTP_Integration/DetailedHealth (0.00s)
    --- PASS: TestHealthEndpoints_HTTP_Integration/ReadinessProbe (0.00s)
    --- PASS: TestHealthEndpoints_HTTP_Integration/LivenessProbe (0.00s)
=== RUN   TestWebSocket_ConnectionStability_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_core_integration_test.go:623
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestWebSocket_ConnectionStability_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestWebSocket_ConnectionStability_Integration (0.00s)
=== RUN   TestWebSocket_StabilityPerformance_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_core_integration_test.go:801
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestWebSocket_StabilityPerformance_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestWebSocket_StabilityPerformance_Integration (0.01s)
=== RUN   TestWebSocket_ErrorHandling_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_core_integration_test.go:914
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestWebSocket_ErrorHandling_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestWebSocket_ErrorHandling_Integration (0.01s)
=== RUN   TestWebSocket_ErrorRecoveryPatterns_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_core_integration_test.go:1106
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestWebSocket_ErrorRecoveryPatterns_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestWebSocket_ErrorRecoveryPatterns_Integration (0.01s)
=== RUN   TestWebSocket_API_Contract_Validation_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_core_integration_test.go:1234
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestWebSocket_API_Contract_Validation_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestWebSocket_API_Contract_Validation_Integration (0.01s)
=== RUN   TestWebSocket_Event_Integration_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_core_integration_test.go:1333
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestWebSocket_Event_Integration_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestWebSocket_Event_Integration_Integration (0.01s)
=== RUN   TestTargetedCoverage_DeleteRecording
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_coverage_targeted_test.go:40
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestTargetedCoverage_DeleteRecording
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestTargetedCoverage_DeleteRecording (0.01s)
=== RUN   TestTargetedCoverage_StartStreaming
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_coverage_targeted_test.go:83
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestTargetedCoverage_StartStreaming
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestTargetedCoverage_StartStreaming (0.01s)
=== RUN   TestTargetedCoverage_StopStreaming
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_coverage_targeted_test.go:119
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestTargetedCoverage_StopStreaming
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestTargetedCoverage_StopStreaming (0.01s)
=== RUN   TestTargetedCoverage_AddExternalStream
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_coverage_targeted_test.go:147
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestTargetedCoverage_AddExternalStream
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestTargetedCoverage_AddExternalStream (0.01s)
=== RUN   TestTargetedCoverage_RemoveExternalStream
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_coverage_targeted_test.go:177
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestTargetedCoverage_RemoveExternalStream
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestTargetedCoverage_RemoveExternalStream (0.01s)
=== RUN   TestTargetedCoverage_SecurityBlockedMethods
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_coverage_targeted_test.go:206
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestTargetedCoverage_SecurityBlockedMethods
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestTargetedCoverage_SecurityBlockedMethods (0.01s)
=== RUN   TestTargetedCoverage_AllUntestedMethods
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_coverage_targeted_test.go:243
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestTargetedCoverage_AllUntestedMethods
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestTargetedCoverage_AllUntestedMethods (0.00s)
=== RUN   TestEventSystem_SubscribeEvents_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_event_system_integration_test.go:38
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestEventSystem_SubscribeEvents_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestEventSystem_SubscribeEvents_Integration (0.00s)
=== RUN   TestEventSystem_UnsubscribeEvents_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_event_system_integration_test.go:80
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestEventSystem_UnsubscribeEvents_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestEventSystem_UnsubscribeEvents_Integration (0.00s)
=== RUN   TestEventSystem_GetSubscriptionStats_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_event_system_integration_test.go:115
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestEventSystem_GetSubscriptionStats_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestEventSystem_GetSubscriptionStats_Integration (0.00s)
=== RUN   TestEventSystem_EndToEndEventDelivery_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_event_system_integration_test.go:156
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestEventSystem_EndToEndEventDelivery_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestEventSystem_EndToEndEventDelivery_Integration (0.00s)
=== RUN   TestEventSystem_InvalidTopics_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_event_system_integration_test.go:190
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestEventSystem_InvalidTopics_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestEventSystem_InvalidTopics_Integration (0.00s)
=== RUN   TestEventSystem_ProgressiveReadiness_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_event_system_integration_test.go:223
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestEventSystem_ProgressiveReadiness_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestEventSystem_ProgressiveReadiness_Integration (0.00s)
=== RUN   TestEventSystem_MultipleClients_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_event_system_integration_test.go:258
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestEventSystem_MultipleClients_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestEventSystem_MultipleClients_Integration (0.00s)
=== RUN   TestWebSocket_FileLifecycle_Complete_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_file_lifecycle_integration_test.go:22
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestWebSocket_FileLifecycle_Complete_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestWebSocket_FileLifecycle_Complete_Integration (0.01s)
=== RUN   TestWebSocket_FileValidation_Comprehensive_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_file_lifecycle_integration_test.go:31
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestWebSocket_FileValidation_Comprehensive_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestWebSocket_FileValidation_Comprehensive_Integration (0.01s)
=== RUN   TestWebSocket_ConfigurationDrivenPaths_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_file_lifecycle_integration_test.go:45
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestWebSocket_ConfigurationDrivenPaths_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestWebSocket_ConfigurationDrivenPaths_Integration (0.01s)
=== RUN   TestWebSocket_TestUtilsIntegration_Integration
--- PASS: TestWebSocket_TestUtilsIntegration_Integration (0.00s)
=== RUN   TestPerformance_ConcurrentClients_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_performance_integration_test.go:38
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestPerformance_ConcurrentClients_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestPerformance_ConcurrentClients_Integration (0.01s)
=== RUN   TestPerformance_ConcurrentOperationsAdvanced_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_performance_integration_test.go:53
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestPerformance_ConcurrentOperationsAdvanced_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestPerformance_ConcurrentOperationsAdvanced_Integration (0.01s)
=== RUN   TestPerformance_LoadTesting_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_performance_integration_test.go:72
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestPerformance_LoadTesting_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestPerformance_LoadTesting_Integration (0.01s)
=== RUN   TestPerformance_StressTesting_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_performance_integration_test.go:87
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestPerformance_StressTesting_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestPerformance_StressTesting_Integration (0.01s)
=== RUN   TestPerformance_MemoryUsage_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_performance_integration_test.go:106
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestPerformance_MemoryUsage_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestPerformance_MemoryUsage_Integration (0.01s)
=== RUN   TestPerformance_MemoryLeaks_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_performance_integration_test.go:121
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestPerformance_MemoryLeaks_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestPerformance_MemoryLeaks_Integration (0.01s)
=== RUN   TestPerformance_ResponseTime_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_performance_integration_test.go:140
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestPerformance_ResponseTime_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestPerformance_ResponseTime_Integration (0.01s)
=== RUN   TestPerformance_Throughput_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_performance_integration_test.go:155
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestPerformance_Throughput_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestPerformance_Throughput_Integration (0.01s)
=== RUN   TestPerformance_Scalability_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_performance_integration_test.go:174
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestPerformance_Scalability_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestPerformance_Scalability_Integration (0.01s)
=== RUN   TestPerformance_ResourceUtilization_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_performance_integration_test.go:189
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestPerformance_ResourceUtilization_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestPerformance_ResourceUtilization_Integration (0.00s)
=== RUN   TestPerformance_Regression_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_performance_integration_test.go:208
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestPerformance_Regression_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestPerformance_Regression_Integration (0.00s)
=== RUN   TestPerformance_Baseline_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_performance_integration_test.go:223
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestPerformance_Baseline_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestPerformance_Baseline_Integration (0.00s)
=== RUN   TestRecording_FileLifecycle_Complete_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_recording_integration_test.go:44
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestRecording_FileLifecycle_Complete_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestRecording_FileLifecycle_Complete_Integration (0.01s)
=== RUN   TestRecording_FileValidation_Comprehensive_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_recording_integration_test.go:59
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestRecording_FileValidation_Comprehensive_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestRecording_FileValidation_Comprehensive_Integration (0.01s)
=== RUN   TestRecording_StatelessArchitecture_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_recording_integration_test.go:73
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestRecording_StatelessArchitecture_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestRecording_StatelessArchitecture_Integration (0.01s)
=== RUN   TestRecording_MediaMTXSourceOfTruth_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_recording_integration_test.go:90
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestRecording_MediaMTXSourceOfTruth_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestRecording_MediaMTXSourceOfTruth_Integration (0.01s)
=== RUN   TestRecording_BasicWorkflow_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_recording_integration_test.go:110
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestRecording_BasicWorkflow_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestRecording_BasicWorkflow_Integration (0.01s)
=== RUN   TestRecording_StartRecording_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_recording_integration_test.go:126
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestRecording_StartRecording_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestRecording_StartRecording_Integration (0.01s)
=== RUN   TestRecording_StopRecording_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_recording_integration_test.go:142
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestRecording_StopRecording_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestRecording_StopRecording_Integration (0.01s)
=== RUN   TestRecording_RecordingStatus_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_recording_integration_test.go:158
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestRecording_RecordingStatus_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestRecording_RecordingStatus_Integration (0.01s)
=== RUN   TestRecording_DurationManagement_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_recording_integration_test.go:178
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestRecording_DurationManagement_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestRecording_DurationManagement_Integration (0.01s)
=== RUN   TestRecording_FormatSupport_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_recording_integration_test.go:194
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestRecording_FormatSupport_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestRecording_FormatSupport_Integration (0.01s)
=== RUN   TestRecording_STANAG4609Compliance_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_recording_integration_test.go:210
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestRecording_STANAG4609Compliance_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestRecording_STANAG4609Compliance_Integration (0.01s)
=== RUN   TestRecording_FileManagement_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_recording_integration_test.go:230
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestRecording_FileManagement_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestRecording_FileManagement_Integration (0.01s)
=== RUN   TestRecording_FileListing_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_recording_integration_test.go:246
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestRecording_FileListing_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestRecording_FileListing_Integration (0.01s)
=== RUN   TestRecording_FileCleanup_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_recording_integration_test.go:262
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestRecording_FileCleanup_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestRecording_FileCleanup_Integration (0.01s)
=== RUN   TestRecording_ConcurrentRecordings_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_recording_integration_test.go:282
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestRecording_ConcurrentRecordings_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestRecording_ConcurrentRecordings_Integration (0.00s)
=== RUN   TestRecording_MultipleCameras_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_recording_integration_test.go:298
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestRecording_MultipleCameras_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestRecording_MultipleCameras_Integration (0.00s)
=== RUN   TestRecording_InvalidDevice_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_recording_integration_test.go:318
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestRecording_InvalidDevice_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestRecording_InvalidDevice_Integration (0.00s)
=== RUN   TestRecording_UnauthorizedAccess_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_recording_integration_test.go:334
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestRecording_UnauthorizedAccess_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestRecording_UnauthorizedAccess_Integration (0.00s)
=== RUN   TestRecording_NetworkErrorRecovery_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_recording_integration_test.go:350
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestRecording_NetworkErrorRecovery_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestRecording_NetworkErrorRecovery_Integration (0.00s)
=== RUN   TestRecording_PerformanceTargets_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_recording_integration_test.go:370
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestRecording_PerformanceTargets_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestRecording_PerformanceTargets_Integration (0.00s)
=== RUN   TestRecording_LoadTesting_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_recording_integration_test.go:386
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestRecording_LoadTesting_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestRecording_LoadTesting_Integration (0.00s)
=== RUN   TestSessionManagement_SessionPersistence_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_session_management_integration_test.go:38
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestSessionManagement_SessionPersistence_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestSessionManagement_SessionPersistence_Integration (0.00s)
=== RUN   TestSessionManagement_SessionState_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_session_management_integration_test.go:53
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestSessionManagement_SessionState_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestSessionManagement_SessionState_Integration (0.00s)
=== RUN   TestSessionManagement_SessionCleanup_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_session_management_integration_test.go:72
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestSessionManagement_SessionCleanup_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestSessionManagement_SessionCleanup_Integration (0.00s)
=== RUN   TestSessionManagement_ResourceCleanup_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_session_management_integration_test.go:87
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestSessionManagement_ResourceCleanup_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestSessionManagement_ResourceCleanup_Integration (0.00s)
=== RUN   TestSessionManagement_ConcurrentSessions_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_session_management_integration_test.go:106
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestSessionManagement_ConcurrentSessions_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestSessionManagement_ConcurrentSessions_Integration (0.00s)
=== RUN   TestSessionManagement_SessionIsolation_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_session_management_integration_test.go:121
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestSessionManagement_SessionIsolation_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestSessionManagement_SessionIsolation_Integration (0.01s)
=== RUN   TestSessionManagement_SessionTimeout_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_session_management_integration_test.go:140
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestSessionManagement_SessionTimeout_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestSessionManagement_SessionTimeout_Integration (0.01s)
=== RUN   TestSessionManagement_IdleTimeout_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_session_management_integration_test.go:155
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestSessionManagement_IdleTimeout_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestSessionManagement_IdleTimeout_Integration (0.00s)
=== RUN   TestSessionManagement_SessionRecovery_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_session_management_integration_test.go:174
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestSessionManagement_SessionRecovery_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestSessionManagement_SessionRecovery_Integration (0.00s)
=== RUN   TestSessionManagement_Reconnection_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_session_management_integration_test.go:189
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestSessionManagement_Reconnection_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestSessionManagement_Reconnection_Integration (0.01s)
=== RUN   TestSessionManagement_SessionSecurity_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_session_management_integration_test.go:208
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestSessionManagement_SessionSecurity_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestSessionManagement_SessionSecurity_Integration (0.01s)
=== RUN   TestSessionManagement_AuthenticationPersistence_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_session_management_integration_test.go:223
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestSessionManagement_AuthenticationPersistence_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestSessionManagement_AuthenticationPersistence_Integration (0.01s)
=== RUN   TestSessionManagement_ComprehensiveSession_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_session_management_integration_test.go:242
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestSessionManagement_ComprehensiveSession_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestSessionManagement_ComprehensiveSession_Integration (0.01s)
=== RUN   TestSessionManagement_SessionLifecycle_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_session_management_integration_test.go:257
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestSessionManagement_SessionLifecycle_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestSessionManagement_SessionLifecycle_Integration (0.01s)
=== RUN   TestSnapshot_FileLifecycle_Complete_Integration
time="2025-10-04 22:12:05" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_snapshot_integration_test.go:43
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestSnapshot_FileLifecycle_Complete_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestSnapshot_FileLifecycle_Complete_Integration (0.01s)
=== RUN   TestSnapshot_FileValidation_Comprehensive_Integration
time="2025-10-04 22:12:06" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_snapshot_integration_test.go:58
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestSnapshot_FileValidation_Comprehensive_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestSnapshot_FileValidation_Comprehensive_Integration (0.01s)
=== RUN   TestSnapshot_MultiTierPerformance_Integration
time="2025-10-04 22:12:06" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_snapshot_integration_test.go:72
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestSnapshot_MultiTierPerformance_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestSnapshot_MultiTierPerformance_Integration (0.01s)
=== RUN   TestSnapshot_Tier0DirectV4L2_Integration
time="2025-10-04 22:12:06" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_snapshot_integration_test.go:89
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestSnapshot_Tier0DirectV4L2_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestSnapshot_Tier0DirectV4L2_Integration (0.01s)
=== RUN   TestSnapshot_Tier1FFmpegDirect_Integration
time="2025-10-04 22:12:06" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_snapshot_integration_test.go:106
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestSnapshot_Tier1FFmpegDirect_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestSnapshot_Tier1FFmpegDirect_Integration (0.01s)
=== RUN   TestSnapshot_Tier2RTSPReuse_Integration
time="2025-10-04 22:12:06" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_snapshot_integration_test.go:123
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestSnapshot_Tier2RTSPReuse_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestSnapshot_Tier2RTSPReuse_Integration (0.01s)
=== RUN   TestSnapshot_Tier3StreamActivation_Integration
time="2025-10-04 22:12:06" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_snapshot_integration_test.go:140
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestSnapshot_Tier3StreamActivation_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestSnapshot_Tier3StreamActivation_Integration (0.01s)
=== RUN   TestSnapshot_BasicWorkflow_Integration
time="2025-10-04 22:12:06" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_snapshot_integration_test.go:160
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestSnapshot_BasicWorkflow_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestSnapshot_BasicWorkflow_Integration (0.01s)
=== RUN   TestSnapshot_CustomFilename_Integration
time="2025-10-04 22:12:06" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_snapshot_integration_test.go:176
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestSnapshot_CustomFilename_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestSnapshot_CustomFilename_Integration (0.01s)
=== RUN   TestSnapshot_ConcurrentCaptures_Integration
time="2025-10-04 22:12:06" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_snapshot_integration_test.go:192
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestSnapshot_ConcurrentCaptures_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestSnapshot_ConcurrentCaptures_Integration (0.01s)
=== RUN   TestSnapshot_FileManagement_Integration
time="2025-10-04 22:12:06" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_snapshot_integration_test.go:212
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestSnapshot_FileManagement_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestSnapshot_FileManagement_Integration (0.01s)
=== RUN   TestSnapshot_FileCleanup_Integration
time="2025-10-04 22:12:06" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_snapshot_integration_test.go:228
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestSnapshot_FileCleanup_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestSnapshot_FileCleanup_Integration (0.01s)
=== RUN   TestSnapshot_StorageInfo_Integration
time="2025-10-04 22:12:06" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_snapshot_integration_test.go:244
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestSnapshot_StorageInfo_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestSnapshot_StorageInfo_Integration (0.01s)
=== RUN   TestSnapshot_InvalidDevice_Integration
time="2025-10-04 22:12:06" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_snapshot_integration_test.go:264
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestSnapshot_InvalidDevice_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestSnapshot_InvalidDevice_Integration (0.01s)
=== RUN   TestSnapshot_UnauthorizedAccess_Integration
time="2025-10-04 22:12:06" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_snapshot_integration_test.go:280
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestSnapshot_UnauthorizedAccess_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestSnapshot_UnauthorizedAccess_Integration (0.01s)
=== RUN   TestSnapshot_NetworkErrorRecovery_Integration
time="2025-10-04 22:12:06" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_snapshot_integration_test.go:296
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestSnapshot_NetworkErrorRecovery_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestSnapshot_NetworkErrorRecovery_Integration (0.01s)
=== RUN   TestSnapshot_PerformanceBenchmarks_Integration
time="2025-10-04 22:12:06" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_snapshot_integration_test.go:316
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestSnapshot_PerformanceBenchmarks_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestSnapshot_PerformanceBenchmarks_Integration (0.01s)
=== RUN   TestSnapshot_LoadTesting_Integration
time="2025-10-04 22:12:06" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_snapshot_integration_test.go:332
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestSnapshot_LoadTesting_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestSnapshot_LoadTesting_Integration (0.01s)
=== RUN   TestUntestedAPI_DeleteRecording_Integration
time="2025-10-04 22:12:06" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_untested_methods_integration_test.go:43
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestUntestedAPI_DeleteRecording_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestUntestedAPI_DeleteRecording_Integration (0.01s)
=== RUN   TestUntestedAPI_StartStreaming_Integration
time="2025-10-04 22:12:06" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_untested_methods_integration_test.go:74
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestUntestedAPI_StartStreaming_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestUntestedAPI_StartStreaming_Integration (0.01s)
=== RUN   TestUntestedAPI_StopStreaming_Integration
time="2025-10-04 22:12:06" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_untested_methods_integration_test.go:99
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestUntestedAPI_StopStreaming_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestUntestedAPI_StopStreaming_Integration (0.01s)
=== RUN   TestUntestedAPI_AddExternalStream_Integration
time="2025-10-04 22:12:06" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_untested_methods_integration_test.go:128
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestUntestedAPI_AddExternalStream_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestUntestedAPI_AddExternalStream_Integration (0.01s)
=== RUN   TestUntestedAPI_RemoveExternalStream_Integration
time="2025-10-04 22:12:06" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_untested_methods_integration_test.go:157
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestUntestedAPI_RemoveExternalStream_Integration
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestUntestedAPI_RemoveExternalStream_Integration (0.01s)
=== RUN   TestCoveragePatterns_AsserterUsage
time="2025-10-04 22:12:06" level=info msg="Loading configuration"
    fixture_loader.go:38: 
        	Error Trace:	/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/fixture_loader.go:38
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/testutils/setup.go:41
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_helper_test.go:61
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_asserters_test.go:47
        	            				/home/carlossprekelsen/CameraRecorder/mediamtx-camera-service-go/internal/websocket/test_untested_methods_integration_test.go:199
        	Error:      	Received unexpected error:
        	            	configuration validation failed: validation error for field 'config': configuration validation failed: [validation error for field 'server.websocket_path': websocket path cannot be empty failed to validate codec configuration: validation error for field 'mediamtx.codec.video_profile': video profile must be one of [baseline main high high422 high444], got  validation error for field 'security.jwt_secret_key': JWT secret key cannot be empty]
        	Test:       	TestCoveragePatterns_AsserterUsage
        	Messages:   	Failed to load config from fixture config_valid_complete.yaml
--- FAIL: TestCoveragePatterns_AsserterUsage (0.00s)
FAIL
FAIL	github.com/camerarecorder/mediamtx-camera-service-go/internal/websocket	0.862s
?   	github.com/camerarecorder/mediamtx-camera-service-go/tests/integration	[no test files]
?   	github.com/camerarecorder/mediamtx-camera-service-go/tests/utils	[no test files]
FAIL
