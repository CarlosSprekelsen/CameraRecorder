/usr/lib/python3/dist-packages/pytest_asyncio/plugin.py:207: PytestDeprecationWarning: The configuration option "asyncio_default_fixture_loop_scope" is unset.
The event loop scope for asynchronous fixtures will default to the fixture caching scope. Future versions of pytest-asyncio will default the loop scope for asynchronous fixtures to function scope. Set the default fixture loop scope explicitly in order to avoid unexpected behavior in the future. Valid fixture loop scopes are: "function", "class", "module", "package", "session"

  warnings.warn(PytestDeprecationWarning(_DEFAULT_FIXTURE_LOOP_SCOPE_UNSET))
============================= test session starts ==============================
platform linux -- Python 3.13.3, pytest-8.3.5, pluggy-1.6.0
rootdir: /home/carlossprekelsen/CameraRecorder/mediamtx-camera-service
configfile: pytest.ini
plugins: cov-6.2.1, asyncio-0.25.1, typeguard-4.4.2
asyncio: mode=Mode.STRICT, asyncio_default_fixture_loop_scope=None
collected 16 items

tests/installation/test_fresh_installation.py F.Fsss...F.ss...           [100%]

=================================== FAILURES ===================================
_________ TestFreshInstallationProcess.test_ubuntu_22_04_compatibility _________
tests/installation/test_fresh_installation.py:54: in test_ubuntu_22_04_compatibility
    assert "Python 3.10" in result.stdout or "Python 3.11" in result.stdout or "Python 3.12" in result.stdout, "Python 3.10+ required"
E   AssertionError: Python 3.10+ required
E   assert ('Python 3.10' in 'Python 3.13.3\n' or 'Python 3.11' in 'Python 3.13.3\n' or 'Python 3.12' in 'Python 3.13.3\n')
E    +  where 'Python 3.13.3\n' = CompletedProcess(args=['python3', '--version'], returncode=0, stdout='Python 3.13.3\n', stderr='').stdout
E    +  and   'Python 3.13.3\n' = CompletedProcess(args=['python3', '--version'], returncode=0, stdout='Python 3.13.3\n', stderr='').stdout
E    +  and   'Python 3.13.3\n' = CompletedProcess(args=['python3', '--version'], returncode=0, stdout='Python 3.13.3\n', stderr='').stdout
_______ TestFreshInstallationProcess.test_installation_script_execution ________
tests/installation/test_fresh_installation.py:101: in test_installation_script_execution
    assert result.returncode == 0, f"Installation failed: {result.stderr}"
E   AssertionError: Installation failed: bash: deployment/scripts/install.sh: No such file or directory
E     
E   assert 127 == 0
E    +  where 127 = CompletedProcess(args=['sudo', 'bash', 'deployment/scripts/install.sh'], returncode=127, stdout='', stderr='bash: deployment/scripts/install.sh: No such file or directory\n').returncode
___ TestInstallationIssuesAndResolutions.test_configuration_file_validation ____
tests/installation/test_fresh_installation.py:294: in test_configuration_file_validation
    if Path(config_file).exists():
/usr/lib/python3.13/pathlib/_abc.py:450: in exists
    self.stat(follow_symlinks=follow_symlinks)
/usr/lib/python3.13/pathlib/_local.py:517: in stat
    return os.stat(self, follow_symlinks=follow_symlinks)
E   PermissionError: [Errno 13] Permission denied: '/opt/camera-service/config/camera-service.yaml'
=========================== short test summary info ============================
SKIPPED [1] tests/installation/test_fresh_installation.py:124: Environment file not created
SKIPPED [1] tests/installation/test_fresh_installation.py:168: Health endpoint not available
SKIPPED [1] tests/installation/test_fresh_installation.py:194: JWT token generation not working
SKIPPED [1] tests/installation/test_fresh_installation.py:345: Health endpoint not available
SKIPPED [1] tests/installation/test_fresh_installation.py:373: Log directory not created: /var/log/camera-service
FAILED tests/installation/test_fresh_installation.py::TestFreshInstallationProcess::test_ubuntu_22_04_compatibility
FAILED tests/installation/test_fresh_installation.py::TestFreshInstallationProcess::test_installation_script_execution
FAILED tests/installation/test_fresh_installation.py::TestInstallationIssuesAndResolutions::test_configuration_file_validation
=================== 3 failed, 8 passed, 5 skipped in 30.61s ====================
